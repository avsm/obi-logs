$ opam depext -iy -j 2 opus.0.1.0
# Detecting depexts using vars: arch=x86_64, os=linux, os-distribution=debian, os-family=debian
# The following system packages are needed:
libavutil-dev
libogg-dev
libopus-dev
m4
pkg-config
The following command needs to be run through "sudo":
    apt-get install -qq -yy libavutil-dev libogg-dev libopus-dev m4 pkg-config
debconf: delaying package configuration, since apt-utils is not installed
Selecting previously unselected package libogg0:amd64.
(Reading database ... (Reading database ... 5%(Reading database ... 10%(Reading database ... 15%(Reading database ... 20%(Reading database ... 25%(Reading database ... 30%(Reading database ... 35%(Reading database ... 40%(Reading database ... 45%(Reading database ... 50%(Reading database ... 55%(Reading database ... 60%(Reading database ... 65%(Reading database ... 70%(Reading database ... 75%(Reading database ... 80%(Reading database ... 85%(Reading database ... 90%(Reading database ... 95%(Reading database ... 100%(Reading database ... 17681 files and directories currently installed.)
Preparing to unpack .../00-libogg0_1.3.2-1_amd64.deb ...
Unpacking libogg0:amd64 (1.3.2-1) ...
Selecting previously unselected package sgml-base.
Preparing to unpack .../01-sgml-base_1.29_all.deb ...
Unpacking sgml-base (1.29) ...
Selecting previously unselected package libicu57:amd64.
Preparing to unpack .../02-libicu57_57.1-6+deb9u2_amd64.deb ...
Unpacking libicu57:amd64 (57.1-6+deb9u2) ...
Selecting previously unselected package libxml2:amd64.
Preparing to unpack .../03-libxml2_2.9.4+dfsg1-2.2+deb9u2_amd64.deb ...
Unpacking libxml2:amd64 (2.9.4+dfsg1-2.2+deb9u2) ...
Selecting previously unselected package libva1:amd64.
Preparing to unpack .../04-libva1_1.7.3-2_amd64.deb ...
Unpacking libva1:amd64 (1.7.3-2) ...
Selecting previously unselected package libdrm2:amd64.
Preparing to unpack .../05-libdrm2_2.4.74-1_amd64.deb ...
Unpacking libdrm2:amd64 (2.4.74-1) ...
Selecting previously unselected package libpciaccess0:amd64.
Preparing to unpack .../06-libpciaccess0_0.13.4-1+b2_amd64.deb ...
Unpacking libpciaccess0:amd64 (0.13.4-1+b2) ...
Selecting previously unselected package libdrm-intel1:amd64.
Preparing to unpack .../07-libdrm-intel1_2.4.74-1_amd64.deb ...
Unpacking libdrm-intel1:amd64 (2.4.74-1) ...
Selecting previously unselected package i965-va-driver:amd64.
Preparing to unpack .../08-i965-va-driver_1.7.3-1_amd64.deb ...
Unpacking i965-va-driver:amd64 (1.7.3-1) ...
Selecting previously unselected package libva-drm1:amd64.
Preparing to unpack .../09-libva-drm1_1.7.3-2_amd64.deb ...
Unpacking libva-drm1:amd64 (1.7.3-2) ...
Selecting previously unselected package libxfixes3:amd64.
Preparing to unpack .../10-libxfixes3_1%3a5.0.3-1_amd64.deb ...
Unpacking libxfixes3:amd64 (1:5.0.3-1) ...
Selecting previously unselected package libva-x11-1:amd64.
Preparing to unpack .../11-libva-x11-1_1.7.3-2_amd64.deb ...
Unpacking libva-x11-1:amd64 (1.7.3-2) ...
Selecting previously unselected package libvdpau1:amd64.
Preparing to unpack .../12-libvdpau1_1.1.1-6_amd64.deb ...
Unpacking libvdpau1:amd64 (1.1.1-6) ...
Selecting previously unselected package libavutil55:amd64.
Preparing to unpack .../13-libavutil55_7%3a3.2.12-1~deb9u1_amd64.deb ...
Unpacking libavutil55:amd64 (7:3.2.12-1~deb9u1) ...
Selecting previously unselected package libavutil-dev:amd64.
Preparing to unpack .../14-libavutil-dev_7%3a3.2.12-1~deb9u1_amd64.deb ...
Unpacking libavutil-dev:amd64 (7:3.2.12-1~deb9u1) ...
Selecting previously unselected package libdrm-amdgpu1:amd64.
Preparing to unpack .../15-libdrm-amdgpu1_2.4.74-1_amd64.deb ...
Unpacking libdrm-amdgpu1:amd64 (2.4.74-1) ...
Selecting previously unselected package libdrm-nouveau2:amd64.
Preparing to unpack .../16-libdrm-nouveau2_2.4.74-1_amd64.deb ...
Unpacking libdrm-nouveau2:amd64 (2.4.74-1) ...
Selecting previously unselected package libdrm-radeon1:amd64.
Preparing to unpack .../17-libdrm-radeon1_2.4.74-1_amd64.deb ...
Unpacking libdrm-radeon1:amd64 (2.4.74-1) ...
Selecting previously unselected package libllvm3.9:amd64.
Preparing to unpack .../18-libllvm3.9_1%3a3.9.1-9_amd64.deb ...
Unpacking libllvm3.9:amd64 (1:3.9.1-9) ...
Selecting previously unselected package libsensors4:amd64.
Preparing to unpack .../19-libsensors4_1%3a3.4.0-4_amd64.deb ...
Unpacking libsensors4:amd64 (1:3.4.0-4) ...
Selecting previously unselected package libgl1-mesa-dri:amd64.
Preparing to unpack .../20-libgl1-mesa-dri_13.0.6-1+b2_amd64.deb ...
Unpacking libgl1-mesa-dri:amd64 (13.0.6-1+b2) ...
Selecting previously unselected package libglapi-mesa:amd64.
Preparing to unpack .../21-libglapi-mesa_13.0.6-1+b2_amd64.deb ...
Unpacking libglapi-mesa:amd64 (13.0.6-1+b2) ...
Selecting previously unselected package libx11-xcb1:amd64.
Preparing to unpack .../22-libx11-xcb1_2%3a1.6.4-3_amd64.deb ...
Unpacking libx11-xcb1:amd64 (2:1.6.4-3) ...
Selecting previously unselected package libxcb-dri2-0:amd64.
Preparing to unpack .../23-libxcb-dri2-0_1.12-1_amd64.deb ...
Unpacking libxcb-dri2-0:amd64 (1.12-1) ...
Selecting previously unselected package libxcb-dri3-0:amd64.
Preparing to unpack .../24-libxcb-dri3-0_1.12-1_amd64.deb ...
Unpacking libxcb-dri3-0:amd64 (1.12-1) ...
Selecting previously unselected package libxcb-glx0:amd64.
Preparing to unpack .../25-libxcb-glx0_1.12-1_amd64.deb ...
Unpacking libxcb-glx0:amd64 (1.12-1) ...
Selecting previously unselected package libxcb-present0:amd64.
Preparing to unpack .../26-libxcb-present0_1.12-1_amd64.deb ...
Unpacking libxcb-present0:amd64 (1.12-1) ...
Selecting previously unselected package libxcb-sync1:amd64.
Preparing to unpack .../27-libxcb-sync1_1.12-1_amd64.deb ...
Unpacking libxcb-sync1:amd64 (1.12-1) ...
Selecting previously unselected package libxdamage1:amd64.
Preparing to unpack .../28-libxdamage1_1%3a1.1.4-2+b3_amd64.deb ...
Unpacking libxdamage1:amd64 (1:1.1.4-2+b3) ...
Selecting previously unselected package libxshmfence1:amd64.
Preparing to unpack .../29-libxshmfence1_1.2-1+b2_amd64.deb ...
Unpacking libxshmfence1:amd64 (1.2-1+b2) ...
Selecting previously unselected package libxxf86vm1:amd64.
Preparing to unpack .../30-libxxf86vm1_1%3a1.1.4-1+b2_amd64.deb ...
Unpacking libxxf86vm1:amd64 (1:1.1.4-1+b2) ...
Selecting previously unselected package libgl1-mesa-glx:amd64.
Preparing to unpack .../31-libgl1-mesa-glx_13.0.6-1+b2_amd64.deb ...
Unpacking libgl1-mesa-glx:amd64 (13.0.6-1+b2) ...
Selecting previously unselected package libglib2.0-0:amd64.
Preparing to unpack .../32-libglib2.0-0_2.50.3-2_amd64.deb ...
Unpacking libglib2.0-0:amd64 (2.50.3-2) ...
Selecting previously unselected package libglib2.0-data.
Preparing to unpack .../33-libglib2.0-data_2.50.3-2_all.deb ...
Unpacking libglib2.0-data (2.50.3-2) ...
Selecting previously unselected package libogg-dev:amd64.
Preparing to unpack .../34-libogg-dev_1.3.2-1_amd64.deb ...
Unpacking libogg-dev:amd64 (1.3.2-1) ...
Selecting previously unselected package libopus0:amd64.
Preparing to unpack .../35-libopus0_1.2~alpha2-1_amd64.deb ...
Unpacking libopus0:amd64 (1.2~alpha2-1) ...
Selecting previously unselected package libopus-dev:amd64.
Preparing to unpack .../36-libopus-dev_1.2~alpha2-1_amd64.deb ...
Unpacking libopus-dev:amd64 (1.2~alpha2-1) ...
Selecting previously unselected package libvdpau-va-gl1:amd64.
Preparing to unpack .../37-libvdpau-va-gl1_0.4.2-1_amd64.deb ...
Unpacking libvdpau-va-gl1:amd64 (0.4.2-1) ...
Selecting previously unselected package mesa-va-drivers:amd64.
Preparing to unpack .../38-mesa-va-drivers_13.0.6-1+b2_amd64.deb ...
Unpacking mesa-va-drivers:amd64 (13.0.6-1+b2) ...
Selecting previously unselected package mesa-vdpau-drivers:amd64.
Preparing to unpack .../39-mesa-vdpau-drivers_13.0.6-1+b2_amd64.deb ...
Unpacking mesa-vdpau-drivers:amd64 (13.0.6-1+b2) ...
Selecting previously unselected package pkg-config.
Preparing to unpack .../40-pkg-config_0.29-4+b1_amd64.deb ...
Unpacking pkg-config (0.29-4+b1) ...
Selecting previously unselected package shared-mime-info.
Preparing to unpack .../41-shared-mime-info_1.8-1+deb9u1_amd64.deb ...
Unpacking shared-mime-info (1.8-1+deb9u1) ...
Selecting previously unselected package va-driver-all:amd64.
Preparing to unpack .../42-va-driver-all_1.7.3-2_amd64.deb ...
Unpacking va-driver-all:amd64 (1.7.3-2) ...
Selecting previously unselected package vdpau-driver-all:amd64.
Preparing to unpack .../43-vdpau-driver-all_1.1.1-6_amd64.deb ...
Unpacking vdpau-driver-all:amd64 (1.1.1-6) ...
Selecting previously unselected package xdg-user-dirs.
Preparing to unpack .../44-xdg-user-dirs_0.15-2+b1_amd64.deb ...
Unpacking xdg-user-dirs (0.15-2+b1) ...
Selecting previously unselected package xml-core.
Preparing to unpack .../45-xml-core_0.17_all.deb ...
Unpacking xml-core (0.17) ...
Selecting previously unselected package libtxc-dxtn-s2tc:amd64.
Preparing to unpack .../46-libtxc-dxtn-s2tc_1.0+git20151227-2_amd64.deb ...
Unpacking libtxc-dxtn-s2tc:amd64 (1.0+git20151227-2) ...
Setting up libxcb-present0:amd64 (1.12-1) ...
Setting up libxcb-dri2-0:amd64 (1.12-1) ...
Setting up libxcb-dri3-0:amd64 (1.12-1) ...
Setting up libxcb-glx0:amd64 (1.12-1) ...
Setting up libxfixes3:amd64 (1:5.0.3-1) ...
Setting up libglib2.0-0:amd64 (2.50.3-2) ...
No schema files found: doing nothing.
Setting up libxshmfence1:amd64 (1.2-1+b2) ...
Setting up libllvm3.9:amd64 (1:3.9.1-9) ...
Setting up libvdpau1:amd64 (1.1.1-6) ...
Setting up libtxc-dxtn-s2tc:amd64 (1.0+git20151227-2) ...
update-alternatives: using /usr/lib/x86_64-linux-gnu/s2tc/libtxc_dxtn.so to provide /usr/lib/x86_64-linux-gnu/libtxc_dxtn.so (libtxc-dxtn-x86_64-linux-gnu) in auto mode
Setting up libglapi-mesa:amd64 (13.0.6-1+b2) ...
Setting up sgml-base (1.29) ...
Setting up libicu57:amd64 (57.1-6+deb9u2) ...
Setting up libxml2:amd64 (2.9.4+dfsg1-2.2+deb9u2) ...
Setting up libopus0:amd64 (1.2~alpha2-1) ...
Setting up libva1:amd64 (1.7.3-2) ...
Setting up libdrm2:amd64 (2.4.74-1) ...
Setting up libxcb-sync1:amd64 (1.12-1) ...
Setting up libogg0:amd64 (1.3.2-1) ...
Setting up pkg-config (0.29-4+b1) ...
Setting up libx11-xcb1:amd64 (2:1.6.4-3) ...
Setting up libglib2.0-data (2.50.3-2) ...
Processing triggers for libc-bin (2.24-11+deb9u3) ...
Setting up libpciaccess0:amd64 (0.13.4-1+b2) ...
Setting up libopus-dev:amd64 (1.2~alpha2-1) ...
Setting up libsensors4:amd64 (1:3.4.0-4) ...
Setting up shared-mime-info (1.8-1+deb9u1) ...
Setting up libva-drm1:amd64 (1.7.3-2) ...
Setting up libdrm-radeon1:amd64 (2.4.74-1) ...
Setting up xml-core (0.17) ...
Setting up libxxf86vm1:amd64 (1:1.1.4-1+b2) ...
Setting up libdrm-nouveau2:amd64 (2.4.74-1) ...
Setting up libogg-dev:amd64 (1.3.2-1) ...
Setting up xdg-user-dirs (0.15-2+b1) ...
Setting up libva-x11-1:amd64 (1.7.3-2) ...
Setting up libxdamage1:amd64 (1:1.1.4-2+b3) ...
Setting up libavutil55:amd64 (7:3.2.12-1~deb9u1) ...
Setting up libdrm-amdgpu1:amd64 (2.4.74-1) ...
Setting up mesa-vdpau-drivers:amd64 (13.0.6-1+b2) ...
Setting up libdrm-intel1:amd64 (2.4.74-1) ...
Setting up libgl1-mesa-glx:amd64 (13.0.6-1+b2) ...
Setting up mesa-va-drivers:amd64 (13.0.6-1+b2) ...
Setting up libavutil-dev:amd64 (7:3.2.12-1~deb9u1) ...
Setting up libvdpau-va-gl1:amd64 (0.4.2-1) ...
Setting up libgl1-mesa-dri:amd64 (13.0.6-1+b2) ...
Setting up i965-va-driver:amd64 (1.7.3-1) ...
Setting up va-driver-all:amd64 (1.7.3-2) ...
Setting up vdpau-driver-all:amd64 (1.1.1-6) ...
Processing triggers for libc-bin (2.24-11+deb9u3) ...
Processing triggers for sgml-base (1.29) ...
# OS packages installation successful
# Now letting OPAM install the packages
The following actions will be performed:
  - install ogg  0.5.2 [required by opus]
  - install opus 0.1.0
===== 2 to install =====

<><> Gathering sources ><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
[ogg.0.5.2] found in cache
[opus.0.1.0] found in cache

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
-> installed ogg.0.5.2
[ERROR] The compilation of opus failed at "/usr/bin/make".

#=== ERROR while compiling opus.0.1.0 =========================================#
# context              2.0.0 | linux/x86_64 | ocaml-base-compiler.4.06.1 | git+file:///home/opam/opam-repository
# path                 ~/.opam/4.06/.opam-switch/build/opus.0.1.0
# command              /usr/bin/make
# exit-code            2
# env-file             ~/.opam/log/opus-11-865888.env
# output-file          ~/.opam/log/opus-11-865888.out
### output ###
# /usr/bin/make -C src
# make[1]: Entering directory '/home/opam/.opam/4.06/.opam-switch/build/opus.0.1.0/src'
# make[2]: Entering directory '/home/opam/.opam/4.06/.opam-switch/build/opus.0.1.0/src'
# ocamldep.opt -I /home/opam/.opam/4.06/lib/ogg ogg_demuxer_opus_decoder.mli > ._bcdi/ogg_demuxer_opus_decoder.di
# ocamldep.opt -I /home/opam/.opam/4.06/lib/ogg opus.mli > ._bcdi/opus.di
# ocamldep.opt -I /home/opam/.opam/4.06/lib/ogg ogg_demuxer_opus_decoder.ml > ._d/ogg_demuxer_opus_decoder.d
# ocamldep.opt -I /home/opam/.opam/4.06/lib/ogg opus.ml > ._d/opus.d
# ocamlc.opt -c -cc "gcc" -ccopt "-fPIC -Wall -g -O2 -I/home/opam/.opam/4.06/include -I/usr/include/opus -I.. \
# 			-DPIC -fPIC -I/home/opam/.opam/4.06/include -I/usr/include/opus  \
# 			  -I/home/opam/.opam/4.06/lib/ogg  -o opus_stubs.o " opus_stubs.c
# ar rcs libopus_stubs.a  opus_stubs.o
# ocamlc.opt -c -dtypes -I /home/opam/.opam/4.06/lib/ogg opus.mli
# File "opus.mli", line 56, characters 46-58:
# Error: Unbound type constructor Ogg.Stream.t
# OCamlMakefile:1048: recipe for target 'opus.cmi' failed
# make[2]: *** [opus.cmi] Error 2
# make[2]: Leaving directory '/home/opam/.opam/4.06/.opam-switch/build/opus.0.1.0/src'
# OCamlMakefile:784: recipe for target 'byte-code-library' failed
# make[1]: *** [byte-code-library] Error 2
# make[1]: Leaving directory '/home/opam/.opam/4.06/.opam-switch/build/opus.0.1.0/src'
# Makefile:12: recipe for target 'all' failed
# make: *** [all] Error 2



<><> Error report <><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
+- The following actions failed
| - build opus 0.1.0
+- 
+- The following changes have been performed
| - install ogg 0.5.2
+- 

The packages you requested declare the following system dependencies. Please make sure they are installed before retrying:
    libavutil-dev libopus-dev

# Run eval $(opam env) to update the current shell environment

The former state can be restored with:
    opam switch import "/home/opam/.opam/4.06/.opam-switch/backup/state-20180902003112.export"
31 1535848256 1535848280