$ opam depext -iy -j 2 fftw3.0.7.2
# Detecting depexts using vars: arch=x86_64, os=linux, os-distribution=debian, os-family=debian
# The following system packages are needed:
libfftw3-dev
m4
The following command needs to be run through "sudo":
    apt-get install -qq -yy libfftw3-dev m4
debconf: delaying package configuration, since apt-utils is not installed
Selecting previously unselected package libfftw3-double3:amd64.
(Reading database ... (Reading database ... 5%(Reading database ... 10%(Reading database ... 15%(Reading database ... 20%(Reading database ... 25%(Reading database ... 30%(Reading database ... 35%(Reading database ... 40%(Reading database ... 45%(Reading database ... 50%(Reading database ... 55%(Reading database ... 60%(Reading database ... 65%(Reading database ... 70%(Reading database ... 75%(Reading database ... 80%(Reading database ... 85%(Reading database ... 90%(Reading database ... 95%(Reading database ... 100%(Reading database ... 17681 files and directories currently installed.)
Preparing to unpack .../0-libfftw3-double3_3.3.5-3_amd64.deb ...
Unpacking libfftw3-double3:amd64 (3.3.5-3) ...
Selecting previously unselected package libfftw3-long3:amd64.
Preparing to unpack .../1-libfftw3-long3_3.3.5-3_amd64.deb ...
Unpacking libfftw3-long3:amd64 (3.3.5-3) ...
Selecting previously unselected package libfftw3-quad3:amd64.
Preparing to unpack .../2-libfftw3-quad3_3.3.5-3_amd64.deb ...
Unpacking libfftw3-quad3:amd64 (3.3.5-3) ...
Selecting previously unselected package libfftw3-single3:amd64.
Preparing to unpack .../3-libfftw3-single3_3.3.5-3_amd64.deb ...
Unpacking libfftw3-single3:amd64 (3.3.5-3) ...
Selecting previously unselected package libfftw3-bin.
Preparing to unpack .../4-libfftw3-bin_3.3.5-3_amd64.deb ...
Unpacking libfftw3-bin (3.3.5-3) ...
Selecting previously unselected package libfftw3-dev:amd64.
Preparing to unpack .../5-libfftw3-dev_3.3.5-3_amd64.deb ...
Unpacking libfftw3-dev:amd64 (3.3.5-3) ...
Setting up libfftw3-double3:amd64 (3.3.5-3) ...
Setting up libfftw3-quad3:amd64 (3.3.5-3) ...
Processing triggers for libc-bin (2.24-11+deb9u3) ...
Setting up libfftw3-single3:amd64 (3.3.5-3) ...
Setting up libfftw3-long3:amd64 (3.3.5-3) ...
Setting up libfftw3-bin (3.3.5-3) ...
Setting up libfftw3-dev:amd64 (3.3.5-3) ...
Processing triggers for libc-bin (2.24-11+deb9u3) ...
# OS packages installation successful
# Now letting OPAM install the packages
The following actions will be performed:
  - install fftw3 0.7.2

<><> Gathering sources ><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
[fftw3.0.7.2] found in cache

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
[ERROR] The compilation of fftw3 failed at "/usr/bin/make".

#=== ERROR while compiling fftw3.0.7.2 ========================================#
# context              2.0.0 | linux/x86_64 | ocaml-base-compiler.4.07.0 | git+file:///home/opam/opam-repository
# path                 ~/.opam/4.07/.opam-switch/build/fftw3.0.7.2
# command              /usr/bin/make
# exit-code            2
# env-file             ~/.opam/log/fftw3-11-1872ec.env
# output-file          ~/.opam/log/fftw3-11-1872ec.out
### output ###
# /usr/bin/make -C src all
# make[1]: Entering directory '/home/opam/.opam/4.07/.opam-switch/build/fftw3.0.7.2/src'
# make[2]: Entering directory '/home/opam/.opam/4.07/.opam-switch/build/fftw3.0.7.2/src'
# /home/opam/.opam/4.07/bin/ocamldep fftw3.mli > ._bcdi/fftw3.di
# /home/opam/.opam/4.07/bin/ocamldep fftw3.ml > ._d/fftw3.d
# /home/opam/.opam/4.07/bin/ocamldep fftw3S.ml > ._d/fftw3S.d
# /home/opam/.opam/4.07/bin/ocamldep fftw3D.ml > ._d/fftw3D.d
# /home/opam/.opam/4.07/bin/ocamldep fftw3_geomF.ml > ._d/fftw3_geomF.d
# /home/opam/.opam/4.07/bin/ocamldep fftw3_geomC.ml > ._d/fftw3_geomC.d
# /home/opam/.opam/4.07/bin/ocamldep fftw3_utils.ml > ._d/fftw3_utils.d
# /home/opam/.opam/4.07/bin/ocamlc.opt -c -cc "cc" -ccopt "-fPIC -g -O2 -DFFTW3F_EXISTS -DHASH_EXISTS \
# 			-DPIC   \
# 			    -o fftw3_stubs.o " fftw3_stubs.c
# In file included from fftw3_stubs.c:70:0:
# bigarray_stubs.c:19:16: error: static declaration of 'caml_ba_num_elts' follows non-static declaration
#  static uintnat caml_ba_num_elts(struct caml_ba_array * b)
#                 ^~~~~~~~~~~~~~~~
# In file included from fftw3_stubs.c:32:0:
# /home/opam/.opam/4.07/lib/ocaml/caml/bigarray.h:117:20: note: previous declaration of 'caml_ba_num_elts' was here
#  CAMLextern uintnat caml_ba_num_elts(struct caml_ba_array * b);
#                     ^~~~~~~~~~~~~~~~
# ../OCamlMakefile:1124: recipe for target 'fftw3_stubs.o' failed
# make[2]: *** [fftw3_stubs.o] Error 2
# make[2]: Leaving directory '/home/opam/.opam/4.07/.opam-switch/build/fftw3.0.7.2/src'
# ../OCamlMakefile:784: recipe for target 'byte-code-library' failed
# make[1]: *** [byte-code-library] Error 2
# make[1]: Leaving directory '/home/opam/.opam/4.07/.opam-switch/build/fftw3.0.7.2/src'
# Makefile:19: recipe for target 'all' failed
# make: *** [all] Error 2



<><> Error report <><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
+- The following actions failed
| - build fftw3 0.7.2
+- 
- No changes have been performed

The packages you requested declare the following system dependencies. Please make sure they are installed before retrying:
    libfftw3-dev

# Run eval $(opam env) to update the current shell environment
31 1535669346 1535669358