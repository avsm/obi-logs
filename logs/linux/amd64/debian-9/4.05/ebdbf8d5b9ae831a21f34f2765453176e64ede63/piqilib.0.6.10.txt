$ opam depext -iy -j 2 piqilib.0.6.10
# Detecting depexts using vars: arch=x86_64, os=linux, os-distribution=debian, os-family=debian
# The following system packages are needed:
m4
# All required OS packages found.
# Now letting OPAM install the packages
The following actions will be performed:
  - install result      1.3    [required by topkg]
  - install base-bytes  base   [required by base64, ulex]
  - install ocamlbuild  0.12.0 [required by ulex, base64, optcomp, xmlm]
  - install easy-format 1.3.1  [required by piqilib]
  - install topkg       0.9.1  [required by xmlm]
  - install camlp4      4.05+1 [required by optcomp, ulex]
  - install base64      1.1.0  [required by piqilib]
  - install xmlm        1.3.0  [required by piqilib]
  - install ulex        1.2    [required by piqilib]
  - install optcomp     1.6    [required by piqilib]
  - install piqilib     0.6.10
===== 11 to install =====

<><> Gathering sources ><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
[base64.1.1.0] found in cache
[camlp4.4.05+1] found in cache
[easy-format.1.3.1] found in cache
[ocamlbuild.0.12.0] found in cache
[optcomp.1.6] found in cache
[piqilib.0.6.10] found in cache
[result.1.3] found in cache
[topkg.0.9.1] found in cache
[ulex.1.2] found in cache
[xmlm.1.3.0] found in cache

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
-> installed base-bytes.base
-> installed easy-format.1.3.1
-> installed result.1.3
-> installed ocamlbuild.0.12.0
-> installed base64.1.1.0
-> installed topkg.0.9.1
-> installed xmlm.1.3.0
-> installed camlp4.4.05+1
-> installed ulex.1.2
-> installed optcomp.1.6
[ERROR] The compilation of piqilib failed at "/usr/bin/make".

#=== ERROR while compiling piqilib.0.6.10 =====================================#
# context              2.0.0 | linux/x86_64 | ocaml-base-compiler.4.05.0 | git+file:///home/opam/opam-repository
# path                 ~/.opam/4.05/.opam-switch/build/piqilib.0.6.10
# command              /usr/bin/make
# exit-code            2
# env-file             ~/.opam/log/piqilib-11-008a77.env
# output-file          ~/.opam/log/piqilib-11-008a77.out
### output ###
# set -e; \
# for dir in piqilib src; do \
# 	/usr/bin/make -C $dir ; \
# done
# make[1]: Entering directory '/home/opam/.opam/4.05/.opam-switch/build/piqilib.0.6.10/piqilib'
# echo "let version = \"`head -1 ../VERSION`\"" >piqi_version.ml
# echo "version = \"`head -1 ../VERSION`\"" >META
# cat META.in >>META
# ocamllex  piqi_json_parser.mll
# 91 states, 1087 transitions, table size 4894 bytes
# make[2]: Entering directory '/home/opam/.opam/4.05/.opam-switch/build/piqilib.0.6.10/piqilib'
# ocamlfind ocamldep -native piqi_xml_type.mli > ._ncdi/piqi_xml_type.di
# ocamlfind ocamldep -native piqi_json_type.mli > ._ncdi/piqi_json_type.di
# ocamlfind ocamldep -native piqi_c.mli > ._ncdi/piqi_c.di
# ocamlfind ocamldep piqi_json_parser.ml > ._d/piqi_json_parser.d
# ocamlfind ocamldep piqi_getopt.ml > ._d/piqi_getopt.d
# ocamlfind ocamldep piqi_light.ml > ._d/piqi_light.d
# ocamlfind ocamldep piqi_compile.ml > ._d/piqi_compile.d
# ocamlfind ocamldep piqi_convert.ml > ._d/piqi_convert.d
# ocamlfind ocamldep piqobj_of_xml.ml > ._d/piqobj_of_xml.d
# ocamlfind ocamldep piqobj_to_xml.ml > ._d/piqobj_to_xml.d
# ocamlfind ocamldep piqi_xml.ml > ._d/piqi_xml.d
# ocamlfind ocamldep piqobj_of_json.ml > ._d/piqobj_of_json.d
# ocamlfind ocamldep piqobj_to_json.ml > ._d/piqobj_to_json.d
# ocamlfind ocamldep piqi_base64.ml > ._d/piqi_base64.d
# ocamlfind ocamldep piqi_json.ml > ._d/piqi_json.d
# ocamlfind ocamldep piqi_json_gen.ml > ._d/piqi_json_gen.d
# ocamlfind ocamldep piqi_pp.ml > ._d/piqi_pp.d
# ocamlfind ocamldep piqi.ml > ._d/piqi.d
# ocamlfind ocamldep piq.ml > ._d/piq.d
# ocamlfind ocamldep piqobj_of_piq.ml > ._d/piqobj_of_piq.d
# ocamlfind ocamldep piqobj_to_piq.ml > ._d/piqobj_to_piq.d
# ocamlfind ocamldep piqobj_of_protobuf.ml > ._d/piqobj_of_protobuf.d
# ocamlfind ocamldep piqobj_to_protobuf.ml > ._d/piqobj_to_protobuf.d
# ocamlfind ocamldep piqobj_common.ml > ._d/piqobj_common.d
# ocamlfind ocamldep piqobj.ml > ._d/piqobj.d
# ocamlfind ocamldep piqi_objstore.ml > ._d/piqi_objstore.d
# ocamlfind ocamldep piq_gen.ml > ._d/piq_gen.d
# ocamlfind ocamldep piq_parser.ml > ._d/piq_parser.d
# ocamlfind ocamldep -pp "camlp4o -I /home/opam/.opam/4.05/lib/ulex pa_ulex.cma " piq_lexer.ml > ._d/piq_lexer.d
# ocamlfind ocamldep piqi_db.ml > ._d/piqi_db.d
# ocamlfind ocamldep piqi_protobuf.ml > ._d/piqi_protobuf.d
# ocamlfind ocamldep piqi_command.ml > ._d/piqi_command.d
# ocamlfind ocamldep piqi_file.ml > ._d/piqi_file.d
# ocamlfind ocamldep -pp "camlp4o -I /home/opam/.opam/4.05/lib/optcomp optcomp.cma " piqi_common.ml > ._d/piqi_common.d
# ocamlfind ocamldep piqi_name.ml > ._d/piqi_name.d
# ocamlfind ocamldep piqi_iolist.ml > ._d/piqi_iolist.d
# ocamlfind ocamldep piqi_config.ml > ._d/piqi_config.d
# ocamlfind ocamldep piqi_c.ml > ._d/piqi_c.d
# ocamlfind ocamldep piqi_boot.ml > ._d/piqi_boot.d
# ocamlfind ocamldep piqi_impl_piqi.ml > ._d/piqi_impl_piqi.d
# ocamlfind ocamldep piq_ast.ml > ._d/piq_ast.d
# ocamlfind ocamldep piqi_util.ml > ._d/piqi_util.d
# ocamlfind ocamldep piqloc.ml > ._d/piqloc.d
# ocamlfind ocamldep piqi_piqi.ml > ._d/piqi_piqi.d
# ocamlfind ocamldep piqi_piqirun.ml > ._d/piqi_piqirun.d
# ocamlfind ocamldep piqi_version.ml > ._d/piqi_version.d
# ocamlfind ocamlc -c -ccopt "-fPIC  \
# 			-DPIC -DNATIVE_CODE   \
# 			    -o piqi_c_impl.o " piqi_c_impl.c
# piqi_c_impl.c: In function 'camlidl_piqi_c_piqi_strtoull':
# piqi_c_impl.c:81:3: error: unknown type name 'int64'
#    int64 _res;
#    ^~~~~
# /home/opam/.opam/4.05/.opam-switch/build/piqilib.0.6.10/make/OCamlMakefile:1123: recipe for target 'piqi_c_impl.o' failed
# make[2]: *** [piqi_c_impl.o] Error 2
# make[2]: Leaving directory '/home/opam/.opam/4.05/.opam-switch/build/piqilib.0.6.10/piqilib'
# /home/opam/.opam/4.05/.opam-switch/build/piqilib.0.6.10/make/OCamlMakefile:798: recipe for target 'native-code-library' failed
# make[1]: *** [native-code-library] Error 2
# make[1]: Leaving directory '/home/opam/.opam/4.05/.opam-switch/build/piqilib.0.6.10/piqilib'
# /home/opam/.opam/4.05/.opam-switch/build/piqilib.0.6.10/make/Makefile.dirs:7: recipe for target 'dirs' failed
# make: *** [dirs] Error 2



<><> Error report <><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
+- The following actions failed
| - build piqilib 0.6.10
+- 
+- The following changes have been performed
| - install base-bytes  base
| - install base64      1.1.0
| - install camlp4      4.05+1
| - install easy-format 1.3.1
| - install ocamlbuild  0.12.0
| - install optcomp     1.6
| - install result      1.3
| - install topkg       0.9.1
| - install ulex        1.2
| - install xmlm        1.3.0
+- 
# Run eval $(opam env) to update the current shell environment

The former state can be restored with:
    opam switch import "/home/opam/.opam/4.05/.opam-switch/backup/state-20180807042852.export"
31 1533616130 1533616232