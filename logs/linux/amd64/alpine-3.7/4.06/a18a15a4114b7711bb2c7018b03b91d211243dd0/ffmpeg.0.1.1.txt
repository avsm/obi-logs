$ opam depext -iy -j 2 ffmpeg.0.1.1
# Detecting depexts using vars: arch=x86_64, os=linux, os-distribution=alpine, os-family=alpine
# The following system packages are needed:
ffmpeg-dev
m4
m4
# The following new OS packages need to be installed: ffmpeg-dev
The following command needs to be run through "sudo":
    apk add ffmpeg-dev
fetch http://dl-cdn.alpinelinux.org/alpine/v3.7/main/x86_64/APKINDEX.tar.gz
fetch http://dl-cdn.alpinelinux.org/alpine/v3.7/community/x86_64/APKINDEX.tar.gz
(1/34) Installing sdl2 (2.0.7-r3)
(2/34) Installing alsa-lib (1.1.4.1-r2)
(3/34) Installing libbz2 (1.0.6-r6)
(4/34) Installing nettle (3.3-r0)
(5/34) Installing libffi (3.2.1-r4)
(6/34) Installing libtasn1 (4.12-r3)
(7/34) Installing p11-kit (0.23.2-r2)
(8/34) Installing libunistring (0.9.7-r0)
(9/34) Installing gnutls (3.6.1-r0)
(10/34) Installing lame (3.100-r0)
(11/34) Installing opus (1.2.1-r1)
(12/34) Installing librtmp (2.4_git20160909-r3)
(13/34) Installing libogg (1.3.3-r1)
(14/34) Installing libtheora (1.1.1-r13)
(15/34) Installing libjpeg-turbo (1.5.2-r0)
(16/34) Installing v4l-utils-libs (1.12.5-r1)
(17/34) Installing libxdamage (1.1.4-r1)
(18/34) Installing libxext (1.3.3-r2)
(19/34) Installing libxfixes (5.0.3-r1)
(20/34) Installing libxxf86vm (1.1.4-r1)
(21/34) Installing libpciaccess (0.13.5-r1)
(22/34) Installing libdrm (2.4.88-r0)
(23/34) Installing mesa-glapi (17.2.4-r1)
(24/34) Installing libxshmfence (1.2-r2)
(25/34) Installing mesa-gl (17.2.4-r1)
(26/34) Installing libva (1.8.2-r0)
(27/34) Installing libvdpau (1.1.1-r1)
(28/34) Installing libvorbis (1.3.6-r1)
(29/34) Installing libvpx (1.6.1-r0)
(30/34) Installing x264-libs (20170930-r0)
(31/34) Installing x265 (2.5-r0)
(32/34) Installing xvidcore (1.3.4-r0)
(33/34) Installing ffmpeg-libs (3.4-r1)
(34/34) Installing ffmpeg-dev (3.4-r1)
Executing busybox-1.27.2-r11.trigger
OK: 244 MiB in 107 packages
# OS packages installation successful
# Now letting OPAM install the packages
The following actions will be performed:
  - install ffmpeg 0.1.1

<><> Gathering sources ><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
[ffmpeg.0.1.1] found in cache

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
[ERROR] The compilation of ffmpeg failed at "/usr/bin/make".

#=== ERROR while compiling ffmpeg.0.1.1 =======================================#
# context              2.0.0~rc3 | linux/x86_64 | ocaml-base-compiler.4.06.1 | git+file:///home/opam/opam-repository
# path                 ~/.opam/4.06/.opam-switch/build/ffmpeg.0.1.1
# command              /usr/bin/make
# exit-code            2
# env-file             ~/.opam/log/ffmpeg-13-1872ec.env
# output-file          ~/.opam/log/ffmpeg-13-1872ec.out
### output ###
# /usr/bin/make -C src all
# make[1]: Entering directory '/home/opam/.opam/4.06/.opam-switch/build/ffmpeg.0.1.1/src'
# make[2]: Entering directory '/home/opam/.opam/4.06/.opam-switch/build/ffmpeg.0.1.1/src'
# ocamldep.opt swscale.ml > ._d/swscale.d
# ocamldep.opt avutil.ml > ._d/avutil.d
# ocamlc.opt -c -cc "gcc" -ccopt "-fPIC -g -O2 -I/home/opam/.opam/4.06/include   -Wall -DCAML_NAME_SPACE \
# 			-DPIC -fPIC -I/home/opam/.opam/4.06/include    \
# 			    -o avutil_stubs.o " avutil_stubs.c
# avutil_stubs.c:13:31: error: array type has incomplete element type 'enum PixelFormat'
#  static const enum PixelFormat PIXEL_FORMATS[] = {
#                                ^~~~~~~~~~~~~
# avutil_stubs.c:14:3: error: 'PIX_FMT_YUV420P' undeclared here (not in a function)
#    PIX_FMT_YUV420P,
#    ^~~~~~~~~~~~~~~
# avutil_stubs.c:15:3: error: 'PIX_FMT_YUYV422' undeclared here (not in a function)
#    PIX_FMT_YUYV422,
#    ^~~~~~~~~~~~~~~
# avutil_stubs.c:16:3: error: 'PIX_FMT_RGB24' undeclared here (not in a function)
#    PIX_FMT_RGB24,
#    ^~~~~~~~~~~~~
# avutil_stubs.c:17:3: error: 'PIX_FMT_BGR24' undeclared here (not in a function)
#    PIX_FMT_BGR24,
#    ^~~~~~~~~~~~~
# avutil_stubs.c:18:3: error: 'PIX_FMT_YUV422P' undeclared here (not in a function)
#    PIX_FMT_YUV422P,
#    ^~~~~~~~~~~~~~~
# avutil_stubs.c:19:3: error: 'PIX_FMT_YUV444P' undeclared here (not in a function)
#    PIX_FMT_YUV444P,
#    ^~~~~~~~~~~~~~~
# avutil_stubs.c:20:3: error: 'PIX_FMT_YUV410P' undeclared here (not in a function)
#    PIX_FMT_YUV410P,
#    ^~~~~~~~~~~~~~~
# avutil_stubs.c:21:3: error: 'PIX_FMT_YUV411P' undeclared here (not in a function)
#    PIX_FMT_YUV411P,
#    ^~~~~~~~~~~~~~~
# avutil_stubs.c:22:3: error: 'PIX_FMT_YUVJ422P' undeclared here (not in a function)
#    PIX_FMT_YUVJ422P,
#    ^~~~~~~~~~~~~~~~
# avutil_stubs.c:23:3: error: 'PIX_FMT_YUVJ444P' undeclared here (not in a function)
#    PIX_FMT_YUVJ444P,
#    ^~~~~~~~~~~~~~~~
# avutil_stubs.c:24:3: error: 'PIX_FMT_RGBA' undeclared here (not in a function)
#    PIX_FMT_RGBA,
#    ^~~~~~~~~~~~
# avutil_stubs.c:25:3: error: 'PIX_FMT_BGRA' undeclared here (not in a function)
#    PIX_FMT_BGRA
#    ^~~~~~~~~~~~
# avutil_stubs.c: In function 'caml_avutil_bits_per_pixel':
# avutil_stubs.c:39:32: error: 'av_pix_fmt_descriptors' undeclared (first use in this function)
#    ans = av_get_bits_per_pixel(&av_pix_fmt_descriptors[p]);
#                                 ^~~~~~~~~~~~~~~~~~~~~~
# avutil_stubs.c:39:32: note: each undeclared identifier is reported only once for each function it appears in
# avutil_stubs.c:36:7: warning: variable 'p' set but not used [-Wunused-but-set-variable]
#    int p = Int_val(pixel);
#        ^
# avutil_stubs.c: In function 'PixelFormat_val':
# avutil_stubs.c:31:1: warning: control reaches end of non-void function [-Wreturn-type]
#  }
#  ^
# At top level:
# avutil_stubs.c:13:31: warning: 'PIXEL_FORMATS' defined but not used [-Wunused-variable]
#  static const enum PixelFormat PIXEL_FORMATS[] = {
#                                ^~~~~~~~~~~~~
# make[2]: *** [OCamlMakefile:1124: avutil_stubs.o] Error 2
# make[2]: Leaving directory '/home/opam/.opam/4.06/.opam-switch/build/ffmpeg.0.1.1/src'
# make[1]: *** [OCamlMakefile:784: byte-code-library] Error 2
# make[1]: Leaving directory '/home/opam/.opam/4.06/.opam-switch/build/ffmpeg.0.1.1/src'
# make: *** [Makefile:9: all] Error 2



<><> Error report <><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
+- The following actions failed
| - build ffmpeg 0.1.1
+- 
- No changes have been performed

The packages you requested declare the following system dependencies. Please make sure they are installed before retrying:
    ffmpeg-dev

# Run eval $(opam env) to update the current shell environment
31 1533266626 1533266634