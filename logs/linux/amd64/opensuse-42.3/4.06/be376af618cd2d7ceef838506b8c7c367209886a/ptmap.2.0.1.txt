$ opam depext -iy -j 2 ptmap.2.0.1
# Detecting depexts using vars: arch=x86_64, os=linux, os-distribution=opensuse, os-family=suse
# The following system packages are needed:
m4
# All required OS packages found.
# Now letting OPAM install the packages
The following actions will be performed:
  - install base-bytes base   [required by qtest]
  - install ocamlbuild 0.12.0 [required by ounit]
  - install obuild     0.1.10 [required by ptmap]
  - install ounit      2.0.8  [required by qtest]
  - install qcheck     0.8    [required by qtest]
  - install qtest      2.9    [required by ptmap]
  - install ptmap      2.0.1
===== 7 to install =====

<><> Gathering sources ><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
[obuild.0.1.10] found in cache
[ocamlbuild.0.12.0] found in cache
[ounit.2.0.8] found in cache
[ptmap.2.0.1] found in cache
[qcheck.0.8] found in cache
[qtest.2.9] found in cache

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
-> installed base-bytes.base
-> installed ocamlbuild.0.12.0
-> installed obuild.0.1.10
-> installed ounit.2.0.8
-> installed qcheck.0.8
-> installed qtest.2.9
[ERROR] The compilation of ptmap failed at "/home/opam/.opam/4.06/bin/obuild build lib-ptmap".

#=== ERROR while compiling ptmap.2.0.1 ========================================#
# context              2.0.0~rc3 | linux/x86_64 | ocaml-base-compiler.4.06.1 | git+file:///home/opam/opam-repository
# path                 ~/.opam/4.06/.opam-switch/build/ptmap.2.0.1
# command              ~/.opam/4.06/bin/obuild build lib-ptmap
# exit-code            6
# env-file             ~/.opam/log/ptmap-12-703493.env
# output-file          ~/.opam/log/ptmap-12-703493.out
### output ###
# [1 of 4] Intfing Ptmap                         
# [2 of 4] Compiling Ptmap                         
# 
# File "ptmap.ml", line 1:
# Error: The implementation ptmap.ml
#        does not match the interface dist/build/lib-ptmap/ptmap.cmi:
#        The value `find_last_opt' is required but not provided
#        File "map.mli", line 291, characters 4-65: Expected declaration
#        The value `find_last' is required but not provided
#        File "map.mli", line 284, characters 4-52: Expected declaration
#        The value `find_first_opt' is required but not provided
#        File "map.mli", line 277, characters 4-66: Expected declaration
#        The value `find_first' is required but not provided
#        File "map.mli", line 264, characters 4-53: Expected declaration
#        The value `choose_opt' is required but not provided
#        File "map.mli", line 236, characters 4-45: Expected declaration
#        The value `max_binding_opt' is required but not provided
#        File "map.mli", line 223, characters 4-50: Expected declaration
#        The value `min_binding_opt' is required but not provided
#        File "map.mli", line 210, characters 4-50: Expected declaration
#        The value `update' is required but not provided
#        File "map.mli", line 89, characters 4-63: Expected declaration
# 



<><> Error report <><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
+- The following actions failed
| - build ptmap 2.0.1
+- 
+- The following changes have been performed
| - install base-bytes base
| - install obuild     0.1.10
| - install ocamlbuild 0.12.0
| - install ounit      2.0.8
| - install qcheck     0.8
| - install qtest      2.9
+- 
# Run eval $(opam env) to update the current shell environment

The former state can be restored with:
    opam switch import "/home/opam/.opam/4.06/.opam-switch/backup/state-20180722152940.export"
31 1532273363 1532273407