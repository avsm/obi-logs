$ opam depext -iy -j 2 ivy.1.2.2
# Detecting depexts using vars: arch=x86_64, os=linux, os-distribution=alpine, os-family=alpine
# The following system packages are needed:
glib-dev
m4
pcre-dev
pkgconfig
m4
pkgconf
# The following new OS packages need to be installed: glib-dev pcre-dev
The following command needs to be run through "sudo":
    apk add glib-dev pcre-dev
fetch http://dl-cdn.alpinelinux.org/alpine/v3.7/main/x86_64/APKINDEX.tar.gz
fetch http://dl-cdn.alpinelinux.org/alpine/v3.7/community/x86_64/APKINDEX.tar.gz
(1/29) Installing libbz2 (1.0.6-r6)
(2/29) Installing perl (5.26.2-r1)
(3/29) Installing libffi (3.2.1-r4)
(4/29) Installing gdbm (1.13-r1)
(5/29) Installing sqlite-libs (3.21.0-r1)
(6/29) Installing python2 (2.7.14-r2)
(7/29) Installing gettext-asprintf (0.19.8.1-r1)
(8/29) Installing libintl (0.19.8.1-r1)
(9/29) Installing libunistring (0.9.7-r0)
(10/29) Installing gettext-libs (0.19.8.1-r1)
(11/29) Installing libxml2 (2.9.7-r0)
(12/29) Installing gettext (0.19.8.1-r1)
(13/29) Installing gettext-dev (0.19.8.1-r1)
(14/29) Installing zlib-dev (1.2.11-r1)
(15/29) Installing bzip2-dev (1.0.6-r6)
(16/29) Installing libffi-dev (3.2.1-r4)
(17/29) Installing libuuid (2.31-r0)
(18/29) Installing libblkid (2.31-r0)
(19/29) Installing libfdisk (2.31-r0)
(20/29) Installing libmount (2.31-r0)
(21/29) Installing libsmartcols (2.31-r0)
(22/29) Installing util-linux-dev (2.31-r0)
(23/29) Installing pcre (8.41-r1)
(24/29) Installing glib (2.54.2-r0)
(25/29) Installing libpcre16 (8.41-r1)
(26/29) Installing libpcre32 (8.41-r1)
(27/29) Installing libpcrecpp (8.41-r1)
(28/29) Installing pcre-dev (8.41-r1)
(29/29) Installing glib-dev (2.54.2-r0)
Executing busybox-1.27.2-r11.trigger
Executing glib-2.54.2-r0.trigger
No schema files found: doing nothing.
OK: 300 MiB in 102 packages
# OS packages installation successful
# Now letting OPAM install the packages
The following actions will be performed:
  - install conf-glib-2     1     [required by ivy]
  - install conf-pkg-config 1.1   [required by conf-libpcre, conf-tcl]
  - install conf-tcl        1     [required by ivy]
  - install conf-libpcre    1     [required by ivy]
  - install ivy             1.2.2
===== 5 to install =====

<><> Gathering sources ><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
[ivy.1.2.2] downloaded from http://www.eei.cena.fr/products/ivy/download/packages/ivy-ocaml_1.2-2.tar.gz

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
-> installed conf-glib-2.1
-> installed conf-pkg-config.1.1
-> installed conf-libpcre.1
[ERROR] The compilation of conf-tcl failed at "/bin/sh check.sh".

#=== ERROR while compiling conf-tcl.1 =========================================#
# context              2.0.0 | linux/x86_64 | ocaml-base-compiler.4.06.1 | git+file:///home/opam/opam-repository
# path                 ~/.opam/4.06/.opam-switch/build/conf-tcl.1
# command              /bin/sh check.sh
# exit-code            1
# env-file             ~/.opam/log/conf-tcl-13-335865.env
# output-file          ~/.opam/log/conf-tcl-13-335865.out
### output ###
# compiletest.c:2:17: fatal error: tcl.h: No such file or directory
#  #include <tcl.h>
#                  ^
# compilation terminated.



<><> Error report <><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
+- The following actions failed
| - build conf-tcl 1
+- 
+- The following changes have been performed (the rest was aborted)
| - install conf-glib-2     1
| - install conf-libpcre    1
| - install conf-pkg-config 1.1
+- 
# Run eval $(opam env) to update the current shell environment

The former state can be restored with:
    opam switch import "/home/opam/.opam/4.06/.opam-switch/backup/state-20180806053336.export"
31 1533533611 1533533619