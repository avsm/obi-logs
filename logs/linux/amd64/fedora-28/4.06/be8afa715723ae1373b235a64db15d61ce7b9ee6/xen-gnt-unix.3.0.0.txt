$ opam depext -iy -j 2 xen-gnt-unix.3.0.0
# Detecting depexts using vars: arch=x86_64, os=linux, os-distribution=fedora, os-family=fedora
# The following system packages are needed:
m4
xen-devel
Name        : m4
Version     : 1.4.18
Release     : 6.fc28
Architecture: x86_64
Install Date: Mon Jul 23 20:13:48 2018
Group       : Applications/Text
Size        : 372272
License     : GPLv3+
Signature   : RSA/SHA256, Sun Feb 25 11:01:47 2018, Key ID e08e7e629db62fb1
Source RPM  : m4-1.4.18-6.fc28.src.rpm
Build Date  : Sun Feb 25 10:58:14 2018
Build Host  : buildvm-25.phx2.fedoraproject.org
Relocations : (not relocatable)
Packager    : Fedora Project
Vendor      : Fedora Project
URL         : http://www.gnu.org/software/m4/
Bug URL     : https://bugz.fedoraproject.org/m4
Summary     : The GNU macro processor
Description :
A GNU implementation of the traditional UNIX macro processor.  M4 is
useful for writing text files which can be logically parsed, and is used
by many programs as part of their build process.  M4 has built-in
functions for including files, running shell commands, doing arithmetic,
etc.  The autoconf program needs m4 for generating configure scripts, but
not for running configure scripts.

Install m4 if you need a macro processor.
package xen-devel is not installed
# The following new OS packages need to be installed: xen-devel
The following command needs to be run through "sudo":
    yum install -y xen-devel
Fedora 28 - x86_64 - Updates                    8.1 MB/s |  20 MB     00:02    
Last metadata expiration check: 0:00:08 ago on Tue Jul 24 02:33:42 2018.
Dependencies resolved.
================================================================================
 Package               Arch          Version               Repository      Size
================================================================================
Installing:
 xen-devel             x86_64        4.10.1-5.fc28         updates        346 k
Installing dependencies:
 e2fsprogs-libs        x86_64        1.44.2-0.fc28         updates        198 k
 libnl3                x86_64        3.4.0-3.fc28          fedora         307 k
 libuuid-devel         x86_64        2.32.1-1.fc28         updates         91 k
 xen-libs              x86_64        4.10.1-5.fc28         updates        639 k
 xen-licenses          x86_64        4.10.1-5.fc28         updates        124 k
 yajl                  x86_64        2.1.0-10.fc28         fedora          39 k

Transaction Summary
================================================================================
Install  7 Packages

Total download size: 1.7 M
Installed size: 4.6 M
Downloading Packages:
[MIRROR] xen-devel-4.10.1-5.fc28.x86_64.rpm: Status code: 404 for http://mirror.ox.ac.uk/sites/download.fedora.redhat.com/pub/fedora/linux/updates/28/Everything/x86_64/Packages/x/xen-devel-4.10.1-5.fc28.x86_64.rpm
[MIRROR] libuuid-devel-2.32.1-1.fc28.x86_64.rpm: Status code: 404 for http://mirror.ox.ac.uk/sites/download.fedora.redhat.com/pub/fedora/linux/updates/28/Everything/x86_64/Packages/l/libuuid-devel-2.32.1-1.fc28.x86_64.rpm
[MIRROR] xen-libs-4.10.1-5.fc28.x86_64.rpm: Status code: 404 for http://mirror.ox.ac.uk/sites/download.fedora.redhat.com/pub/fedora/linux/updates/28/Everything/x86_64/Packages/x/xen-libs-4.10.1-5.fc28.x86_64.rpm
(1/7): libuuid-devel-2.32.1-1.fc28.x86_64.rpm    27 kB/s |  91 kB     00:03    
[MIRROR] e2fsprogs-libs-1.44.2-0.fc28.x86_64.rpm: Status code: 404 for http://mirror.ox.ac.uk/sites/download.fedora.redhat.com/pub/fedora/linux/updates/28/Everything/x86_64/Packages/e/e2fsprogs-libs-1.44.2-0.fc28.x86_64.rpm
(2/7): xen-devel-4.10.1-5.fc28.x86_64.rpm       103 kB/s | 346 kB     00:03    
[MIRROR] libnl3-3.4.0-3.fc28.x86_64.rpm: Status code: 404 for http://mirror.ox.ac.uk/sites/download.fedora.redhat.com/pub/fedora/linux/releases/28/Everything/x86_64/os/Packages/l/libnl3-3.4.0-3.fc28.x86_64.rpm
(3/7): e2fsprogs-libs-1.44.2-0.fc28.x86_64.rpm  3.7 MB/s | 198 kB     00:00    
(4/7): xen-libs-4.10.1-5.fc28.x86_64.rpm        188 kB/s | 639 kB     00:03    
[MIRROR] yajl-2.1.0-10.fc28.x86_64.rpm: Status code: 404 for http://mirror.ox.ac.uk/sites/download.fedora.redhat.com/pub/fedora/linux/releases/28/Everything/x86_64/os/Packages/y/yajl-2.1.0-10.fc28.x86_64.rpm
(5/7): xen-licenses-4.10.1-5.fc28.x86_64.rpm    3.3 MB/s | 124 kB     00:00    
(6/7): yajl-2.1.0-10.fc28.x86_64.rpm            339 kB/s |  39 kB     00:00    
(7/7): libnl3-3.4.0-3.fc28.x86_64.rpm           1.9 MB/s | 307 kB     00:00    
--------------------------------------------------------------------------------
Total                                           353 kB/s | 1.7 MB     00:04     
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
  Preparing        :                                                        1/1 
  Installing       : xen-licenses-4.10.1-5.fc28.x86_64                      1/7 
  Installing       : yajl-2.1.0-10.fc28.x86_64                              2/7 
  Installing       : libnl3-3.4.0-3.fc28.x86_64                             3/7 
  Running scriptlet: libnl3-3.4.0-3.fc28.x86_64                             3/7 
  Installing       : e2fsprogs-libs-1.44.2-0.fc28.x86_64                    4/7 
  Running scriptlet: e2fsprogs-libs-1.44.2-0.fc28.x86_64                    4/7 
  Installing       : xen-libs-4.10.1-5.fc28.x86_64                          5/7 
  Installing       : libuuid-devel-2.32.1-1.fc28.x86_64                     6/7 
  Installing       : xen-devel-4.10.1-5.fc28.x86_64                         7/7 
  Running scriptlet: xen-devel-4.10.1-5.fc28.x86_64                         7/7 
  Verifying        : xen-devel-4.10.1-5.fc28.x86_64                         1/7 
  Verifying        : libuuid-devel-2.32.1-1.fc28.x86_64                     2/7 
  Verifying        : xen-libs-4.10.1-5.fc28.x86_64                          3/7 
  Verifying        : e2fsprogs-libs-1.44.2-0.fc28.x86_64                    4/7 
  Verifying        : libnl3-3.4.0-3.fc28.x86_64                             5/7 
  Verifying        : yajl-2.1.0-10.fc28.x86_64                              6/7 
  Verifying        : xen-licenses-4.10.1-5.fc28.x86_64                      7/7 

Installed:
  xen-devel.x86_64 4.10.1-5.fc28       e2fsprogs-libs.x86_64 1.44.2-0.fc28      
  libnl3.x86_64 3.4.0-3.fc28           libuuid-devel.x86_64 2.32.1-1.fc28       
  xen-libs.x86_64 4.10.1-5.fc28        xen-licenses.x86_64 4.10.1-5.fc28        
  yajl.x86_64 2.1.0-10.fc28           

Complete!
The following command needs to be run through "sudo":
    rpm -q --whatprovides xen-devel
xen-devel-4.10.1-5.fc28.x86_64
# OS packages installation successful
# Now letting OPAM install the packages
The following actions will be performed:
  - install sexplib0                v0.11.0 [required by base, sexplib]
  - install result                  1.3     [required by cmdliner, lwt]
  - install base-bytes              base    [required by io-page]
  - install ocamlbuild              0.12.0  [required by cmdliner]
  - install num                     1.1     [required by sexplib]
  - install parsexp                 v0.11.0 [required by sexplib]
  - install base                    v0.11.1 [required by configurator]
  - install ocaml-migrate-parsetree 1.0.11  [required by ppx_cstruct]
  - install cppo                    1.6.4   [required by lwt]
  - install topkg                   0.9.1   [required by cmdliner]
  - install sexplib                 v0.11.0 [required by cstruct]
  - install stdio                   v0.11.0 [required by configurator]
  - install ppx_tools_versioned     5.2     [required by ppx_cstruct]
  - install ocplib-endian           1.0     [required by mirage-profile]
  - install lwt                     4.1.0   [required by xen-gnt]          For the PPX, please install package lwt_ppx
                                                                           For Lwt_log and Lwt_daemon, please install package lwt_log
  - install cmdliner                1.0.2   [required by xen-gnt]
  - install cstruct                 3.2.1   [required by io-page, xen-gnt]
  - install configurator            v0.11.0 [required by io-page]
  - install ppx_cstruct             3.2.1   [required by mirage-profile]
  - install io-page                 2.0.1   [required by xen-gnt-unix]
  - install mirage-profile          0.8.2   [required by xen-gnt]
  - install xen-gnt                 3.0.1   [required by xen-gnt-unix]
  - install xen-gnt-unix            3.0.0
===== 23 to install =====

<><> Gathering sources ><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
[base.v0.11.1] found in cache
[cmdliner.1.0.2] found in cache
[configurator.v0.11.0] found in cache
[cppo.1.6.4] found in cache
[cstruct.3.2.1] found in cache
[io-page.2.0.1] found in cache
[lwt.4.1.0] found in cache
[mirage-profile.0.8.2] found in cache
[num.1.1] found in cache
[ocaml-migrate-parsetree.1.0.11] found in cache
[ocamlbuild.0.12.0] found in cache
[ocplib-endian.1.0] found in cache
[parsexp.v0.11.0] found in cache
[ppx_cstruct.3.2.1] found in cache
[ppx_tools_versioned.5.2] found in cache
[result.1.3] found in cache
[sexplib.v0.11.0] found in cache
[sexplib0.v0.11.0] found in cache
[stdio.v0.11.0] found in cache
[topkg.0.9.1] found in cache
[xen-gnt.3.0.1] found in cache
[xen-gnt-unix.3.0.0] found in cache

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
-> installed base-bytes.base
-> installed cppo.1.6.4
-> installed num.1.1
-> installed result.1.3
-> installed lwt.4.1.0
-> installed ocamlbuild.0.12.0
-> installed ocaml-migrate-parsetree.1.0.11
-> installed ocplib-endian.1.0
-> installed sexplib0.v0.11.0
-> installed parsexp.v0.11.0
-> installed ppx_tools_versioned.5.2
-> installed sexplib.v0.11.0
-> installed base.v0.11.1
-> installed cstruct.3.2.1
-> installed stdio.v0.11.0
-> installed configurator.v0.11.0
-> installed ppx_cstruct.3.2.1
-> installed io-page.2.0.1
-> installed topkg.0.9.1
-> installed mirage-profile.0.8.2
-> installed cmdliner.1.0.2
-> installed xen-gnt.3.0.1
[ERROR] The compilation of xen-gnt-unix failed at "/home/opam/.opam/4.06/bin/jbuilder build -p xen-gnt-unix -j 71".

#=== ERROR while compiling xen-gnt-unix.3.0.0 =================================#
# context              2.0.0~rc3 | linux/x86_64 | ocaml-base-compiler.4.06.1 | git+file:///home/opam/opam-repository
# path                 ~/.opam/4.06/.opam-switch/build/xen-gnt-unix.3.0.0
# command              ~/.opam/4.06/bin/jbuilder build -p xen-gnt-unix -j 71
# exit-code            1
# env-file             ~/.opam/log/xen-gnt-unix-10-156e0f.env
# output-file          ~/.opam/log/xen-gnt-unix-10-156e0f.out
### output ###
# File "/home/opam/.opam/4.06/lib/io-page/META", line 1, characters 0-0:
# Error: Library "io-page-unix" not found.
# -> required by library "io-page.unix" in /home/opam/.opam/4.06/lib/io-page
# Hint: try: dune external-lib-deps --missing --profile release -p xen-gnt-unix @install



<><> Error report <><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
+- The following actions failed
| - build xen-gnt-unix 3.0.0
+- 
+- The following changes have been performed
| - install base                    v0.11.1
| - install base-bytes              base
| - install cmdliner                1.0.2
| - install configurator            v0.11.0
| - install cppo                    1.6.4
| - install cstruct                 3.2.1
| - install io-page                 2.0.1
| - install lwt                     4.1.0
| - install mirage-profile          0.8.2
| - install num                     1.1
| - install ocaml-migrate-parsetree 1.0.11
| - install ocamlbuild              0.12.0
| - install ocplib-endian           1.0
| - install parsexp                 v0.11.0
| - install ppx_cstruct             3.2.1
| - install ppx_tools_versioned     5.2
| - install result                  1.3
| - install sexplib                 v0.11.0
| - install sexplib0                v0.11.0
| - install stdio                   v0.11.0
| - install topkg                   0.9.1
| - install xen-gnt                 3.0.1
+- 

The packages you requested declare the following system dependencies. Please make sure they are installed before retrying:
    xen-devel

# Run eval $(opam env) to update the current shell environment

The former state can be restored with:
    opam switch import "/home/opam/.opam/4.06/.opam-switch/backup/state-20180724023400.export"
31 1532399618 1532399704