$ opam depext -iy -j 2 dns-forward-lwt-unix.0.9.0
# Detecting depexts using vars: arch=x86_64, os=linux, os-distribution=fedora, os-family=fedora
# The following system packages are needed:
autoconf
m4
which
package autoconf is not installed
Name        : m4
Version     : 1.4.18
Release     : 6.fc28
Architecture: x86_64
Install Date: Fri Jul 20 20:12:09 2018
Group       : Applications/Text
Size        : 372272
License     : GPLv3+
Signature   : RSA/SHA256, Sun Feb 25 11:01:47 2018, Key ID e08e7e629db62fb1
Source RPM  : m4-1.4.18-6.fc28.src.rpm
Build Date  : Sun Feb 25 10:58:14 2018
Build Host  : buildvm-25.phx2.fedoraproject.org
Relocations : (not relocatable)
Packager    : Fedora Project
Vendor      : Fedora Project
URL         : http://www.gnu.org/software/m4/
Bug URL     : https://bugz.fedoraproject.org/m4
Summary     : The GNU macro processor
Description :
A GNU implementation of the traditional UNIX macro processor.  M4 is
useful for writing text files which can be logically parsed, and is used
by many programs as part of their build process.  M4 has built-in
functions for including files, running shell commands, doing arithmetic,
etc.  The autoconf program needs m4 for generating configure scripts, but
not for running configure scripts.

Install m4 if you need a macro processor.
Name        : which
Version     : 2.21
Release     : 8.fc28
Architecture: x86_64
Install Date: Fri Jul 20 07:30:50 2018
Group       : Unspecified
Size        : 79310
License     : GPLv3
Signature   : RSA/SHA256, Fri Feb 16 17:11:18 2018, Key ID e08e7e629db62fb1
Source RPM  : which-2.21-8.fc28.src.rpm
Build Date  : Fri Feb 16 17:06:50 2018
Build Host  : buildvm-05.phx2.fedoraproject.org
Relocations : (not relocatable)
Packager    : Fedora Project
Vendor      : Fedora Project
URL         : https://savannah.gnu.org/projects/which/
Summary     : Displays where a particular program in your path is located
Description :
The which command shows the full pathname of a specified program, if
the specified program is in your PATH.
# The following new OS packages need to be installed: autoconf
The following command needs to be run through "sudo":
    yum install -y autoconf
Fedora 28 - x86_64 - Updates                     31 MB/s |  20 MB     00:00    
Last metadata expiration check: 0:00:07 ago on Sat Jul 21 05:13:33 2018.
Dependencies resolved.
================================================================================
 Package           Arch            Version                Repository       Size
================================================================================
Installing:
 autoconf          noarch          2.69-27.fc28           fedora          710 k

Transaction Summary
================================================================================
Install  1 Package

Total download size: 710 k
Installed size: 2.2 M
Downloading Packages:
autoconf-2.69-27.fc28.noarch.rpm                5.7 MB/s | 710 kB     00:00    
--------------------------------------------------------------------------------
Total                                           2.0 MB/s | 710 kB     00:00     
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
  Preparing        :                                                        1/1 
  Installing       : autoconf-2.69-27.fc28.noarch                           1/1 
  Running scriptlet: autoconf-2.69-27.fc28.noarch                           1/1 
install-info: No such file or directory for /usr/share/info/autoconf.info
  Verifying        : autoconf-2.69-27.fc28.noarch                           1/1 

Installed:
  autoconf.noarch 2.69-27.fc28                                                  

Complete!
The following command needs to be run through "sudo":
    rpm -q --whatprovides autoconf
autoconf-2.69-27.fc28.noarch
# OS packages installation successful
# Now letting OPAM install the packages
The following actions will be performed:
  - install re                      1.7.3   [required by dns]
  - install base-bytes              base    [required by astring, dns]
  - install num                     1.1     [required by sexplib]
  - install ocaml-compiler-libs     v0.11.0 [required by ppxlib]
  - install sexplib0                v0.11.0 [required by sexplib]
  - install ppx_derivers            1.0     [required by ppxlib]
  - install result                  1.3     [required by dns-forward]
  - install conf-which              1       [required by hashcons]
  - install ocamlbuild              0.12.0  [required by mtime, fmt, astring, etc.]
  - install stringext               1.5.0   [required by uri]
  - install cppo                    1.6.4   [required by lwt]
  - install base64                  2.2.0   [required by dns]
  - install parsexp                 v0.11.0 [required by sexplib]
  - install base                    v0.11.1 [required by ppx_sexp_conv, configurator]
  - install ocaml-migrate-parsetree 1.0.11  [required by ppx_cstruct]
  - install conf-autoconf           0.1     [required by hashcons]
  - install uchar                   0.0.2   [required by fmt]
  - install topkg                   0.9.1   [required by mtime, fmt, astring, etc.]
  - install lwt                     4.1.0   [required by dns-forward-lwt-unix]                   For the PPX, please install package lwt_ppx
                                                                                                 For Lwt_log and Lwt_daemon, please install package lwt_log
  - install sexplib                 v0.11.0 [required by dns-forward]
  - install stdio                   v0.11.0 [required by configurator]
  - install ppx_tools_versioned     5.2     [required by ppx_cstruct]
  - install hashcons                1.3     [required by dns]
  - install rresult                 0.5.0   [required by dns-forward]
  - install mtime                   1.1.0   [required by dns-forward]
  - install fmt                     0.8.5   [required by dns-forward]
  - install duration                0.1.1   [required by dns-forward]
  - install astring                 0.8.3   [required by dns-forward]
  - install cstruct                 3.2.1   [required by dns-forward, cstruct-lwt, io-page-unix]
  - install ppxlib                  0.3.0   [required by ppx_sexp_conv]
  - install configurator            v0.11.0 [required by io-page-unix, mirage-clock-unix]
  - install mirage-flow             1.5.0   [required by mirage-channel, mirage-flow-lwt]
  - install mirage-device           1.1.0   [required by mirage-time]
  - install logs                    0.6.2   [required by dns-forward]
  - install ppx_cstruct             3.2.1   [required by dns]
  - install cstruct-lwt             3.2.1   [required by dns-forward-lwt-unix]
  - install ppx_sexp_conv           v0.11.2 [required by dns-forward]
  - install io-page                 2.0.1   [required by io-page-unix]
  - install mirage-channel          3.1.0   [required by mirage-channel-lwt]
  - install mirage-time             1.1.0   [required by mirage-time-lwt]
  - install mirage-clock            1.3.0   [required by mirage-clock-unix]
  - install uri                     1.9.7   [required by dns]
  - install ipaddr                  2.8.0   [required by dns-forward]
  - install io-page-unix            2.0.1   [required by dns-forward-lwt-unix]
  - install mirage-time-lwt         1.1.0   [required by dns-forward]
  - install mirage-flow-lwt         1.5.0   [required by dns-forward]
  - install mirage-clock-lwt        1.3.0   [required by dns-forward, mirage-clock-unix]
  - install dns                     1.0.1   [required by dns-forward]
  - install mirage-channel-lwt      3.1.0   [required by dns-forward]
  - install mirage-clock-unix       1.4.0   [required by dns-forward-lwt-unix]
  - install dns-forward             0.10.0  [required by dns-forward-lwt-unix]
  - install dns-forward-lwt-unix    0.9.0
===== 52 to install =====

<><> Gathering sources ><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
[astring.0.8.3] found in cache
[base.v0.11.1] found in cache
[base64.2.2.0] found in cache
[configurator.v0.11.0] found in cache
[cppo.1.6.4] found in cache
[cstruct.3.2.1] found in cache
[cstruct-lwt.3.2.1] found in cache
[dns.1.0.1] found in cache
[dns-forward.0.10.0] found in cache
[dns-forward-lwt-unix.0.9.0] found in cache
[duration.0.1.1] found in cache
[fmt.0.8.5] found in cache
[hashcons.1.3] found in cache
[io-page.2.0.1] found in cache
[io-page-unix.2.0.1] found in cache
[ipaddr.2.8.0] found in cache
[logs.0.6.2] found in cache
[lwt.4.1.0] found in cache
[mirage-channel.3.1.0] found in cache
[mirage-channel-lwt.3.1.0] found in cache
[mirage-clock.1.3.0] found in cache
[mirage-clock-lwt.1.3.0] found in cache
[mirage-clock-unix.1.4.0] found in cache
[mirage-device.1.1.0] found in cache
[mirage-flow.1.5.0] found in cache
[mirage-flow-lwt.1.5.0] found in cache
[mirage-time.1.1.0] found in cache
[mirage-time-lwt.1.1.0] found in cache
[mtime.1.1.0] found in cache
[num.1.1] found in cache
[ocaml-compiler-libs.v0.11.0] found in cache
[ocaml-migrate-parsetree.1.0.11] found in cache
[ocamlbuild.0.12.0] found in cache
[parsexp.v0.11.0] found in cache
[ppx_cstruct.3.2.1] found in cache
[ppx_derivers.1.0] found in cache
[ppx_sexp_conv.v0.11.2] found in cache
[ppx_tools_versioned.5.2] found in cache
[ppxlib.0.3.0] found in cache
[re.1.7.3] found in cache
[result.1.3] found in cache
[rresult.0.5.0] found in cache
[sexplib.v0.11.0] found in cache
[sexplib0.v0.11.0] found in cache
[stdio.v0.11.0] found in cache
[stringext.1.5.0] found in cache
[topkg.0.9.1] found in cache
[uchar.0.0.2] found in cache
[uri.1.9.7] found in cache

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
-> installed base-bytes.base
-> installed base64.2.2.0
-> installed conf-which.1
-> installed conf-autoconf.0.1
-> installed cppo.1.6.4
-> installed num.1.1
-> installed hashcons.1.3
-> installed ocaml-compiler-libs.v0.11.0
-> installed ocamlbuild.0.12.0
-> installed ppx_derivers.1.0
-> installed re.1.7.3
-> installed result.1.3
-> installed lwt.4.1.0
-> installed ocaml-migrate-parsetree.1.0.11
-> installed sexplib0.v0.11.0
-> installed parsexp.v0.11.0
-> installed ppx_tools_versioned.5.2
-> installed sexplib.v0.11.0
-> installed base.v0.11.1
-> installed cstruct.3.2.1
-> installed cstruct-lwt.3.2.1
-> installed stdio.v0.11.0
-> installed configurator.v0.11.0
-> installed io-page.2.0.1
-> installed io-page-unix.2.0.1
-> installed ppx_cstruct.3.2.1
-> installed stringext.1.5.0
-> installed topkg.0.9.1
-> installed astring.0.8.3
-> installed duration.0.1.1
-> installed mtime.1.1.0
-> installed rresult.0.5.0
-> installed uchar.0.0.2
-> installed fmt.0.8.5
-> installed mirage-device.1.1.0
-> installed logs.0.6.2
-> installed mirage-clock.1.3.0
-> installed mirage-flow.1.5.0
-> installed mirage-channel.3.1.0
-> installed mirage-clock-lwt.1.3.0
-> installed mirage-flow-lwt.1.5.0
-> installed mirage-clock-unix.1.4.0
-> installed mirage-time.1.1.0
-> installed mirage-channel-lwt.3.1.0
-> installed ppxlib.0.3.0
-> installed mirage-time-lwt.1.1.0
-> installed ppx_sexp_conv.v0.11.2
-> installed ipaddr.2.8.0
-> installed uri.1.9.7
-> installed dns.1.0.1
-> installed dns-forward.0.10.0
[ERROR] The compilation of dns-forward-lwt-unix failed at "/home/opam/.opam/4.06/bin/jbuilder build -p dns-forward-lwt-unix -j 47".

#=== ERROR while compiling dns-forward-lwt-unix.0.9.0 =========================#
# context              2.0.0~rc3 | linux/x86_64 | ocaml-base-compiler.4.06.1 | git+file:///home/opam/opam-repository
# path                 ~/.opam/4.06/.opam-switch/build/dns-forward-lwt-unix.0.9.0
# command              ~/.opam/4.06/bin/jbuilder build -p dns-forward-lwt-unix -j 47
# exit-code            1
# env-file             ~/.opam/log/dns-forward-lwt-unix-10-1a41fc.env
# output-file          ~/.opam/log/dns-forward-lwt-unix-10-1a41fc.out
### output ###
#     ocamlopt lwt/.dns_forward_lwt_unix.objs/dns_forward_lwt_unix.{cmx,o} (exit 2)
# (cd _build/default && /home/opam/.opam/4.06/bin/ocamlopt.opt -w -40 -g -I lwt/.dns_forward_lwt_unix.objs -I /home/opam/.opam/4.06/lib/astring -I /home/opam/.opam/4.06/lib/base64 -I /home/opam/.opam/4.06/lib/bytes -I /home/opam/.opam/4.06/lib/cstruct -I /home/opam/.opam/4.06/lib/cstruct-lwt -I /home/opam/.opam/4.06/lib/dns -I /home/opam/.opam/4.06/lib/dns-forward -I /home/opam/.opam/4.06/lib/duration -I /home/opam/.opam/4.06/lib/fmt -I /home/opam/.opam/4.06/lib/hashcons -I /home/opam/.opam/4.06/lib/io-page -I /home/opam/.opam/4.06/lib/io-page-unix -I /home/opam/.opam/4.06/lib/ipaddr -I /home/opam/.opam/4.06/lib/logs -I /home/opam/.opam/4.06/lib/lwt -I /home/opam/.opam/4.06/lib/lwt/unix -I /home/opam/.opam/4.06/lib/mirage-channel -I /home/opam/.opam/4.06/lib/mirage-channel-lwt -I /home/opam/.opam/4.06/lib/mirage-clock -I /home/opam/.opam/4.06/lib/mirage-clock-lwt -I /home/opam/.opam/4.06/lib/mirage-clock-unix -I /home/opam/.opam/4.06/lib/mirage-device -I /home/opam/.opam/4.06/lib/mirage-flow -I /home/opam/.opam/4.06/lib/mirage-flow-lwt -I /home/opam/.opam/4.06/lib/mirage-time -I /home/opam/.opam/4.06/lib/mirage-time-lwt -I /home/opam/.opam/4.06/lib/ocaml-migrate-parsetree -I /home/opam/.opam/4.06/lib/ocaml/compiler-libs -I /home/opam/.opam/4.06/lib/ocaml/threads -I /home/opam/.opam/4.06/lib/parsexp -I /home/opam/.opam/4.06/lib/ppx_sexp_conv/runtime-lib -I /home/opam/.opam/4.06/lib/ppx_tools_versioned -I /home/opam/.opam/4.06/lib/re -I /home/opam/.opam/4.06/lib/re/posix -I /home/opam/.opam/4.06/lib/re/str -I /home/opam/.opam/4.06/lib/result -I /home/opam/.opam/4.06/lib/rresult -I /home/opam/.opam/4.06/lib/sexplib -I /home/opam/.opam/4.06/lib/sexplib0 -I /home/opam/.opam/4.06/lib/stringext -I /home/opam/.opam/4.06/lib/uchar -I /home/opam/.opam/4.06/lib/uri -I /home/opam/.opam/4.06/lib/uri/services -no-alias-deps -o lwt/.dns_forward_lwt_unix.objs/dns_forward_lwt_unix.cmx -c -impl lwt/dns_forward_lwt_unix.ml)
# File "lwt/dns_forward_lwt_unix.ml", line 464, characters 22-37:
# Error: Unbound module Rpc.Client.Make
#       ocamlc lwt/.dns_forward_lwt_unix.objs/dns_forward_lwt_unix.{cmo,cmt} (exit 2)
# (cd _build/default && /home/opam/.opam/4.06/bin/ocamlc.opt -w -40 -g -bin-annot -I lwt/.dns_forward_lwt_unix.objs -I /home/opam/.opam/4.06/lib/astring -I /home/opam/.opam/4.06/lib/base64 -I /home/opam/.opam/4.06/lib/bytes -I /home/opam/.opam/4.06/lib/cstruct -I /home/opam/.opam/4.06/lib/cstruct-lwt -I /home/opam/.opam/4.06/lib/dns -I /home/opam/.opam/4.06/lib/dns-forward -I /home/opam/.opam/4.06/lib/duration -I /home/opam/.opam/4.06/lib/fmt -I /home/opam/.opam/4.06/lib/hashcons -I /home/opam/.opam/4.06/lib/io-page -I /home/opam/.opam/4.06/lib/io-page-unix -I /home/opam/.opam/4.06/lib/ipaddr -I /home/opam/.opam/4.06/lib/logs -I /home/opam/.opam/4.06/lib/lwt -I /home/opam/.opam/4.06/lib/lwt/unix -I /home/opam/.opam/4.06/lib/mirage-channel -I /home/opam/.opam/4.06/lib/mirage-channel-lwt -I /home/opam/.opam/4.06/lib/mirage-clock -I /home/opam/.opam/4.06/lib/mirage-clock-lwt -I /home/opam/.opam/4.06/lib/mirage-clock-unix -I /home/opam/.opam/4.06/lib/mirage-device -I /home/opam/.opam/4.06/lib/mirage-flow -I /home/opam/.opam/4.06/lib/mirage-flow-lwt -I /home/opam/.opam/4.06/lib/mirage-time -I /home/opam/.opam/4.06/lib/mirage-time-lwt -I /home/opam/.opam/4.06/lib/ocaml-migrate-parsetree -I /home/opam/.opam/4.06/lib/ocaml/compiler-libs -I /home/opam/.opam/4.06/lib/ocaml/threads -I /home/opam/.opam/4.06/lib/parsexp -I /home/opam/.opam/4.06/lib/ppx_sexp_conv/runtime-lib -I /home/opam/.opam/4.06/lib/ppx_tools_versioned -I /home/opam/.opam/4.06/lib/re -I /home/opam/.opam/4.06/lib/re/posix -I /home/opam/.opam/4.06/lib/re/str -I /home/opam/.opam/4.06/lib/result -I /home/opam/.opam/4.06/lib/rresult -I /home/opam/.opam/4.06/lib/sexplib -I /home/opam/.opam/4.06/lib/sexplib0 -I /home/opam/.opam/4.06/lib/stringext -I /home/opam/.opam/4.06/lib/uchar -I /home/opam/.opam/4.06/lib/uri -I /home/opam/.opam/4.06/lib/uri/services -no-alias-deps -o lwt/.dns_forward_lwt_unix.objs/dns_forward_lwt_unix.cmo -c -impl lwt/dns_forward_lwt_unix.ml)
# File "lwt/dns_forward_lwt_unix.ml", line 464, characters 22-37:
# Error: Unbound module Rpc.Client.Make



<><> Error report <><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
+- The following actions failed
| - build dns-forward-lwt-unix 0.9.0
+- 
+- The following changes have been performed
| - install astring                 0.8.3
| - install base                    v0.11.1
| - install base-bytes              base
| - install base64                  2.2.0
| - install conf-autoconf           0.1
| - install conf-which              1
| - install configurator            v0.11.0
| - install cppo                    1.6.4
| - install cstruct                 3.2.1
| - install cstruct-lwt             3.2.1
| - install dns                     1.0.1
| - install dns-forward             0.10.0
| - install duration                0.1.1
| - install fmt                     0.8.5
| - install hashcons                1.3
| - install io-page                 2.0.1
| - install io-page-unix            2.0.1
| - install ipaddr                  2.8.0
| - install logs                    0.6.2
| - install lwt                     4.1.0
| - install mirage-channel          3.1.0
| - install mirage-channel-lwt      3.1.0
| - install mirage-clock            1.3.0
| - install mirage-clock-lwt        1.3.0
| - install mirage-clock-unix       1.4.0
| - install mirage-device           1.1.0
| - install mirage-flow             1.5.0
| - install mirage-flow-lwt         1.5.0
| - install mirage-time             1.1.0
| - install mirage-time-lwt         1.1.0
| - install mtime                   1.1.0
| - install num                     1.1
| - install ocaml-compiler-libs     v0.11.0
| - install ocaml-migrate-parsetree 1.0.11
| - install ocamlbuild              0.12.0
| - install parsexp                 v0.11.0
| - install ppx_cstruct             3.2.1
| - install ppx_derivers            1.0
| - install ppx_sexp_conv           v0.11.2
| - install ppx_tools_versioned     5.2
| - install ppxlib                  0.3.0
| - install re                      1.7.3
| - install result                  1.3
| - install rresult                 0.5.0
| - install sexplib                 v0.11.0
| - install sexplib0                v0.11.0
| - install stdio                   v0.11.0
| - install stringext               1.5.0
| - install topkg                   0.9.1
| - install uchar                   0.0.2
| - install uri                     1.9.7
+- 
# Run eval $(opam env) to update the current shell environment

The former state can be restored with:
    opam switch import "/home/opam/.opam/4.06/.opam-switch/backup/state-20180721051345.export"
31 1532150008 1532150157