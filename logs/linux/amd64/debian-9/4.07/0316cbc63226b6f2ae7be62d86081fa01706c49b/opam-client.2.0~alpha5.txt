$ opam depext -iy -j 2 opam-client.2.0~alpha5
# Detecting depexts using vars: arch=x86_64, os=linux, os-distribution=debian, os-family=debian
# The following system packages are needed:
m4
perl
# All required OS packages found.
# Now letting OPAM install the packages
The following actions will be performed:
  - install ocamlgraph       1.8.8        [required by dose3, opam-core]
  - install result           1.3          [required by cmdliner]
  - install opam-file-format 2.0.0~rc2    [required by opam-format]
  - install re               1.7.3        [required by dose3, opam-core]
  - install base-bytes       base         [required by extlib]
  - install conf-perl        1            [required by cudf, dose3]
  - install ocamlbuild       0.12.0       [required by cmdliner]
  - install cppo             1.6.4        [required by dose3]
  - install uchar            0.0.2        [required by jsonm]
  - install topkg            0.9.1        [required by cmdliner]
  - install camlp4           4.07+1       [required by cudf]
  - install extlib           1.7.5        [required by cudf, dose3]
  - install cmdliner         1.0.2        [required by opam-client]
  - install cudf             0.7          [required by opam-solver]
  - install uutf             1.0.1        [required by jsonm]
  - install ocp-build        1.99.20-beta [required by opam-core]
  - install dose3            5.0.1        [required by opam-solver]
  - install jsonm            1.0.1        [required by opam-core]
  - install opam-core        2.0~alpha5   [required by opam-solver, opam-state]
  - install opam-format      2.0~alpha5   [required by opam-solver, opam-state]
  - install opam-solver      2.0~alpha5   [required by opam-client]
  - install opam-repository  2.0~alpha5   [required by opam-state]
  - install opam-state       2.0~alpha5   [required by opam-client]
  - install opam-client      2.0~alpha5
===== 24 to install =====

<><> Gathering sources ><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
[camlp4.4.07+1] found in cache
[cmdliner.1.0.2] found in cache
[cppo.1.6.4] found in cache
[cudf.0.7] found in cache
[dose3.5.0.1] found in cache
[extlib.1.7.5] found in cache
[jsonm.1.0.1] found in cache
[ocamlbuild.0.12.0] found in cache
[ocamlgraph.1.8.8] found in cache
[ocp-build.1.99.20-beta] found in cache
[opam-client.2.0~alpha5] found in cache
[opam-core.2.0~alpha5] found in cache
[opam-file-format.2.0.0~rc2] found in cache
[opam-format.2.0~alpha5] found in cache
[opam-repository.2.0~alpha5] found in cache
[opam-solver.2.0~alpha5] found in cache
[opam-state.2.0~alpha5] found in cache
[re.1.7.3] found in cache
[result.1.3] found in cache
[topkg.0.9.1] found in cache
[uchar.0.0.2] found in cache
[uutf.1.0.1] found in cache

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
-> installed base-bytes.base
-> installed conf-perl.1
-> installed ocamlbuild.0.12.0
-> installed cppo.1.6.4
-> installed extlib.1.7.5
-> installed ocamlgraph.1.8.8
-> installed opam-file-format.2.0.0~rc2
-> installed re.1.7.3
-> installed result.1.3
-> installed topkg.0.9.1
-> installed cmdliner.1.0.2
-> installed ocp-build.1.99.20-beta
-> installed uchar.0.0.2
-> installed uutf.1.0.1
-> installed jsonm.1.0.1
-> installed opam-core.2.0~alpha5
-> installed opam-format.2.0~alpha5
-> installed opam-repository.2.0~alpha5
-> installed opam-state.2.0~alpha5
-> installed camlp4.4.07+1
-> installed cudf.0.7
-> installed dose3.5.0.1
-> installed opam-solver.2.0~alpha5
[ERROR] The compilation of opam-client failed at "/usr/bin/make opam-client".

#=== ERROR while compiling opam-client.2.0~alpha5 =============================#
# context              2.0.0~rc3 | linux/x86_64 | ocaml-variants.4.07.0+beta2 | git+file:///home/opam/opam-repository
# path                 ~/.opam/4.07/.opam-switch/build/opam-client.2.0~alpha5
# command              /usr/bin/make opam-client
# exit-code            2
# env-file             ~/.opam/log/opam-client-11-21b540.env
# output-file          ~/.opam/log/opam-client-11-21b540.out
### output ###
# /usr/bin/make -C src client/opamGitVersion.ml
# make[1]: Entering directory '/home/opam/.opam/4.07/.opam-switch/build/opam-client.2.0~alpha5/src'
# cd .. && ocaml shell/get-git-id.ml src/client/opamGitVersion.ml
# touch client/opamGitVersion.ml
# make[1]: Leaving directory '/home/opam/.opam/4.07/.opam-switch/build/opam-client.2.0~alpha5/src'
# /usr/bin/make -C src state/opamScript.ml
# make[1]: Entering directory '/home/opam/.opam/4.07/.opam-switch/build/opam-client.2.0~alpha5/src'
# ocaml ../shell/crunch.ml "complete"     < ../shell/opam_completion.sh > state/opamScript.ml
# ocaml ../shell/crunch.ml "complete_zsh" < ../shell/opam_completion_zsh.sh >> state/opamScript.ml
# ocaml ../shell/crunch.ml "prompt"       < ../shell/opam_prompt.sh >> state/opamScript.ml
# make[1]: Leaving directory '/home/opam/.opam/4.07/.opam-switch/build/opam-client.2.0~alpha5/src'
# /usr/bin/make -C src core/opamCompat.ml
# make[1]: Entering directory '/home/opam/.opam/4.07/.opam-switch/build/opam-client.2.0~alpha5/src'
# cp -f core/opamCompat.ml.4.03 core/opamCompat.ml
# make[1]: Leaving directory '/home/opam/.opam/4.07/.opam-switch/build/opam-client.2.0~alpha5/src'
# /usr/bin/make -C src core/opamCompat.mli
# make[1]: Entering directory '/home/opam/.opam/4.07/.opam-switch/build/opam-client.2.0~alpha5/src'
# cp -f core/opamCompat.mli.4.03 core/opamCompat.mli
# make[1]: Leaving directory '/home/opam/.opam/4.07/.opam-switch/build/opam-client.2.0~alpha5/src'
# tput: unknown terminal "none"
# tput: No value for $TERM and no -T specified
# stty: 'standard input': Inappropriate ioctl for device
# Warning: file "/home/opam/.opam/4.07/.opam-switch/build/opam-client.2.0~alpha5/_obuild/ocp-build.root" does not exist. Creating with default values.
# tput: unknown terminal "none"
# tput: No value for $TERM and no -T specified
# stty: 'standard input': Inappropriate ioctl for device
# Compiler: ocaml 4.07.0+beta2
# ----- 1 env warnings -----
# Warning: inexistent package directory:
#   "/home/opam/.opam/4.07/lib/ocaml/ocamldoc"
#   Disabling package "ocamldoc".
#     (from "/home/opam/.opam/4.07/lib/ocamldoc/META")
# 0.01s _obuild/opam-client/opamClientConfig.mlimods                     [ done ]
# 0.01s _obuild/opam-client/opamClientConfig.mlmods                      [ done ]
# 0.01s _obuild/opam-client/opamAction.mlimods                           [ done ]
# 0.01s _obuild/opam-client/opamSolution.mlimods                         [ done ]
# 0.01s _obuild/opam-client/opamSwitchCommand.mlimods                    [ done ]
# 0.01s _obuild/opam-client/opamConfigCommand.mlimods                    [ done ]
# 0.01s _obuild/opam-client/opamAction.mlmods                            [ done ]
# 0.01s _obuild/opam-client/opamSwitchCommand.mlmods                     [ done ]
# 0.01s _obuild/opam-client/opamConfigCommand.mlmods                     [ done ]
# 0.01s _obuild/opam-client/opamRepositoryCommand.mlimods                [ done ]
# 0.01s _obuild/opam-client/opamRepositoryCommand.mlmods                 [ done ]
# 0.01s _obuild/opam-client/opamSolution.mlmods                          [ done ]
# 0.01s _obuild/opam-client/opamPinCommand.mlimods                       [ done ]
# 0.01s _obuild/opam-client/opamPinCommand.mlmods                        [ done ]
# 0.01s _obuild/opam-client/opamListCommand.mlimods                      [ done ]
# 0.01s _obuild/opam-client/opamInitDefaults.mlimods                     [ done ]
# 0.01s _obuild/opam-client/opamInitDefaults.mlmods                      [ done ]
# 0.01s _obuild/opam-client/opamClient.mlimods                           [ done ]
# 0.01s _obuild/opam-client/opamGitVersion.mlimods                       [ done ]
# 0.02s _obuild/opam-client/opamListCommand.mlmods                       [ done ]
# 0.01s _obuild/opam-client/opamGitVersion.mlmods                        [ done ]
# 0.01s _obuild/opam-client/opamArg.mlimods                              [ done ]
# 0.02s _obuild/opam-client/opamArg.mlmods                               [ done ]
# 0.02s _obuild/opam-client/opamClient.mlmods                            [ done ]
# 0.07s _obuild/opam-client/opamSolution.cmi                             [ done ]
# 0.08s _obuild/opam-client/opamSwitchCommand.cmi                        [ done ]
# 0.07s _obuild/opam-client/opamClient.cmi                               [ done ]
# 0.08s _obuild/opam-client/opamRepositoryCommand.cmi                    [ done ]
# 0.08s _obuild/opam-client/opamInitDefaults.cmi                         [ done ]
# 0.08s _obuild/opam-client/opamListCommand.cmi                          [ done ]
# 0.09s _obuild/opam-client/opamAction.cmi                               [ done ]
# 0.09s _obuild/opam-client/opamConfigCommand.cmi                        [ done ]
# 0.10s _obuild/opam-client/opamClientConfig.cmi                         [ done ]
# 0.09s _obuild/opam-client/opamPinCommand.cmi                           [ done ]
# 0.09s _obuild/opam-client/opamGitVersion.cmi                           [ done ]
# 0.13s _obuild/opam-client/opamRepositoryCommand.cmo                    [ done ]
# 0.12s _obuild/opam-client/opamGitVersion.cmx                           [ done ]
# 0.13s _obuild/opam-client/opamClientConfig.cmo                         [ done ]
# 0.13s _obuild/opam-client/opamGitVersion.cmo                           [ done ]
# 0.14s _obuild/opam-client/opamInitDefaults.cmo                         [ done ]
# 0.15s _obuild/opam-client/opamArg.cmi                                  [ done ]
# 0.17s _obuild/opam-client/opamInitDefaults.cmx                         [ done ]
# 0.19s _obuild/opam-client/opamClientConfig.cmx                         [ done ]
# 0.20s _obuild/opam-client/opamConfigCommand.cmo                        [ done ]
# 0.23s _obuild/opam-client/opamSwitchCommand.cmo                        [ done ]
# 0.23s _obuild/opam-client/opamListCommand.cmo                          [ done ]
# -- stderr for ...build/opam-client/opamListCommand.cmo --
# File "./src/client/opamListCommand.ml", line 233, characters 24-36:
# Warning 3: deprecated: module Re_glob
# Use Re.Glob
# 0.23s _obuild/opam-client/opamRepositoryCommand.cmx                    [ done ]
# 0.23s _obuild/opam-client/opamConfigCommand.cmx                        [ done ]
# 0.09s _obuild/opam-client/opamArg.cmo                                  [failed]
# [104.1] Command failed: '/home/opam/.opam/4.07/bin/ocamlc.opt' '-g' '-g' '-w' '+a-4-44' '-safe-string' '-w' '-48' '-bin-annot' '-c' '-o' '_obuild/RULE-bfd1478d642e0a06bee9c285be2b03d7/opamArg.cmo' '-I' './_obuild/opam-client' '-I' './src/client' '-I' '/home/opam/.opam/4.07/lib/re/glob' '-I' '/home/opam/.opam/4.07/lib/opam-state' '-I' '/home/opam/.opam/4.07/lib/opam-repository' '-I' '/home/opam/.opam/4.07/lib/opam-solver' '-I' '/home/opam/.opam/4.07/lib/opam-format' '-I' '/home/opam/.opam/4.07/lib/opam-file-format' '-I' '/home/opam/.opam/4.07/lib/opam-core' '-I' '/home/opam/.opam/4.07/lib/re/str' '-I' '/home/opam/.opam/4.07/lib/jsonm' '-I' '/home/opam/.opam/4.07/lib/uutf' '-I' '/home/opam/.opam/4.07/lib/uchar' '-I' '/home/opam/.opam/4.07/lib/dose3' '-I' '/home/opam/.opam/4.07/lib/re/pcre' '-I' '/home/opam/.opam/4.07/lib/re' '-I' '/home/opam/.opam/4.07/lib/ocamlgraph' '-I' '/home/opam/.opam/4.07/lib/cudf' '-I' '/home/opam/.opam/4.07/lib/extlib' '-I' '/home/opam/.opam/4.07/lib/cmdliner' '-I' '/home/opam/.opam/4.07/lib/result' '-I' '/home/opam/.opam/4.07/lib/bytes' '-I' '/home/opam/.opam/4.07/lib/ocaml' './src/client/opamArg.ml'
# -- stderr for ./_obuild/opam-client/opamArg.cmo --
# File "./src/client/opamArg.ml", line 474, characters 25-29:
# Error: This expression has type
#          ?docv:string ->
#          (string -> ('a, [ `Msg of string ]) Result.result) *
#          'a Cmdliner.Arg.printer -> 'a Cmdliner.Arg.conv
#        but an expression was expected of type
#          'b Cmdliner.Arg.conv =
#            'b Cmdliner.Arg.parser * 'b Cmdliner.Arg.printer
# 0.25s _obuild/opam-client/opamSolution.cmo                             [ done ]
# 0.25s _obuild/opam-client/opamPinCommand.cmo                           [ done ]
# 0.31s _obuild/opam-client/opamAction.cmo                               [ done ]
# 0.31s _obuild/opam-client/opamClient.cmo                               [ done ]
# 0.39s _obuild/opam-client/opamAction.cmx                               [ done ]
# 0.21s _obuild/opam-client/opamPinCommand.cmx                           [ done ]
# 2 errors in 0.68s. 55 jobs (parallelism 7.8x), 62 files generated.
# Error log:
# Error:
# [104.1] '/home/opam/.opam/4.07/bin/ocamlc.opt' '-g' '-g' '-w' '+a-4-44' '-safe-string' '-w' '-48' '-bin-annot' '-c' '-o' '_obuild/RULE-bfd1478d642e0a06bee9c285be2b03d7/opamArg.cmo' '-I' './_obuild/opam-client' '-I' './src/client' '-I' '/home/opam/.opam/4.07/lib/re/glob' '-I' '/home/opam/.opam/4.07/lib/opam-state' '-I' '/home/opam/.opam/4.07/lib/opam-repository' '-I' '/home/opam/.opam/4.07/lib/opam-solver' '-I' '/home/opam/.opam/4.07/lib/opam-format' '-I' '/home/opam/.opam/4.07/lib/opam-file-format' '-I' '/home/opam/.opam/4.07/lib/opam-core' '-I' '/home/opam/.opam/4.07/lib/re/str' '-I' '/home/opam/.opam/4.07/lib/jsonm' '-I' '/home/opam/.opam/4.07/lib/uutf' '-I' '/home/opam/.opam/4.07/lib/uchar' '-I' '/home/opam/.opam/4.07/lib/dose3' '-I' '/home/opam/.opam/4.07/lib/re/pcre' '-I' '/home/opam/.opam/4.07/lib/re' '-I' '/home/opam/.opam/4.07/lib/ocamlgraph' '-I' '/home/opam/.opam/4.07/lib/cudf' '-I' '/home/opam/.opam/4.07/lib/extlib' '-I' '/home/opam/.opam/4.07/lib/cmdliner' '-I' '/home/opam/.opam/4.07/lib/result' '-I' '/home/opam/.opam/4.07/lib/bytes' '-I' '/home/opam/.opam/4.07/lib/ocaml' './src/client/opamArg.ml'
# 
# File "./src/client/opamArg.ml", line 474, characters 25-29:
# Error: This expression has type
#          ?docv:string ->
#          (string -> ('a, [ `Msg of string ]) Result.result) *
#          'a Cmdliner.Arg.printer -> 'a Cmdliner.Arg.conv
#        but an expression was expected of type
#          'b Cmdliner.Arg.conv =
#            'b Cmdliner.Arg.parser * 'b Cmdliner.Arg.printer
# 
# Error:
# rule 104: target ./_obuild/opam-client/opamArg.cmo not built
# Makefile:169: recipe for target 'opam-client' failed
# make: *** [opam-client] Error 2



<><> Error report <><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
+- The following actions failed
| - build opam-client 2.0~alpha5
+- 
+- The following changes have been performed
| - install base-bytes       base
| - install camlp4           4.07+1
| - install cmdliner         1.0.2
| - install conf-perl        1
| - install cppo             1.6.4
| - install cudf             0.7
| - install dose3            5.0.1
| - install extlib           1.7.5
| - install jsonm            1.0.1
| - install ocamlbuild       0.12.0
| - install ocamlgraph       1.8.8
| - install ocp-build        1.99.20-beta
| - install opam-core        2.0~alpha5
| - install opam-file-format 2.0.0~rc2
| - install opam-format      2.0~alpha5
| - install opam-repository  2.0~alpha5
| - install opam-solver      2.0~alpha5
| - install opam-state       2.0~alpha5
| - install re               1.7.3
| - install result           1.3
| - install topkg            0.9.1
| - install uchar            0.0.2
| - install uutf             1.0.1
+- 
# Run eval $(opam env) to update the current shell environment

The former state can be restored with:
    opam switch import "/home/opam/.opam/4.07/.opam-switch/backup/state-20180726205926.export"
31 1532638764 1532638910