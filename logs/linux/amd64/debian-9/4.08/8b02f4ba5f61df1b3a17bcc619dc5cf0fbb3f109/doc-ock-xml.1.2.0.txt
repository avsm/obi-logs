$ opam depext -iy -j 2 doc-ock-xml.1.2.0
# Detecting depexts using vars: arch=x86_64, os=linux, os-distribution=debian, os-family=debian
# The following system packages are needed:
m4
# All required OS packages found.
# Now letting OPAM install the packages
The following actions will be performed:
  - install result      1.3      [required by topkg]
  - install base-bytes  base     [required by cppo]
  - install ocamlbuild  0.12.0   [required by menhir, xmlm]
  - install octavius    1.2.0    [required by doc-ock]
  - install cppo        1.6.4    [required by doc-ock]
  - install topkg       0.9.1    [required by xmlm]
  - install menhir      20180703 [required by doc-ock-xml]
  - install doc-ock     1.2.0    [required by doc-ock-xml]
  - install xmlm        1.3.0    [required by doc-ock-xml]
  - install doc-ock-xml 1.2.0
===== 10 to install =====

<><> Gathering sources ><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
[cppo.1.6.4] found in cache
[doc-ock.1.2.0] found in cache
[doc-ock-xml.1.2.0] found in cache
[menhir.20180703] found in cache
[ocamlbuild.0.12.0] found in cache
[octavius.1.2.0] found in cache
[result.1.3] found in cache
[topkg.0.9.1] found in cache
[xmlm.1.3.0] found in cache

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
-> installed base-bytes.base
-> installed cppo.1.6.4
-> installed octavius.1.2.0
-> installed ocamlbuild.0.12.0
[ERROR] The compilation of doc-ock failed at "/home/opam/.opam/4.08/bin/jbuilder build -p doc-ock -j 71".
-> installed result.1.3
-> installed topkg.0.9.1
-> installed xmlm.1.3.0
-> installed menhir.20180703

#=== ERROR while compiling doc-ock.1.2.0 ======================================#
# context              2.0.0~rc3 | linux/x86_64 | ocaml-variants.4.08.0+trunk | git+file:///home/opam/opam-repository
# path                 ~/.opam/4.08/.opam-switch/build/doc-ock.1.2.0
# command              ~/.opam/4.08/bin/jbuilder build -p doc-ock -j 71
# exit-code            1
# env-file             ~/.opam/log/doc-ock-11-05f997.env
# output-file          ~/.opam/log/doc-ock-11-05f997.out
### output ###
#       ocamlc src/.docOck.objs/docOckCmt.{cmo,cmt} (exit 2)
# (cd _build/default && /home/opam/.opam/4.08/bin/ocamlc.opt -w -40 -g -bin-annot -I src/.docOck.objs -I /home/opam/.opam/4.08/lib/ocaml/compiler-libs -I /home/opam/.opam/4.08/lib/octavius -no-alias-deps -o src/.docOck.objs/docOckCmt.cmo -c -impl src/docOckCmt.pp.ml)
# File "src/docOckCmt.ml", line 46, characters 4-1410:
# Warning 8: this pattern-matching is not exhaustive.
# Here is an example of a case that is not matched:
# Tpat_exception _
# File "src/docOckCmt.ml", line 456, characters 50-56:
# Error: This expression has type Typedtree.type_exception
#        The field ext_id does not belong to type Typedtree.type_exception
#       ocamlc src/.docOck.objs/docOckCmti.{cmo,cmt} (exit 2)
# (cd _build/default && /home/opam/.opam/4.08/bin/ocamlc.opt -w -40 -g -bin-annot -I src/.docOck.objs -I /home/opam/.opam/4.08/lib/ocaml/compiler-libs -I /home/opam/.opam/4.08/lib/octavius -no-alias-deps -o src/.docOck.objs/docOckCmti.cmo -c -impl src/docOckCmti.pp.ml)
# File "src/docOckCmti.ml", line 562, characters 46-49:
# Error: This expression has type Typedtree.type_exception
#        but an expression was expected of type Typedtree.extension_constructor
#     ocamlopt src/.docOck.objs/docOckCmti.{cmx,o} (exit 2)
# (cd _build/default && /home/opam/.opam/4.08/bin/ocamlopt.opt -w -40 -g -I src/.docOck.objs -I /home/opam/.opam/4.08/lib/ocaml/compiler-libs -I /home/opam/.opam/4.08/lib/octavius -no-alias-deps -o src/.docOck.objs/docOckCmti.cmx -c -impl src/docOckCmti.pp.ml)
# File "src/docOckCmti.ml", line 562, characters 46-49:
# Error: This expression has type Typedtree.type_exception
#        but an expression was expected of type Typedtree.extension_constructor



<><> Error report <><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
+- The following actions failed
| - build doc-ock 1.2.0
+- 
+- The following changes have been performed (the rest was aborted)
| - install base-bytes base
| - install cppo       1.6.4
| - install menhir     20180703
| - install ocamlbuild 0.12.0
| - install octavius   1.2.0
| - install result     1.3
| - install topkg      0.9.1
| - install xmlm       1.3.0
+- 
# Run eval $(opam env) to update the current shell environment

The former state can be restored with:
    opam switch import "/home/opam/.opam/4.08/.opam-switch/backup/state-20180728201534.export"
31 1532808931 1532808968