$ opam depext -iy -j 2 utop.2.2.0
# Detecting depexts using vars: arch=x86_64, os=linux, os-distribution=debian, os-family=debian
# The following system packages are needed:
m4
# All required OS packages found.
# Now letting OPAM install the packages
The following actions will be performed:
  - install result      1.3    [required by lwt]
  - install camomile    1.0.1  [required by utop]
  - install base-bytes  base   [required by cppo]
  - install ocamlbuild  0.12.0 [required by react]
  - install cppo        1.6.4  [required by utop]
  - install topkg       0.9.1  [required by react]
  - install lwt         4.1.0  [required by utop]        For the PPX, please install package lwt_ppx
  - install react       1.2.1  [required by utop]
  - install lwt_log     1.1.0  [required by lambda-term]
  - install zed         1.6    [required by lambda-term]
  - install lwt_react   1.1.1  [required by utop]
  - install lambda-term 1.13   [required by utop]
  - install utop        2.2.0
===== 13 to install =====

<><> Gathering sources ><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
[camomile.1.0.1] found in cache
[cppo.1.6.4] found in cache
[lambda-term.1.13] found in cache
[lwt.4.1.0] found in cache
[lwt_log.1.1.0] found in cache
[lwt_react.1.1.1] found in cache
[ocamlbuild.0.12.0] found in cache
[react.1.2.1] found in cache
[result.1.3] found in cache
[topkg.0.9.1] found in cache
[utop.2.2.0] found in cache
[zed.1.6] found in cache

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
-> installed base-bytes.base
-> installed camomile.1.0.1
-> installed cppo.1.6.4
-> installed result.1.3
-> installed ocamlbuild.0.12.0
-> installed lwt.4.1.0
-> installed topkg.0.9.1
-> installed lwt_log.1.1.0
-> installed react.1.2.1
-> installed lwt_react.1.1.1
-> installed zed.1.6
-> installed lambda-term.1.13
[ERROR] The compilation of utop failed at "/home/opam/.opam/4.08/bin/jbuilder build -p utop -j 71".

#=== ERROR while compiling utop.2.2.0 =========================================#
# context              2.0.0~rc3 | linux/x86_64 | ocaml-variants.4.08.0+trunk | git+file:///home/opam/opam-repository
# path                 ~/.opam/4.08/.opam-switch/build/utop.2.2.0
# command              ~/.opam/4.08/bin/jbuilder build -p utop -j 71
# exit-code            1
# env-file             ~/.opam/log/utop-11-266f34.env
# output-file          ~/.opam/log/utop-11-266f34.out
### output ###
#       ocamlc src/lib/.uTop.objs/uTop.{cmi,cmti}
# File "src/lib/uTop.mli", line 267, characters 39-53:
# Warning 3: deprecated: module Lwt_sequence
#  This module is an implementation detail of Lwt. See
#    https://github.com/ocsigen/lwt/issues/361
# File "src/lib/uTop.mli", line 373, characters 38-52:
# Warning 3: deprecated: module Lwt_sequence
#  This module is an implementation detail of Lwt. See
#    https://github.com/ocsigen/lwt/issues/361
#       ocamlc src/lib/.uTop.objs/uTop_styles.{cmo,cmt}
# File "src/lib/uTop_styles.ml", line 83, characters 13-29:
# Warning 3: deprecated: Stdlib.String.lowercase
# Use String.lowercase_ascii instead.
#       ocamlc src/lib/.uTop.objs/uTop.{cmo,cmt}
# File "src/lib/uTop.ml", line 10, characters 5-32:
# Warning 3: deprecated: module CamomileLibraryDyn
# Use CamomileLibraryDefault. Configuration using
# environment variables is ignored. This module just now aliases
# CamomileLibraryDefault
# File "src/lib/uTop.ml", line 36, characters 24-43:
# Warning 3: deprecated: module Lwt_sequence
#  This module is an implementation detail of Lwt. See
#    https://github.com/ocsigen/lwt/issues/361
# File "src/lib/uTop.ml", line 37, characters 31-49:
# Warning 3: deprecated: module Lwt_sequence
#  This module is an implementation detail of Lwt. See
#    https://github.com/ocsigen/lwt/issues/361
# File "src/lib/uTop.ml", line 816, characters 23-42:
# Warning 3: deprecated: module Lwt_sequence
#  This module is an implementation detail of Lwt. See
#    https://github.com/ocsigen/lwt/issues/361
# File "src/lib/uTop.ml", line 817, characters 30-48:
# Warning 3: deprecated: module Lwt_sequence
#  This module is an implementation detail of Lwt. See
#    https://github.com/ocsigen/lwt/issues/361
#       ocamlc src/lib/.uTop.objs/uTop_complete.{cmo,cmt}
# File "src/lib/uTop_complete.ml", line 386, characters 34-51:
# Warning 3: deprecated: Stdlib.String.capitalize
# Use String.capitalize_ascii instead.
#       ocamlc src/lib/.uTop.objs/uTop_main.{cmo,cmt} (exit 2)
# (cd _build/default && /home/opam/.opam/4.08/bin/ocamlc.opt -w -40 -safe-string -g -bin-annot -I src/lib/.uTop.objs -I /home/opam/.opam/4.08/lib/bytes -I /home/opam/.opam/4.08/lib/camomile -I /home/opam/.opam/4.08/lib/camomile/default_config -I /home/opam/.opam/4.08/lib/camomile/dyn -I /home/opam/.opam/4.08/lib/camomile/lib_default -I /home/opam/.opam/4.08/lib/camomile/library -I /home/opam/.opam/4.08/lib/findlib -I /home/opam/.opam/4.08/lib/lambda-term -I /home/opam/.opam/4.08/lib/lwt -I /home/opam/.opam/4.08/lib/lwt/unix -I /home/opam/.opam/4.08/lib/lwt_log -I /home/opam/.opam/4.08/lib/lwt_log/core -I /home/opam/.opam/4.08/lib/lwt_react -I /home/opam/.opam/4.08/lib/ocaml/compiler-libs -I /home/opam/.opam/4.08/lib/ocaml/threads -I /home/opam/.opam/4.08/lib/react -I /home/opam/.opam/4.08/lib/result -I /home/opam/.opam/4.08/lib/zed -no-alias-deps -o src/lib/.uTop.objs/uTop_main.cmo -c -impl src/lib/uTop_main.pp.ml)
# File "src/lib/uTop_main.ml", line 10, characters 5-32:
# Warning 3: deprecated: module CamomileLibraryDyn
# Use CamomileLibraryDefault. Configuration using
# environment variables is ignored. This module just now aliases
# CamomileLibraryDefault
# File "src/lib/uTop_main.ml", line 630, characters 2-21:
# Warning 3: deprecated: module Lwt_sequence
#  This module is an implementation detail of Lwt. See
#    https://github.com/ocsigen/lwt/issues/361
# File "src/lib/uTop_main.ml", line 955, characters 4-23:
# Warning 3: deprecated: module Lwt_sequence
#  This module is an implementation detail of Lwt. See
#    https://github.com/ocsigen/lwt/issues/361
# File "src/lib/uTop_main.ml", line 1197, characters 22-38:
# Error: Unbound value Location.absname



<><> Error report <><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
+- The following actions failed
| - build utop 2.2.0
+- 
+- The following changes have been performed
| - install base-bytes  base
| - install camomile    1.0.1
| - install cppo        1.6.4
| - install lambda-term 1.13
| - install lwt         4.1.0
| - install lwt_log     1.1.0
| - install lwt_react   1.1.1
| - install ocamlbuild  0.12.0
| - install react       1.2.1
| - install result      1.3
| - install topkg       0.9.1
| - install zed         1.6
+- 
# Run eval $(opam env) to update the current shell environment

The former state can be restored with:
    opam switch import "/home/opam/.opam/4.08/.opam-switch/backup/state-20180727202510.export"
31 1532723108 1532723156