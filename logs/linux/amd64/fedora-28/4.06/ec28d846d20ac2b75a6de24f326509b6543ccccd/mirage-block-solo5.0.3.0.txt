$ opam depext -iy -j 2 mirage-block-solo5.0.3.0
# Detecting depexts using vars: arch=x86_64, os=linux, os-distribution=fedora, os-family=fedora
# The following system packages are needed:
kernel-headers
m4
pkgconfig
Name        : kernel-headers
Version     : 4.17.7
Release     : 200.fc28
Architecture: x86_64
Install Date: Mon Jul 23 06:11:13 2018
Group       : Unspecified
Size        : 4593610
License     : GPLv2 and Redistributable, no modification permitted
Signature   : RSA/SHA256, Thu Jul 19 04:17:33 2018, Key ID e08e7e629db62fb1
Source RPM  : kernel-4.17.7-200.fc28.src.rpm
Build Date  : Tue Jul 17 17:25:26 2018
Build Host  : bkernel02.phx2.fedoraproject.org
Relocations : (not relocatable)
Packager    : Fedora Project
Vendor      : Fedora Project
URL         : https://www.kernel.org/
Bug URL     : https://bugz.fedoraproject.org/kernel
Summary     : Header files for the Linux kernel for use by glibc
Description :
Kernel-headers includes the C header files that specify the interface
between the Linux kernel and userspace libraries and programs.  The
header files define structures and constants that are needed for
building most standard programs and are also needed for rebuilding the
glibc package.
Name        : m4
Version     : 1.4.18
Release     : 6.fc28
Architecture: x86_64
Install Date: Mon Jul 30 20:16:11 2018
Group       : Applications/Text
Size        : 372272
License     : GPLv3+
Signature   : RSA/SHA256, Sun Feb 25 11:01:47 2018, Key ID e08e7e629db62fb1
Source RPM  : m4-1.4.18-6.fc28.src.rpm
Build Date  : Sun Feb 25 10:58:14 2018
Build Host  : buildvm-25.phx2.fedoraproject.org
Relocations : (not relocatable)
Packager    : Fedora Project
Vendor      : Fedora Project
URL         : http://www.gnu.org/software/m4/
Bug URL     : https://bugz.fedoraproject.org/m4
Summary     : The GNU macro processor
Description :
A GNU implementation of the traditional UNIX macro processor.  M4 is
useful for writing text files which can be logically parsed, and is used
by many programs as part of their build process.  M4 has built-in
functions for including files, running shell commands, doing arithmetic,
etc.  The autoconf program needs m4 for generating configure scripts, but
not for running configure scripts.

Install m4 if you need a macro processor.
package pkgconfig is not installed
# The following new OS packages need to be installed: pkgconfig
The following command needs to be run through "sudo":
    yum install -y pkgconfig
Fedora 28 - x86_64 - Updates                    9.9 MB/s |  21 MB     00:02    
Last metadata expiration check: 0:00:08 ago on Tue Jul 31 05:23:15 2018.
Package pkgconf-pkg-config-1.4.2-1.fc28.x86_64 is already installed, skipping.
Dependencies resolved.
Nothing to do.
Complete!
The following command needs to be run through "sudo":
    rpm -q --whatprovides pkgconfig
pkgconf-pkg-config-1.4.2-1.fc28.x86_64
# OS packages installation successful
# Now letting OPAM install the packages
The following actions will be performed:
  - install sexplib0           v0.11.0 [required by sexplib]
  - install result             1.3     [required by lwt, fmt, mirage-block-lwt]
  - install ocaml-src          4.06.1  [required by ocaml-freestanding]
  - install base-bytes         base    [required by mirage-block-lwt]
  - install ocamlbuild         0.12.0  [required by mirage-block-solo5]
  - install conf-pkg-config    1.1     [required by ocaml-freestanding]
  - install num                1.1     [required by sexplib]
  - install parsexp            v0.11.0 [required by sexplib]
  - install base               v0.11.1 [required by configurator]
  - install cppo               1.6.4   [required by lwt]
  - install uchar              0.0.2   [required by fmt]
  - install topkg              0.9.1   [required by mirage-block-solo5]
  - install solo5-kernel-ukvm  0.3.0   [required by mirage-solo5]
  - install sexplib            v0.11.0 [required by cstruct]
  - install stdio              v0.11.0 [required by configurator]
  - install lwt                4.1.0   [required by mirage-block-solo5]             For the PPX, please install package lwt_ppx
                                                                                    For Lwt_log and Lwt_daemon, please install package lwt_log
  - install fmt                0.8.5   [required by mirage-block-solo5]
  - install astring            0.8.3   [required by ocb-stubblr]
  - install ocaml-freestanding 0.3.0   [required by mirage-solo5]
  - install cstruct            3.2.1   [required by mirage-block-solo5]
  - install configurator       v0.11.0 [required by io-page]
  - install mirage-device      1.1.0   [required by mirage-block]
  - install logs               0.6.2   [required by mirage-block-lwt, mirage-solo5]
  - install ocb-stubblr        0.1.1   [required by mirage-solo5]
  - install io-page            2.0.1   [required by mirage-block-lwt]
  - install mirage-block       1.1.0   [required by mirage-block-lwt]
  - install mirage-solo5       0.3.0   [required by mirage-block-solo5]
  - install mirage-block-lwt   1.1.0   [required by mirage-block-solo5]
  - install mirage-block-solo5 0.3.0
===== 29 to install =====

<><> Gathering sources ><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
[astring.0.8.3] found in cache
[base.v0.11.1] found in cache
[configurator.v0.11.0] found in cache
[cppo.1.6.4] found in cache
[cstruct.3.2.1] found in cache
[fmt.0.8.5] found in cache
[io-page.2.0.1] found in cache
[logs.0.6.2] found in cache
[lwt.4.1.0] found in cache
[mirage-block.1.1.0] found in cache
[mirage-block-lwt.1.1.0] found in cache
[mirage-block-solo5.0.3.0] found in cache
[mirage-device.1.1.0] found in cache
[mirage-solo5.0.3.0] found in cache
[num.1.1] found in cache
[ocaml-freestanding.0.3.0] found in cache
[ocaml-src.4.06.1] found in cache
[ocamlbuild.0.12.0] found in cache
[ocb-stubblr.0.1.1] found in cache
[parsexp.v0.11.0] found in cache
[result.1.3] found in cache
[sexplib.v0.11.0] found in cache
[sexplib0.v0.11.0] found in cache
[solo5-kernel-ukvm.0.3.0] found in cache
[stdio.v0.11.0] found in cache
[topkg.0.9.1] found in cache
[uchar.0.0.2] found in cache

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
-> installed base-bytes.base
-> installed conf-pkg-config.1.1
[ERROR] The compilation of solo5-kernel-ukvm failed at "/usr/bin/make ukvm".
-> installed cppo.1.6.4
-> installed num.1.1
-> installed ocaml-src.4.06.1
-> installed result.1.3
-> installed ocamlbuild.0.12.0
-> installed lwt.4.1.0
-> installed sexplib0.v0.11.0
-> installed parsexp.v0.11.0
-> installed sexplib.v0.11.0
-> installed base.v0.11.1
-> installed cstruct.3.2.1
-> installed topkg.0.9.1
-> installed stdio.v0.11.0
-> installed configurator.v0.11.0
-> installed astring.0.8.3
-> installed io-page.2.0.1
-> installed uchar.0.0.2
-> installed ocb-stubblr.0.1.1
-> installed fmt.0.8.5
-> installed mirage-device.1.1.0
-> installed mirage-block.1.1.0
-> installed logs.0.6.2
-> installed mirage-block-lwt.1.1.0

#=== ERROR while compiling solo5-kernel-ukvm.0.3.0 ============================#
# context              2.0.0~rc3 | linux/x86_64 | ocaml-base-compiler.4.06.1 | git+file:///home/opam/opam-repository
# path                 ~/.opam/4.06/.opam-switch/build/solo5-kernel-ukvm.0.3.0
# command              /usr/bin/make ukvm
# exit-code            2
# env-file             ~/.opam/log/solo5-kernel-ukvm-10-be0162.env
# output-file          ~/.opam/log/solo5-kernel-ukvm-10-be0162.out
### output ###
# ./configure.sh
# /usr/bin/make -C kernel ukvm
# make[1]: Entering directory '/home/opam/.opam/4.06/.opam-switch/build/solo5-kernel-ukvm.0.3.0/kernel'
# cc -nostdinc -fno-stack-protector -ffreestanding -mno-red-zone -mno-sse -mno-mmx -mno-aes -mno-avx -isystem /home/opam/.opam/4.06/.opam-switch/build/solo5-kernel-ukvm.0.3.0/include-host -std=gnu99 -Wall -Wextra -Werror -O2 -g -D__SOLO5_KERNEL__ -c ukvm/kernel.c -o ukvm/kernel.o
# cc -nostdinc -fno-stack-protector -ffreestanding -mno-red-zone -mno-sse -mno-mmx -mno-aes -mno-avx -isystem /home/opam/.opam/4.06/.opam-switch/build/solo5-kernel-ukvm.0.3.0/include-host -std=gnu99 -Wall -Wextra -Werror -O2 -g -D__SOLO5_KERNEL__ -c ukvm/platform.c -o ukvm/platform.o
# cc -nostdinc -fno-stack-protector -ffreestanding -mno-red-zone -mno-sse -mno-mmx -mno-aes -mno-avx -isystem /home/opam/.opam/4.06/.opam-switch/build/solo5-kernel-ukvm.0.3.0/include-host -std=gnu99 -Wall -Wextra -Werror -O2 -g -D__SOLO5_KERNEL__ -c ukvm/platform_intr.c -o ukvm/platform_intr.o
# cc -nostdinc -fno-stack-protector -ffreestanding -mno-red-zone -mno-sse -mno-mmx -mno-aes -mno-avx -isystem /home/opam/.opam/4.06/.opam-switch/build/solo5-kernel-ukvm.0.3.0/include-host -std=gnu99 -Wall -Wextra -Werror -O2 -g -D__SOLO5_KERNEL__ -c ukvm/time.c -o ukvm/time.o
# cc -nostdinc -fno-stack-protector -ffreestanding -mno-red-zone -mno-sse -mno-mmx -mno-aes -mno-avx -isystem /home/opam/.opam/4.06/.opam-switch/build/solo5-kernel-ukvm.0.3.0/include-host -std=gnu99 -Wall -Wextra -Werror -O2 -g -D__SOLO5_KERNEL__ -c ukvm/platform_lifecycle.c -o ukvm/platform_lifecycle.o
# cc -nostdinc -fno-stack-protector -ffreestanding -mno-red-zone -mno-sse -mno-mmx -mno-aes -mno-avx -isystem /home/opam/.opam/4.06/.opam-switch/build/solo5-kernel-ukvm.0.3.0/include-host -std=gnu99 -Wall -Wextra -Werror -O2 -g -D__SOLO5_KERNEL__ -c ukvm/yield.c -o ukvm/yield.o
# cc -nostdinc -fno-stack-protector -ffreestanding -mno-red-zone -mno-sse -mno-mmx -mno-aes -mno-avx -isystem /home/opam/.opam/4.06/.opam-switch/build/solo5-kernel-ukvm.0.3.0/include-host -std=gnu99 -Wall -Wextra -Werror -O2 -g -D__SOLO5_KERNEL__ -c ukvm/tscclock.c -o ukvm/tscclock.o
# cc -nostdinc -fno-stack-protector -ffreestanding -mno-red-zone -mno-sse -mno-mmx -mno-aes -mno-avx -isystem /home/opam/.opam/4.06/.opam-switch/build/solo5-kernel-ukvm.0.3.0/include-host -std=gnu99 -Wall -Wextra -Werror -O2 -g -D__SOLO5_KERNEL__ -c ukvm/console.c -o ukvm/console.o
# cc -nostdinc -fno-stack-protector -ffreestanding -mno-red-zone -mno-sse -mno-mmx -mno-aes -mno-avx -isystem /home/opam/.opam/4.06/.opam-switch/build/solo5-kernel-ukvm.0.3.0/include-host -std=gnu99 -Wall -Wextra -Werror -O2 -g -D__SOLO5_KERNEL__ -c ukvm/net.c -o ukvm/net.o
# cc -nostdinc -fno-stack-protector -ffreestanding -mno-red-zone -mno-sse -mno-mmx -mno-aes -mno-avx -isystem /home/opam/.opam/4.06/.opam-switch/build/solo5-kernel-ukvm.0.3.0/include-host -std=gnu99 -Wall -Wextra -Werror -O2 -g -D__SOLO5_KERNEL__ -c ukvm/block.c -o ukvm/block.o
# cc -nostdinc -fno-stack-protector -ffreestanding -mno-red-zone -mno-sse -mno-mmx -mno-aes -mno-avx -isystem /home/opam/.opam/4.06/.opam-switch/build/solo5-kernel-ukvm.0.3.0/include-host -std=gnu99 -Wall -Wextra -Werror -O2 -g -D__SOLO5_KERNEL__ -c abort.c -o abort.o
# cc -nostdinc -fno-stack-protector -ffreestanding -mno-red-zone -mno-sse -mno-mmx -mno-aes -mno-avx -isystem /home/opam/.opam/4.06/.opam-switch/build/solo5-kernel-ukvm.0.3.0/include-host -std=gnu99 -Wall -Wextra -Werror -O2 -g -D__SOLO5_KERNEL__ -c cpu_x86_64.c -o cpu_x86_64.o
# cc -nostdinc -fno-stack-protector -ffreestanding -mno-red-zone -mno-sse -mno-mmx -mno-aes -mno-avx -isystem /home/opam/.opam/4.06/.opam-switch/build/solo5-kernel-ukvm.0.3.0/include-host -std=gnu99 -Wall -Wextra -Werror -O2 -g -D__SOLO5_KERNEL__ -DASM_FILE -c cpu_vectors_x86_64.S -o cpu_vectors_x86_64.o
# cc -nostdinc -fno-stack-protector -ffreestanding -mno-red-zone -mno-sse -mno-mmx -mno-aes -mno-avx -isystem /home/opam/.opam/4.06/.opam-switch/build/solo5-kernel-ukvm.0.3.0/include-host -std=gnu99 -Wall -Wextra -Werror -O2 -g -D__SOLO5_KERNEL__ -c ee_printf.c -o ee_printf.o
# cc -nostdinc -fno-stack-protector -ffreestanding -mno-red-zone -mno-sse -mno-mmx -mno-aes -mno-avx -isystem /home/opam/.opam/4.06/.opam-switch/build/solo5-kernel-ukvm.0.3.0/include-host -std=gnu99 -Wall -Wextra -Werror -O2 -g -D__SOLO5_KERNEL__ -c intr.c -o intr.o
# cc -nostdinc -fno-stack-protector -ffreestanding -mno-red-zone -mno-sse -mno-mmx -mno-aes -mno-avx -isystem /home/opam/.opam/4.06/.opam-switch/build/solo5-kernel-ukvm.0.3.0/include-host -std=gnu99 -Wall -Wextra -Werror -O2 -g -D__SOLO5_KERNEL__ -c lib.c -o lib.o
# cc -nostdinc -fno-stack-protector -ffreestanding -mno-red-zone -mno-sse -mno-mmx -mno-aes -mno-avx -isystem /home/opam/.opam/4.06/.opam-switch/build/solo5-kernel-ukvm.0.3.0/include-host -std=gnu99 -Wall -Wextra -Werror -O2 -g -D__SOLO5_KERNEL__ -c mem.c -o mem.o
# mem.c: In function 'mem_init':
# mem.c:57:5: error: array subscript -1 is below array bounds of 'char[]' [-Werror=array-bounds]
#      log(INFO, "Solo5:     unused @ (0x0 - 0x%lx)\n", &_stext[-1]);
#      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# mem.c:58:5: error: array subscript -1 is below array bounds of 'char[]' [-Werror=array-bounds]
#      log(INFO, "Solo5:       text @ (0x%lx - 0x%lx)\n", &_stext, &_etext[-1]);
#      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# mem.c:59:5: error: array subscript -1 is below array bounds of 'char[]' [-Werror=array-bounds]
#      log(INFO, "Solo5:     rodata @ (0x%lx - 0x%lx)\n", &_etext, &_erodata[-1]);
#      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# mem.c:60:5: error: array subscript -1 is below array bounds of 'char[]' [-Werror=array-bounds]
#      log(INFO, "Solo5:       data @ (0x%lx - 0x%lx)\n", &_erodata, &_end[-1]);
#      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# cc1: all warnings being treated as errors
# make[1]: *** [GNUmakefile:98: mem.o] Error 1
# make[1]: Leaving directory '/home/opam/.opam/4.06/.opam-switch/build/solo5-kernel-ukvm.0.3.0/kernel'
# make: *** [GNUmakefile:39: ukvm] Error 2



<><> Error report <><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
+- The following actions failed
| - build solo5-kernel-ukvm 0.3.0
+- 
+- The following changes have been performed (the rest was aborted)
| - install astring          0.8.3
| - install base             v0.11.1
| - install base-bytes       base
| - install conf-pkg-config  1.1
| - install configurator     v0.11.0
| - install cppo             1.6.4
| - install cstruct          3.2.1
| - install fmt              0.8.5
| - install io-page          2.0.1
| - install logs             0.6.2
| - install lwt              4.1.0
| - install mirage-block     1.1.0
| - install mirage-block-lwt 1.1.0
| - install mirage-device    1.1.0
| - install num              1.1
| - install ocaml-src        4.06.1
| - install ocamlbuild       0.12.0
| - install ocb-stubblr      0.1.1
| - install parsexp          v0.11.0
| - install result           1.3
| - install sexplib          v0.11.0
| - install sexplib0         v0.11.0
| - install stdio            v0.11.0
| - install topkg            0.9.1
| - install uchar            0.0.2
+- 

The packages you requested declare the following system dependencies. Please make sure they are installed before retrying:
    kernel-headers

# Run eval $(opam env) to update the current shell environment

The former state can be restored with:
    opam switch import "/home/opam/.opam/4.06/.opam-switch/backup/state-20180731052327.export"
31 1533014591 1533014668