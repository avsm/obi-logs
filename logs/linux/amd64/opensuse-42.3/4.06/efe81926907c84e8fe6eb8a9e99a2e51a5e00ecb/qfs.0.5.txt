$ opam depext -iy -j 2 qfs.0.5
# Detecting depexts using vars: arch=x86_64, os=linux, os-distribution=opensuse, os-family=suse
# The following system packages are needed:
boost-devel
m4
# The following new OS packages need to be installed: boost-devel
The following command needs to be run through "sudo":
    zypper --non-interactive install boost-devel
Loading repository data...
Reading installed packages...
Resolving package dependencies...

The following 38 NEW packages are going to be installed:
  boost-devel boost-license1_54_0 libboost_atomic1_54_0 libboost_chrono1_54_0 libboost_context1_54_0 libboost_date_time1_54_0 libboost_filesystem1_54_0 libboost_graph1_54_0 libboost_graph_parallel1_54_0 libboost_iostreams1_54_0 libboost_locale1_54_0 libboost_log1_54_0 libboost_math1_54_0 libboost_mpi1_54_0 libboost_program_options1_54_0 libboost_python1_54_0 libboost_random1_54_0 libboost_regex1_54_0 libboost_serialization1_54_0 libboost_signals1_54_0 libboost_system1_54_0 libboost_test1_54_0 libboost_thread1_54_0 libboost_timer1_54_0 libboost_wave1_54_0 libfabric1 libibverbs libibverbs1 libicu52_1 libicu52_1-data libmlx5-1 libpsm2-2 libpsm2-compat librdmacm1 libstdc++-devel openmpi-libs rdma-core timezone

38 new packages to install.
Overall download size: 18.9 MiB. Already cached: 0 B. After the operation, additional 136.0 MiB will be used.
Continue? [y/n/...? shows all options] (y): y
Retrieving package boost-license1_54_0-1.54.0-15.15.noarch (1/38),  17.5 KiB (  1.3 KiB unpacked)
Retrieving: boost-license1_54_0-1.54.0-15.15.noarch.rpm [done]
Retrieving package libpsm2-2-10.2.103-2.6.x86_64 (2/38), 160.2 KiB (400.4 KiB unpacked)
Retrieving: libpsm2-2-10.2.103-2.6.x86_64.rpm [done]
Retrieving package libstdc++-devel-4.8-11.16.x86_64 (3/38),   4.8 KiB (   72   B unpacked)
Retrieving: libstdc++-devel-4.8-11.16.x86_64.rpm [done]
Retrieving package libboost_test1_54_0-1.54.0-15.15.x86_64 (4/38), 189.3 KiB (728.5 KiB unpacked)
Retrieving: libboost_test1_54_0-1.54.0-15.15.x86_64.rpm [done]
Retrieving package libboost_system1_54_0-1.54.0-15.15.x86_64 (5/38),  20.6 KiB ( 14.3 KiB unpacked)
Retrieving: libboost_system1_54_0-1.54.0-15.15.x86_64.rpm [.done (8.0 KiB/s)]
Retrieving package libboost_signals1_54_0-1.54.0-15.15.x86_64 (6/38),  40.8 KiB ( 86.9 KiB unpacked)
Retrieving: libboost_signals1_54_0-1.54.0-15.15.x86_64.rpm [done]
Retrieving package libboost_serialization1_54_0-1.54.0-15.15.x86_64 (7/38), 138.0 KiB (751.8 KiB unpacked)
Retrieving: libboost_serialization1_54_0-1.54.0-15.15.x86_64.rpm [done]
Retrieving package libboost_random1_54_0-1.54.0-15.15.x86_64 (8/38),  20.5 KiB ( 10.3 KiB unpacked)
Retrieving: libboost_random1_54_0-1.54.0-15.15.x86_64.rpm [done]
Retrieving package libboost_python1_54_0-1.54.0-15.15.x86_64 (9/38), 104.7 KiB (315.9 KiB unpacked)
Retrieving: libboost_python1_54_0-1.54.0-15.15.x86_64.rpm [done]
Retrieving package libboost_program_options1_54_0-1.54.0-15.15.x86_64 (10/38), 126.1 KiB (456.7 KiB unpacked)
Retrieving: libboost_program_options1_54_0-1.54.0-15.15.x86_64.rpm [done]
Retrieving package libboost_math1_54_0-1.54.0-15.15.x86_64 (11/38), 258.6 KiB (967.5 KiB unpacked)
Retrieving: libboost_math1_54_0-1.54.0-15.15.x86_64.rpm [done]
Retrieving package libboost_iostreams1_54_0-1.54.0-15.15.x86_64 (12/38),  40.3 KiB (103.2 KiB unpacked)
Retrieving: libboost_iostreams1_54_0-1.54.0-15.15.x86_64.rpm [done]
Retrieving package libboost_date_time1_54_0-1.54.0-15.15.x86_64 (13/38),  31.5 KiB ( 70.7 KiB unpacked)
Retrieving: libboost_date_time1_54_0-1.54.0-15.15.x86_64.rpm [done]
Retrieving package libboost_context1_54_0-1.54.0-15.15.x86_64 (14/38),  18.3 KiB (  5.9 KiB unpacked)
Retrieving: libboost_context1_54_0-1.54.0-15.15.x86_64.rpm [done]
Retrieving package libboost_atomic1_54_0-1.54.0-15.15.x86_64 (15/38),  18.3 KiB (  5.8 KiB unpacked)
Retrieving: libboost_atomic1_54_0-1.54.0-15.15.x86_64.rpm [done]
Retrieving package libpsm2-compat-10.2.103-2.6.x86_64 (16/38),  10.1 KiB ( 19.1 KiB unpacked)
Retrieving: libpsm2-compat-10.2.103-2.6.x86_64.rpm [done]
Retrieving package libboost_thread1_54_0-1.54.0-15.15.x86_64 (17/38),  39.6 KiB ( 95.0 KiB unpacked)
Retrieving: libboost_thread1_54_0-1.54.0-15.15.x86_64.rpm [.done (15.6 KiB/s)]
Retrieving package libboost_filesystem1_54_0-1.54.0-15.15.x86_64 (18/38),  47.1 KiB ( 91.3 KiB unpacked)
Retrieving: libboost_filesystem1_54_0-1.54.0-15.15.x86_64.rpm [done]
Retrieving package libboost_chrono1_54_0-1.54.0-15.15.x86_64 (19/38),  24.8 KiB ( 30.5 KiB unpacked)
Retrieving: libboost_chrono1_54_0-1.54.0-15.15.x86_64.rpm [done]
Retrieving package libboost_wave1_54_0-1.54.0-15.15.x86_64 (20/38), 174.3 KiB (  1.1 MiB unpacked)
Retrieving: libboost_wave1_54_0-1.54.0-15.15.x86_64.rpm [done]
Retrieving package libboost_log1_54_0-1.54.0-15.15.x86_64 (21/38), 550.9 KiB (  2.9 MiB unpacked)
Retrieving: libboost_log1_54_0-1.54.0-15.15.x86_64.rpm [done]
Retrieving package libboost_timer1_54_0-1.54.0-15.15.x86_64 (22/38),  22.7 KiB ( 18.4 KiB unpacked)
Retrieving: libboost_timer1_54_0-1.54.0-15.15.x86_64.rpm [done]
Retrieving package libicu52_1-data-52.1-18.1.x86_64 (23/38),   5.2 MiB ( 22.4 MiB unpacked)
Retrieving: libicu52_1-data-52.1-18.1.x86_64.rpm [done]
Retrieving package rdma-core-14-8.1.x86_64 (24/38),  33.9 KiB ( 60.2 KiB unpacked)
Retrieving: rdma-core-14-8.1.x86_64.rpm [.done (12.6 KiB/s)]
Retrieving package timezone-2018e-51.1.x86_64 (25/38), 361.8 KiB (  1.2 MiB unpacked)
Retrieving: timezone-2018e-51.1.x86_64.rpm [done]
Retrieving package libibverbs1-14-8.1.x86_64 (26/38),  37.7 KiB ( 82.1 KiB unpacked)
Retrieving: libibverbs1-14-8.1.x86_64.rpm [done]
Retrieving package libicu52_1-52.1-18.1.x86_64 (27/38),   1.4 MiB (  4.2 MiB unpacked)
Retrieving: libicu52_1-52.1-18.1.x86_64.rpm [done]
Retrieving package libmlx5-1-14-8.1.x86_64 (28/38),  41.4 KiB ( 98.4 KiB unpacked)
Retrieving: libmlx5-1-14-8.1.x86_64.rpm [done]
Retrieving package libibverbs-14-8.1.x86_64 (29/38), 124.5 KiB (374.2 KiB unpacked)
Retrieving: libibverbs-14-8.1.x86_64.rpm [done]
Retrieving package librdmacm1-14-8.1.x86_64 (30/38),  44.2 KiB ( 87.6 KiB unpacked)
Retrieving: librdmacm1-14-8.1.x86_64.rpm [done]
Retrieving package libboost_regex1_54_0-1.54.0-15.15.x86_64 (31/38), 270.3 KiB (  1.1 MiB unpacked)
Retrieving: libboost_regex1_54_0-1.54.0-15.15.x86_64.rpm [done]
Retrieving package libboost_locale1_54_0-1.54.0-15.15.x86_64 (32/38), 227.0 KiB (892.4 KiB unpacked)
Retrieving: libboost_locale1_54_0-1.54.0-15.15.x86_64.rpm [done]
Retrieving package libfabric1-1.4.1-1.5.x86_64 (33/38), 307.7 KiB (871.1 KiB unpacked)
Retrieving: libfabric1-1.4.1-1.5.x86_64.rpm [done]
Retrieving package libboost_graph1_54_0-1.54.0-15.15.x86_64 (34/38), 107.8 KiB (336.7 KiB unpacked)
Retrieving: libboost_graph1_54_0-1.54.0-15.15.x86_64.rpm [.done (15.6 KiB/s)]
Retrieving package openmpi-libs-1.10.6-4.1.x86_64 (35/38),   2.3 MiB (  8.9 MiB unpacked)
Retrieving: openmpi-libs-1.10.6-4.1.x86_64.rpm [done]
Retrieving package libboost_mpi1_54_0-1.54.0-15.15.x86_64 (36/38),  70.6 KiB (271.9 KiB unpacked)
Retrieving: libboost_mpi1_54_0-1.54.0-15.15.x86_64.rpm [done]
Retrieving package libboost_graph_parallel1_54_0-1.54.0-15.15.x86_64 (37/38),  84.7 KiB (292.9 KiB unpacked)
Retrieving: libboost_graph_parallel1_54_0-1.54.0-15.15.x86_64.rpm [done]
Retrieving package boost-devel-1.54.0-15.15.x86_64 (38/38),   6.4 MiB ( 86.8 MiB unpacked)
Retrieving: boost-devel-1.54.0-15.15.x86_64.rpm [.done (14.3 MiB/s)]
Checking for file conflicts: [........done]
( 1/38) Installing: boost-license1_54_0-1.54.0-15.15.noarch [.....done]
( 2/38) Installing: libpsm2-2-10.2.103-2.6.x86_64 [.........done]
( 3/38) Installing: libstdc++-devel-4.8-11.16.x86_64 [.....done]
( 4/38) Installing: libboost_test1_54_0-1.54.0-15.15.x86_64 [.........done]
( 5/38) Installing: libboost_system1_54_0-1.54.0-15.15.x86_64 [....done]
( 6/38) Installing: libboost_signals1_54_0-1.54.0-15.15.x86_64 [.....done]
( 7/38) Installing: libboost_serialization1_54_0-1.54.0-15.15.x86_64 [.........done]
( 8/38) Installing: libboost_random1_54_0-1.54.0-15.15.x86_64 [....done]
( 9/38) Installing: libboost_python1_54_0-1.54.0-15.15.x86_64 [........done]
(10/38) Installing: libboost_program_options1_54_0-1.54.0-15.15.x86_64 [..........done]
(11/38) Installing: libboost_math1_54_0-1.54.0-15.15.x86_64 [...........done]
(12/38) Installing: libboost_iostreams1_54_0-1.54.0-15.15.x86_64 [.....done]
(13/38) Installing: libboost_date_time1_54_0-1.54.0-15.15.x86_64 [....done]
(14/38) Installing: libboost_context1_54_0-1.54.0-15.15.x86_64 [....done]
(15/38) Installing: libboost_atomic1_54_0-1.54.0-15.15.x86_64 [....done]
(16/38) Installing: libpsm2-compat-10.2.103-2.6.x86_64 [......done]
(17/38) Installing: libboost_thread1_54_0-1.54.0-15.15.x86_64 [.....done]
(18/38) Installing: libboost_filesystem1_54_0-1.54.0-15.15.x86_64 [.....done]
(19/38) Installing: libboost_chrono1_54_0-1.54.0-15.15.x86_64 [....done]
(20/38) Installing: libboost_wave1_54_0-1.54.0-15.15.x86_64 [............done]
(21/38) Installing: libboost_log1_54_0-1.54.0-15.15.x86_64 [............done]
(22/38) Installing: libboost_timer1_54_0-1.54.0-15.15.x86_64 [....done]
(23/38) Installing: libicu52_1-data-52.1-18.1.x86_64 [............done]
(24/38) Installing: rdma-core-14-8.1.x86_64 [.........done]
Additional rpm output:
Failed to connect to bus: No such file or directory


(25/38) Installing: timezone-2018e-51.1.x86_64 [............done]
Additional rpm output:
warning: /etc/localtime created as /etc/localtime.rpmnew


(26/38) Installing: libibverbs1-14-8.1.x86_64 [.....done]
(27/38) Installing: libicu52_1-52.1-18.1.x86_64 [............done]
(28/38) Installing: libmlx5-1-14-8.1.x86_64 [.....done]
(29/38) Installing: libibverbs-14-8.1.x86_64 [...........done]
(30/38) Installing: librdmacm1-14-8.1.x86_64 [.....done]
(31/38) Installing: libboost_regex1_54_0-1.54.0-15.15.x86_64 [............done]
(32/38) Installing: libboost_locale1_54_0-1.54.0-15.15.x86_64 [..........done]
(33/38) Installing: libfabric1-1.4.1-1.5.x86_64 [..........done]
(34/38) Installing: libboost_graph1_54_0-1.54.0-15.15.x86_64 [........done]
(35/38) Installing: openmpi-libs-1.10.6-4.1.x86_64 [............done]
(36/38) Installing: libboost_mpi1_54_0-1.54.0-15.15.x86_64 [.......done]
(37/38) Installing: libboost_graph_parallel1_54_0-1.54.0-15.15.x86_64 [........done]
(38/38) Installing: boost-devel-1.54.0-15.15.x86_64 [............done]
# OS packages installation successful
# Now letting OPAM install the packages
The following actions will be performed:
  - install result          1.3    [required by lwt]
  - install base-bytes      base   [required by qfs]
  - install ocamlbuild      0.12.0 [required by qfs]
  - install conf-pkg-config 1.1    [required by conf-boost]
  - install cppo            1.6.4  [required by extlib, lwt]
  - install conf-boost      1      [required by qfs]
  - install lwt             4.1.0  [required by qfs]         For the PPX, please install package lwt_ppx
                                                             For Lwt_log and Lwt_daemon, please install package lwt_log
  - install extlib          1.7.5  [required by qfs]
  - install qfs             0.5
===== 9 to install =====

<><> Gathering sources ><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
[cppo.1.6.4] found in cache
[extlib.1.7.5] found in cache
[lwt.4.1.0] found in cache
[ocamlbuild.0.12.0] found in cache
[qfs.0.5] found in cache
[result.1.3] found in cache

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
-> installed base-bytes.base
-> installed conf-pkg-config.1.1
-> installed conf-boost.1
-> installed cppo.1.6.4
-> installed extlib.1.7.5
-> installed result.1.3
-> installed ocamlbuild.0.12.0
-> installed lwt.4.1.0
[ERROR] The compilation of qfs failed at "/home/opam/.opam/4.06/bin/ocaml setup.ml -build".

#=== ERROR while compiling qfs.0.5 ============================================#
# context              2.0.0 | linux/x86_64 | ocaml-base-compiler.4.06.1 | git+file:///home/opam/opam-repository
# path                 ~/.opam/4.06/.opam-switch/build/qfs.0.5
# command              ~/.opam/4.06/bin/ocaml setup.ml -build
# exit-code            1
# env-file             ~/.opam/log/qfs-12-a4cb4f.env
# output-file          ~/.opam/log/qfs-12-a4cb4f.out
### output ###
# File "./setup.ml", line 318, characters 20-36:
# Warning 3: deprecated: String.lowercase
# Use String.lowercase_ascii instead.
# File "./setup.ml", line 318, characters 42-58:
# Warning 3: deprecated: String.lowercase
# Use String.lowercase_ascii instead.
# File "./setup.ml", line 327, characters 14-30:
# Warning 3: deprecated: String.lowercase
# Use String.lowercase_ascii instead.
# File "./setup.ml", line 327, characters 38-54:
# Warning 3: deprecated: String.lowercase
# Use String.lowercase_ascii instead.
# File "./setup.ml", line 330, characters 25-41:
# Warning 3: deprecated: String.lowercase
# Use String.lowercase_ascii instead.
# File "./setup.ml", line 368, characters 10-26:
# Warning 3: deprecated: String.lowercase
# Use String.lowercase_ascii instead.
# File "./setup.ml", line 474, characters 13-29:
# Warning 3: deprecated: String.lowercase
# Use String.lowercase_ascii instead.
# File "./setup.ml", line 1825, characters 16-33:
# Warning 3: deprecated: String.capitalize
# Use String.capitalize_ascii instead.
# File "./setup.ml", line 1831, characters 16-35:
# Warning 3: deprecated: String.uncapitalize
# Use String.uncapitalize_ascii instead.
# File "setup.ml", line 5847, characters 11-28:
# Warning 3: deprecated: String.capitalize
# Use String.capitalize_ascii instead.
# File "setup.ml", line 5848, characters 11-30:
# Warning 3: deprecated: String.uncapitalize
# Use String.uncapitalize_ascii instead.
# ocamlfind ocamlopt unix.cmxa -I /home/opam/.opam/4.06/lib/ocamlbuild /home/opam/.opam/4.06/lib/ocamlbuild/ocamlbuildlib.cmxa -linkpkg myocamlbuild.ml /home/opam/.opam/4.06/lib/ocamlbuild/ocamlbuild.cmx -o myocamlbuild
# /home/opam/.opam/4.06/bin/ocamlfind ocamlc -g -ccopt -x -ccopt c++ -ccopt -Wall -ccopt -Wno-write-strings -package unix -package lwt.unix -package extlib -package bytes -c src/qfs_stubs.c
# + /home/opam/.opam/4.06/bin/ocamlfind ocamlc -g -ccopt -x -ccopt c++ -ccopt -Wall -ccopt -Wno-write-strings -package unix -package lwt.unix -package extlib -package bytes -c src/qfs_stubs.c
# ocamlfind: [WARNING] Package `threads': Linking problems may arise because of the missing -thread or -vmthread switch
# cc1plus: warning: command line option '-std=gnu99' is valid for C/ObjC but not for C++ [enabled by default]
# src/qfs_stubs.c:4:27: fatal error: kfs/KfsClient.h: No such file or directory
#  #include <kfs/KfsClient.h>
#                            ^
# compilation terminated.
# Command exited with code 2.
# + ocamlfind ocamlopt unix.cmxa -I /home/opam/.opam/4.06/lib/ocamlbuild /home/opam/.opam/4.06/lib/ocamlbuild/ocamlbuildlib.cmxa -linkpkg myocamlbuild.ml /home/opam/.opam/4.06/lib/ocamlbuild/ocamlbuild.cmx -o myocamlbuild
# File "myocamlbuild.ml", line 518, characters 43-62:
# Warning 3: deprecated: Ocamlbuild_plugin.String.uncapitalize
# Use String.uncapitalize_ascii instead.
# File "myocamlbuild.ml", line 531, characters 51-70:
# Warning 3: deprecated: Ocamlbuild_plugin.String.uncapitalize
# Use String.uncapitalize_ascii instead.
# E: Failure("Command ''/home/opam/.opam/4.06/bin/ocamlbuild' src/libqfs_stubs.a src/dllqfs_stubs.so src/qfs.cma src/qfs.cmxa src/qfs.a src/qfs.cmxs src/example.native -use-ocamlfind -tag debug' terminated with error code 10")



<><> Error report <><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
+- The following actions failed
| - build qfs 0.5
+- 
+- The following changes have been performed
| - install base-bytes      base
| - install conf-boost      1
| - install conf-pkg-config 1.1
| - install cppo            1.6.4
| - install extlib          1.7.5
| - install lwt             4.1.0
| - install ocamlbuild      0.12.0
| - install result          1.3
+- 

<><> qfs.0.5 troubleshooting ><><><><><><><><><><><><><><><><><><><><><><><><><>
=> This package requires QFS development files installed, consult https://quantcast.github.io/qfs/
     and https://github.com/quantcast/qfs/wiki/Developer-Documentation on how to build manually.

     Tentative instructions for Debian : https://gist.githubusercontent.com/ygrek/7bb217d6ab7b25a765b7/raw
# Run eval $(opam env) to update the current shell environment

The former state can be restored with:
    opam switch import "/home/opam/.opam/4.06/.opam-switch/backup/state-20180819055611.export"
31 1534657939 1534658190