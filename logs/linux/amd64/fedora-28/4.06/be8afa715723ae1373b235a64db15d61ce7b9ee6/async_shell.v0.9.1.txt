$ opam depext -iy -j 2 async_shell.v0.9.1
# Detecting depexts using vars: arch=x86_64, os=linux, os-distribution=fedora, os-family=fedora
# The following system packages are needed:
gcc-c++
m4
Name        : gcc-c++
Version     : 8.1.1
Release     : 5.fc28
Architecture: x86_64
Install Date: Mon Jul 23 06:11:21 2018
Group       : Development/Languages
Size        : 30589214
License     : GPLv3+ and GPLv3+ with exceptions and GPLv2+ with exceptions and LGPLv2+ and BSD
Signature   : RSA/SHA256, Mon Jul 16 13:05:44 2018, Key ID e08e7e629db62fb1
Source RPM  : gcc-8.1.1-5.fc28.src.rpm
Build Date  : Thu Jul 12 20:08:05 2018
Build Host  : buildvm-31.phx2.fedoraproject.org
Relocations : (not relocatable)
Packager    : Fedora Project
Vendor      : Fedora Project
URL         : http://gcc.gnu.org
Bug URL     : https://bugz.fedoraproject.org/gcc
Summary     : C++ support for GCC
Description :
This package adds C++ support to the GNU Compiler Collection.
It includes support for most of the current C++ specification,
including templates and exception handling.
Name        : m4
Version     : 1.4.18
Release     : 6.fc28
Architecture: x86_64
Install Date: Mon Jul 23 20:13:48 2018
Group       : Applications/Text
Size        : 372272
License     : GPLv3+
Signature   : RSA/SHA256, Sun Feb 25 11:01:47 2018, Key ID e08e7e629db62fb1
Source RPM  : m4-1.4.18-6.fc28.src.rpm
Build Date  : Sun Feb 25 10:58:14 2018
Build Host  : buildvm-25.phx2.fedoraproject.org
Relocations : (not relocatable)
Packager    : Fedora Project
Vendor      : Fedora Project
URL         : http://www.gnu.org/software/m4/
Bug URL     : https://bugz.fedoraproject.org/m4
Summary     : The GNU macro processor
Description :
A GNU implementation of the traditional UNIX macro processor.  M4 is
useful for writing text files which can be logically parsed, and is used
by many programs as part of their build process.  M4 has built-in
functions for including files, running shell commands, doing arithmetic,
etc.  The autoconf program needs m4 for generating configure scripts, but
not for running configure scripts.

Install m4 if you need a macro processor.
# All required OS packages found.
# Now letting OPAM install the packages
The following actions will be performed:
  - install   num                     1.1                      [required by sexplib]
  - remove    dune                    1.0.1                    [conflicts with jbuilder]
  - install   ocamlbuild              0.12.0                   [required by ppx_driver]
  - downgrade jbuilder                transition to 1.0+beta17 [required by async_shell]
  - install   spawn                   v0.9.0                   [required by core]
  - install   sexplib                 v0.9.3                   [required by core_extended]
  - install   result                  1.3                      [required by ocaml-migrate-parsetree]
  - install   re                      1.7.3                    [required by ppx_expect]
  - install   ppx_traverse_builtins   v0.9.0                   [required by ppx_core, ppx_metaquot]
  - install   ppx_derivers            1.0                      [required by ppx_type_conv]
  - install   octavius                1.2.0                    [required by ppx_js_style]
  - install   ocaml-compiler-libs     v0.9.0                   [required by ppx_core]
  - install   jane-street-headers     v0.9.0                   [required by core_kernel]
  - install   base                    v0.9.4                   [required by core_kernel, core]
  - install   ocaml-migrate-parsetree 1.0.7                    [required by async_shell]
  - install   typerep                 v0.9.0                   [required by core_kernel]
  - install   stdio                   v0.9.1                   [required by core_kernel, core]
  - install   ppx_ast                 v0.9.2                   [required by ppx_core]
  - install   ppx_core                v0.9.3                   [required by ppx_assert, ppx_inline_test]
  - install   ppx_optcomp             v0.9.0                   [required by ppx_driver]
  - install   ppx_driver              v0.9.2                   [required by async_shell]
  - install   variantslib             v0.9.0                   [required by core_kernel]
  - install   ppx_metaquot            v0.9.0                   [required by ppx_assert, ppx_inline_test]
  - install   ppx_let                 v0.9.0                   [required by ppx_jane]
  - install   ppx_here                v0.9.1                   [required by ppx_assert, ppx_jane]
  - install   fieldslib               v0.9.0                   [required by core_extended]
  - install   ppx_type_conv           v0.9.1                   [required by ppx_assert]
  - install   ppx_pipebang            v0.9.0                   [required by ppx_jane]
  - install   ppx_optional            v0.9.0                   [required by ppx_jane]
  - install   ppx_js_style            v0.9.0                   [required by ppx_base]
  - install   ppx_inline_test         v0.9.2                   [required by core_kernel]
  - install   ppx_fail                v0.9.0                   [required by ppx_jane]
  - install   ppx_variants_conv       v0.9.0                   [required by bin_prot, ppx_jane]
  - install   ppx_typerep_conv        v0.9.0                   [required by ppx_jane]
  - install   ppx_traverse            v0.9.0                   [required by ppx_custom_printf, ppx_expect]
  - install   ppx_sexp_conv           v0.9.0                   [required by core_kernel]
  - install   ppx_fields_conv         v0.9.0                   [required by bin_prot, ppx_jane]
  - install   ppx_enumerate           v0.9.0                   [required by ppx_base]
  - install   ppx_compare             v0.9.0                   [required by bin_prot, ppx_assert]
  - install   ppx_bench               v0.9.1                   [required by ppx_jane]
  - install   ppx_sexp_value          v0.9.0                   [required by ppx_jane]
  - install   ppx_sexp_message        v0.9.0                   [required by core_kernel]
  - install   ppx_custom_printf       v0.9.0                   [required by bin_prot, ppx_jane]
  - install   ppx_hash                v0.9.0                   [required by core_kernel]
  - install   ppx_assert              v0.9.0                   [required by core_kernel, core]
  - install   bin_prot                v0.9.2                   [required by core_extended]
  - install   ppx_base                v0.9.0                   [required by core_kernel]
  - install   ppx_expect              v0.9.0                   [required by ppx_jane]
  - install   ppx_bin_prot            v0.9.0                   [required by ppx_jane]
  - install   configurator            v0.9.1                   [required by core_kernel, core]
  - install   ppx_jane                v0.9.0                   [required by async_shell]
  - install   core_kernel             v0.9.1                   [required by core_extended]
  - install   re2                     v0.9.1                   [required by core_extended]
  - install   core                    v0.9.2                   [required by async_shell]
  - install   async_kernel            v0.9.0                   [required by async]
  - install   textutils               v0.9.0                   [required by core_extended]
  - install   async_unix              v0.9.1                   [required by async]
  - install   async_rpc_kernel        v0.9.0                   [required by async_extra]
  - install   core_extended           v0.9.1                   [required by async_shell]
  - install   async_extra             v0.9.0                   [required by async]
  - install   async                   v0.9.0                   [required by async_shell]
  - install   async_shell             v0.9.1
===== 60 to install | 1 to downgrade | 1 to remove =====

<><> Gathering sources ><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
[async.v0.9.0] found in cache
[async_extra.v0.9.0] found in cache
[async_kernel.v0.9.0] found in cache
[async_rpc_kernel.v0.9.0] found in cache
[async_shell.v0.9.1] found in cache
[async_unix.v0.9.1] found in cache
[base.v0.9.4] found in cache
[bin_prot.v0.9.2] found in cache
[configurator.v0.9.1] found in cache
[core.v0.9.2] found in cache
[core_extended.v0.9.1] found in cache
[core_kernel.v0.9.1] found in cache
[fieldslib.v0.9.0] found in cache
[jane-street-headers.v0.9.0] found in cache
[jbuilder.1.0+beta17] found in cache
[num.1.1] found in cache
[ocaml-compiler-libs.v0.9.0] found in cache
[ocaml-migrate-parsetree.1.0.7] found in cache
[ocamlbuild.0.12.0] found in cache
[octavius.1.2.0] found in cache
[ppx_assert.v0.9.0] found in cache
[ppx_ast.v0.9.2] found in cache
[ppx_base.v0.9.0] found in cache
[ppx_bench.v0.9.1] found in cache
[ppx_bin_prot.v0.9.0] found in cache
[ppx_compare.v0.9.0] found in cache
[ppx_core.v0.9.3] found in cache
[ppx_custom_printf.v0.9.0] found in cache
[ppx_derivers.1.0] found in cache
[ppx_driver.v0.9.2] found in cache
[ppx_enumerate.v0.9.0] found in cache
[ppx_expect.v0.9.0] found in cache
[ppx_fail.v0.9.0] found in cache
[ppx_fields_conv.v0.9.0] found in cache
[ppx_hash.v0.9.0] found in cache
[ppx_here.v0.9.1] found in cache
[ppx_inline_test.v0.9.2] found in cache
[ppx_jane.v0.9.0] found in cache
[ppx_js_style.v0.9.0] found in cache
[ppx_let.v0.9.0] found in cache
[ppx_metaquot.v0.9.0] found in cache
[ppx_optcomp.v0.9.0] found in cache
[ppx_optional.v0.9.0] found in cache
[ppx_pipebang.v0.9.0] found in cache
[ppx_sexp_conv.v0.9.0] found in cache
[ppx_sexp_message.v0.9.0] found in cache
[ppx_sexp_value.v0.9.0] found in cache
[ppx_traverse.v0.9.0] found in cache
[ppx_traverse_builtins.v0.9.0] found in cache
[ppx_type_conv.v0.9.1] found in cache
[ppx_typerep_conv.v0.9.0] found in cache
[ppx_variants_conv.v0.9.0] found in cache
[re.1.7.3] found in cache
[re2.v0.9.1] found in cache
[result.1.3] found in cache
[sexplib.v0.9.3] found in cache
[spawn.v0.9.0] found in cache
[stdio.v0.9.1] found in cache
[textutils.v0.9.0] found in cache
[typerep.v0.9.0] found in cache
[variantslib.v0.9.0] found in cache

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
-> removed   jbuilder.transition
-> removed   dune.1.0.1
-> installed jbuilder.1.0+beta17
-> installed jane-street-headers.v0.9.0
-> installed num.1.1
-> installed ocaml-compiler-libs.v0.9.0
-> installed ocamlbuild.0.12.0
-> installed octavius.1.2.0
-> installed ppx_derivers.1.0
-> installed ppx_traverse_builtins.v0.9.0
-> installed re.1.7.3
-> installed result.1.3
-> installed sexplib.v0.9.3
-> installed ocaml-migrate-parsetree.1.0.7
-> installed base.v0.9.4
-> installed ppx_ast.v0.9.2
-> installed spawn.v0.9.0
-> installed stdio.v0.9.1
-> installed typerep.v0.9.0
-> installed ppx_core.v0.9.3
-> installed ppx_optcomp.v0.9.0
-> installed ppx_driver.v0.9.2
-> installed fieldslib.v0.9.0
-> installed ppx_here.v0.9.1
-> installed ppx_let.v0.9.0
-> installed ppx_metaquot.v0.9.0
-> installed ppx_fail.v0.9.0
-> installed ppx_inline_test.v0.9.2
-> installed ppx_js_style.v0.9.0
-> installed ppx_optional.v0.9.0
-> installed ppx_pipebang.v0.9.0
-> installed ppx_type_conv.v0.9.1
-> installed ppx_bench.v0.9.1
-> installed ppx_compare.v0.9.0
-> installed ppx_enumerate.v0.9.0
-> installed ppx_fields_conv.v0.9.0
-> installed ppx_sexp_conv.v0.9.0
-> installed ppx_assert.v0.9.0
-> installed ppx_hash.v0.9.0
-> installed ppx_sexp_message.v0.9.0
-> installed ppx_sexp_value.v0.9.0
-> installed ppx_traverse.v0.9.0
-> installed ppx_base.v0.9.0
-> installed configurator.v0.9.1
-> installed ppx_typerep_conv.v0.9.0
-> installed variantslib.v0.9.0
-> installed ppx_custom_printf.v0.9.0
-> installed ppx_variants_conv.v0.9.0
-> installed bin_prot.v0.9.2
-> installed ppx_expect.v0.9.0
-> installed ppx_bin_prot.v0.9.0
-> installed ppx_jane.v0.9.0
-> installed core_kernel.v0.9.1
-> installed async_kernel.v0.9.0
-> installed async_rpc_kernel.v0.9.0
-> installed core.v0.9.2
-> installed async_unix.v0.9.1
-> installed async_extra.v0.9.0
-> installed re2.v0.9.1
-> installed textutils.v0.9.0
-> installed async.v0.9.0
[ERROR] The compilation of core_extended failed at "/home/opam/.opam/4.06/bin/jbuilder build -p core_extended -j 71".

#=== ERROR while compiling core_extended.v0.9.1 ===============================#
# context              2.0.0~rc3 | linux/x86_64 | ocaml-base-compiler.4.06.1 | git+file:///home/opam/opam-repository
# path                 ~/.opam/4.06/.opam-switch/build/core_extended.v0.9.1
# command              ~/.opam/4.06/bin/jbuilder build -p core_extended -j 71
# exit-code            1
# env-file             ~/.opam/log/core_extended-10-20b9b8.env
# output-file          ~/.opam/log/core_extended-10-20b9b8.out
### output ###
#       ocamlc src/core_extended.{cmi,cmo,cmt}
#     ocamlopt src/core_extended.{cmx,o}
#         bash src/config_ext.h
#       ocamlc src/extended_int_stubs.o
#       ocamlc src/posix_clock_stubs.o
#       ocamlc src/malloc_stubs.o
#       ocamlc src/unix_pseudo_terminal_stubs.o
#       ocamlc src/extended_unix_stubs.o (exit 2)
# (cd _build/default/src && /home/opam/.opam/4.06/bin/ocamlc.opt -g -I /home/opam/.opam/4.06/lib/base -I /home/opam/.opam/4.06/lib/base/caml -I /home/opam/.opam/4.06/lib/base/shadow_stdlib -I /home/opam/.opam/4.06/lib/bin_prot -I /home/opam/.opam/4.06/lib/bin_prot/shape -I /home/opam/.opam/4.06/lib/core -I /home/opam/.opam/4.06/lib/core_kernel -I /home/opam/.opam/4.06/lib/core_kernel/base_for_tests -I /home/opam/.opam/4.06/lib/fieldslib -I /home/opam/.opam/4.06/lib/jane-street-headers -I /home/opam/.opam/4.06/lib/num -I /home/opam/.opam/4.06/lib/ocaml -I /home/opam/.opam/4.06/lib/ocaml/threads -I /home/opam/.opam/4.06/lib/ppx_assert/runtime-lib -I /home/opam/.opam/4.06/lib/ppx_bench/runtime-lib -I /home/opam/.opam/4.06/lib/ppx_compare/runtime-lib -I /home/opam/.opam/4.06/lib/ppx_expect/collector -I /home/opam/.opam/4.06/lib/ppx_expect/common -I /home/opam/.opam/4.06/lib/ppx_expect/config -I /home/opam/.opam/4.06/lib/ppx_hash/runtime-lib -I /home/opam/.opam/4.06/lib/ppx_inline_test/config -I /home/opam/.opam/4.06/lib/ppx_inline_test/runtime-lib -I /home/opam/.opam/4.06/lib/re2 -I /home/opam/.opam/4.06/lib/re2/c -I /home/opam/.opam/4.06/lib/sexplib -I /home/opam/.opam/4.06/lib/sexplib/0 -I /home/opam/.opam/4.06/lib/sexplib/num -I /home/opam/.opam/4.06/lib/sexplib/unix -I /home/opam/.opam/4.06/lib/spawn -I /home/opam/.opam/4.06/lib/stdio -I /home/opam/.opam/4.06/lib/textutils -I /home/opam/.opam/4.06/lib/typerep -I /home/opam/.opam/4.06/lib/variantslib -ccopt -g -o extended_unix_stubs.o extended_unix_stubs.c)
# extended_unix_stubs.c: In function 'quota_query':
# /home/opam/.opam/4.06/lib/ocaml/caml/mlvalues.h:258:24: warning: passing argument 1 of 'quotactl' makes integer from pointer without a cast [-Wint-conversion]
#  #define String_val(x) ((char *) Bp_val(x))
# extended_unix_stubs.c:107:16: note: in definition of macro 'quota_control'
#       quotactl((device), (cmd), (id), (parg))
#                 ^~~~~~
# extended_unix_stubs.c:156:21: note: in expansion of macro 'String_val'
#    if (quota_control(String_val(v_path), cmd, id, (caddr_t)&quota))
#                      ^~~~~~~~~~
# In file included from extended_unix_stubs.c:19:
# /usr/include/sys/quota.h:130:26: note: expected 'int' but argument is of type 'char *'
#  extern int quotactl (int __cmd, const char *__special, int __id,
#                       ~~~~^~~~~
# extended_unix_stubs.c:107:25: warning: passing argument 2 of 'quotactl' makes pointer from integer without a cast [-Wint-conversion]
#       quotactl((device), (cmd), (id), (parg))
#                          ^~~~~
# extended_unix_stubs.c:156:7: note: in expansion of macro 'quota_control'
#    if (quota_control(String_val(v_path), cmd, id, (caddr_t)&quota))
#        ^~~~~~~~~~~~~
# In file included from extended_unix_stubs.c:19:
# /usr/include/sys/quota.h:130:45: note: expected 'const char *' but argument is of type 'int'
#  extern int quotactl (int __cmd, const char *__special, int __id,
#                                  ~~~~~~~~~~~~^~~~~~~~~
# extended_unix_stubs.c:109:44: error: 'struct dqblk' has no member named 'dqb_curbytes'; did you mean 'dqb_curinodes'?
#  #  define QUOTA_SPACE_USED(quota) ((quota).dqb_curbytes)
#                                             ^~~~~~~~~~~~
# extended_unix_stubs.c:159:55: note: in expansion of macro 'QUOTA_SPACE_USED'
#    bytes_used = QUOTA_BYTES_PER_SPACE_UNIT * (int64_t) QUOTA_SPACE_USED(quota);
#                                                        ^~~~~~~~~~~~~~~~
# extended_unix_stubs.c: In function 'quota_modify':
# /home/opam/.opam/4.06/lib/ocaml/caml/mlvalues.h:258:24: warning: passing argument 1 of 'quotactl' makes integer from pointer without a cast [-Wint-conversion]
#  #define String_val(x) ((char *) Bp_val(x))
# extended_unix_stubs.c:107:16: note: in definition of macro 'quota_control'
#       quotactl((device), (cmd), (id), (parg))
#                 ^~~~~~
# extended_unix_stubs.c:204:21: note: in expansion of macro 'String_val'
#    if (quota_control(String_val(v_path), cmd, id, (caddr_t)&quota))
#                      ^~~~~~~~~~
# In file included from extended_unix_stubs.c:19:
# /usr/include/sys/quota.h:130:26: note: expected 'int' but argument is of type 'char *'
#  extern int quotactl (int __cmd, const char *__special, int __id,
#                       ~~~~^~~~~
# extended_unix_stubs.c:107:25: warning: passing argument 2 of 'quotactl' makes pointer from integer without a cast [-Wint-conversion]
#       quotactl((device), (cmd), (id), (parg))
#                          ^~~~~
# extended_unix_stubs.c:204:7: note: in expansion of macro 'quota_control'
#    if (quota_control(String_val(v_path), cmd, id, (caddr_t)&quota))
#        ^~~~~~~~~~~~~
# In file included from extended_unix_stubs.c:19:
# /usr/include/sys/quota.h:130:45: note: expected 'const char *' but argument is of type 'int'
#  extern int quotactl (int __cmd, const char *__special, int __id,
#                                  ~~~~~~~~~~~~^~~~~~~~~
# 
# Waiting for 1 job to finish.



<><> Error report <><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
+- The following actions failed
| - build core_extended v0.9.1
+- 
+- The following changes have been performed (the rest was aborted)
| - remove    dune                    1.0.1
| - downgrade jbuilder                transition to 1.0+beta17
| - install   async                   v0.9.0
| - install   async_extra             v0.9.0
| - install   async_kernel            v0.9.0
| - install   async_rpc_kernel        v0.9.0
| - install   async_unix              v0.9.1
| - install   base                    v0.9.4
| - install   bin_prot                v0.9.2
| - install   configurator            v0.9.1
| - install   core                    v0.9.2
| - install   core_kernel             v0.9.1
| - install   fieldslib               v0.9.0
| - install   jane-street-headers     v0.9.0
| - install   num                     1.1
| - install   ocaml-compiler-libs     v0.9.0
| - install   ocaml-migrate-parsetree 1.0.7
| - install   ocamlbuild              0.12.0
| - install   octavius                1.2.0
| - install   ppx_assert              v0.9.0
| - install   ppx_ast                 v0.9.2
| - install   ppx_base                v0.9.0
| - install   ppx_bench               v0.9.1
| - install   ppx_bin_prot            v0.9.0
| - install   ppx_compare             v0.9.0
| - install   ppx_core                v0.9.3
| - install   ppx_custom_printf       v0.9.0
| - install   ppx_derivers            1.0
| - install   ppx_driver              v0.9.2
| - install   ppx_enumerate           v0.9.0
| - install   ppx_expect              v0.9.0
| - install   ppx_fail                v0.9.0
| - install   ppx_fields_conv         v0.9.0
| - install   ppx_hash                v0.9.0
| - install   ppx_here                v0.9.1
| - install   ppx_inline_test         v0.9.2
| - install   ppx_jane                v0.9.0
| - install   ppx_js_style            v0.9.0
| - install   ppx_let                 v0.9.0
| - install   ppx_metaquot            v0.9.0
| - install   ppx_optcomp             v0.9.0
| - install   ppx_optional            v0.9.0
| - install   ppx_pipebang            v0.9.0
| - install   ppx_sexp_conv           v0.9.0
| - install   ppx_sexp_message        v0.9.0
| - install   ppx_sexp_value          v0.9.0
| - install   ppx_traverse            v0.9.0
| - install   ppx_traverse_builtins   v0.9.0
| - install   ppx_type_conv           v0.9.1
| - install   ppx_typerep_conv        v0.9.0
| - install   ppx_variants_conv       v0.9.0
| - install   re                      1.7.3
| - install   re2                     v0.9.1
| - install   result                  1.3
| - install   sexplib                 v0.9.3
| - install   spawn                   v0.9.0
| - install   stdio                   v0.9.1
| - install   textutils               v0.9.0
| - install   typerep                 v0.9.0
| - install   variantslib             v0.9.0
+- 
# Run eval $(opam env) to update the current shell environment

The former state can be restored with:
    opam switch import "/home/opam/.opam/4.06/.opam-switch/backup/state-20180724030726.export"
31 1532401644 1532401919