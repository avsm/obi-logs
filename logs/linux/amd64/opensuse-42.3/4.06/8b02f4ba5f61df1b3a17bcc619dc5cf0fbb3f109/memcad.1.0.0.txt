$ opam depext -iy -j 2 memcad.1.0.0
# Detecting depexts using vars: arch=x86_64, os=linux, os-distribution=opensuse, os-family=suse
# The following system packages are needed:
gmp-devel
m4
mpfr-devel
ncurses-devel
which
# The following new OS packages need to be installed: gmp-devel mpfr-devel
The following command needs to be run through "sudo":
    zypper --non-interactive install gmp-devel mpfr-devel
Retrieving repository 'OSS Update' metadata [..done]
Building repository 'OSS Update' cache [....done]
Loading repository data...
Reading installed packages...
Resolving package dependencies...

The following 3 NEW packages are going to be installed:
  gmp-devel libgmpxx4 mpfr-devel

3 new packages to install.
Overall download size: 1.8 MiB. Already cached: 0 B. After the operation, additional 10.8 MiB will be used.
Continue? [y/n/...? shows all options] (y): y
Retrieving package libgmpxx4-5.1.3-7.15.x86_64 (1/3),  16.1 KiB ( 26.5 KiB unpacked)
Retrieving: libgmpxx4-5.1.3-7.15.x86_64.rpm [done]
Retrieving package gmp-devel-5.1.3-7.15.x86_64 (2/3),   1.2 MiB (  7.1 MiB unpacked)
Retrieving: gmp-devel-5.1.3-7.15.x86_64.rpm [done]
Retrieving package mpfr-devel-3.1.2-13.15.x86_64 (3/3), 670.1 KiB (  3.7 MiB unpacked)
Retrieving: mpfr-devel-3.1.2-13.15.x86_64.rpm [done]
Checking for file conflicts: [.......done]
(1/3) Installing: libgmpxx4-5.1.3-7.15.x86_64 [....done]
(2/3) Installing: gmp-devel-5.1.3-7.15.x86_64 [............done]
(3/3) Installing: mpfr-devel-3.1.2-13.15.x86_64 [............done]
# OS packages installation successful
# Now letting OPAM install the packages
The following actions will be performed:
  - install mlbdd              0.6      [required by setr]
  - install conf-gmp           1        [required by mlgmpidl]
  - install base-bytes         base     [required by ounit, qtest]
  - install conf-perl          1        [required by apron]
  - install conf-pkg-config    1.1      [required by conf-ncurses]
  - install num                1.1      [required by batteries]
  - install camlidl            1.05     [required by apron]
  - install obuild             0.1.10   [required by memcad]
  - install conf-binutils      0.2      [required by clangml]
  - install conf-which         1        [required by conf-graphviz]
  - install ocamlbuild         0.12.0   [required by parmap, apron, ounit, setr]
  - install conf-mpfr          1        [required by mlgmpidl]
  - install cppo               1.6.4    [required by setr]
  - install ANSITerminal       0.8      [required by clangml]
  - install conf-ncurses       1        [required by clangml]
  - install bdd                0.3      [required by memcad]
  - install conf-wget          1        [required by clangml]
  - install conf-graphviz      0.1      [required by memcad]
  - install parmap             1.0-rc10 [required by memcad]
  - install ounit              2.0.8    [required by memcad]
  - install ocamlmod           0.0.9    [required by oasis]
  - install ocamlify           0.0.1    [required by oasis]
  - install dolog              3.0      [required by clangml-transforms]
  - install camlp4             4.06+1   [required by clangml]
  - install batteries          2.8.0    [required by clangml-transforms]
  - install mlgmpidl           1.2.7    [required by apron]
  - install setr               0.1.1    [required by memcad]
  - install qcheck             0.8      [required by qtest]
  - install oasis              0.4.11   [required by deriving]
  - install apron              20160125 [required by memcad]
  - install qtest              2.9      [required by memcad]
  - install deriving           0.8.1    [required by clangml-transforms]
  - install clangml            3.9.1.2  [required by clangml-transforms]
  - install clangml-transforms 0.23     [required by memcad]
  - install memcad             1.0.0
===== 35 to install =====

<><> Gathering sources ><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
[ANSITerminal.0.8] found in cache
[apron.20160125] found in cache
[batteries.2.8.0] found in cache
[bdd.0.3] found in cache
[camlidl.1.05] found in cache
[camlp4.4.06+1] found in cache
[clangml.3.9.1.2] found in cache
[clangml-transforms.0.23] found in cache
[cppo.1.6.4] found in cache
[deriving.0.8.1] found in cache
[dolog.3.0] found in cache
[memcad.1.0.0] found in cache
[mlbdd.0.6] found in cache
[mlgmpidl.1.2.7] found in cache
[num.1.1] found in cache
[oasis.0.4.11] found in cache
[obuild.0.1.10] found in cache
[ocamlbuild.0.12.0] found in cache
[ocamlify.0.0.1] found in cache
[ocamlmod.0.0.9] found in cache
[ounit.2.0.8] found in cache
[parmap.1.0-rc10] found in cache
[qcheck.0.8] found in cache
[qtest.2.9] found in cache
[setr.0.1.1] found in cache

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
-> installed base-bytes.base
-> installed ANSITerminal.0.8
-> installed camlidl.1.05
-> installed conf-binutils.0.2
-> installed conf-gmp.1
-> installed conf-perl.1
-> installed conf-pkg-config.1.1
-> installed conf-ncurses.1
-> installed conf-which.1
[ERROR] The compilation of conf-graphviz failed at "/usr/bin/which dot".
-> installed conf-mpfr.1
[ERROR] The compilation of conf-wget failed at "/usr/bin/which wget".
-> installed cppo.1.6.4
-> installed mlbdd.0.6
-> installed num.1.1
-> installed obuild.0.1.10
-> installed bdd.0.3
-> installed ocamlbuild.0.12.0
-> installed batteries.2.8.0
-> installed dolog.3.0
-> installed mlgmpidl.1.2.7
-> installed apron.20160125
-> installed ocamlify.0.0.1
-> installed ocamlmod.0.0.9
-> installed camlp4.4.06+1
-> installed ounit.2.0.8
-> installed parmap.1.0-rc10
-> installed qcheck.0.8
-> installed qtest.2.9
-> installed setr.0.1.1
-> installed oasis.0.4.11
-> installed deriving.0.8.1

#=== ERROR while compiling conf-wget.1 ========================================#
# context              2.0.0~rc3 | linux/x86_64 | ocaml-base-compiler.4.06.1 | git+file:///home/opam/opam-repository
# path                 ~/.opam/4.06/.opam-switch/build/conf-wget.1
# command              /usr/bin/which wget
# exit-code            1
# env-file             ~/.opam/log/conf-wget-11-6c6bb7.env
# output-file          ~/.opam/log/conf-wget-11-6c6bb7.out
### output ###
# /usr/bin/which: no wget in (/home/opam/.opam/4.06/bin:/home/opam/.opam/plugins/bin:/home/opam/.opam/4.06/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin)


#=== ERROR while compiling conf-graphviz.0.1 ==================================#
# context              2.0.0~rc3 | linux/x86_64 | ocaml-base-compiler.4.06.1 | git+file:///home/opam/opam-repository
# path                 ~/.opam/4.06/.opam-switch/build/conf-graphviz.0.1
# command              /usr/bin/which dot
# exit-code            1
# env-file             ~/.opam/log/conf-graphviz-11-ef0aa7.env
# output-file          ~/.opam/log/conf-graphviz-11-ef0aa7.out
### output ###
# /usr/bin/which: no dot in (/home/opam/.opam/4.06/bin:/home/opam/.opam/plugins/bin:/home/opam/.opam/4.06/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin)



<><> Error report <><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
+- The following actions failed
| - build conf-graphviz 0.1
| - build conf-wget     1
+- 
+- The following changes have been performed (the rest was aborted)
| - install ANSITerminal    0.8
| - install apron           20160125
| - install base-bytes      base
| - install batteries       2.8.0
| - install bdd             0.3
| - install camlidl         1.05
| - install camlp4          4.06+1
| - install conf-binutils   0.2
| - install conf-gmp        1
| - install conf-mpfr       1
| - install conf-ncurses    1
| - install conf-perl       1
| - install conf-pkg-config 1.1
| - install conf-which      1
| - install cppo            1.6.4
| - install deriving        0.8.1
| - install dolog           3.0
| - install mlbdd           0.6
| - install mlgmpidl        1.2.7
| - install num             1.1
| - install oasis           0.4.11
| - install obuild          0.1.10
| - install ocamlbuild      0.12.0
| - install ocamlify        0.0.1
| - install ocamlmod        0.0.9
| - install ounit           2.0.8
| - install parmap          1.0-rc10
| - install qcheck          0.8
| - install qtest           2.9
| - install setr            0.1.1
+- 
# Run eval $(opam env) to update the current shell environment

The former state can be restored with:
    opam switch import "/home/opam/.opam/4.06/.opam-switch/backup/state-20180729061850.export"
31 1532844680 1532845272