$ opam depext -iy -j 2 cairo.0.4.2
# Detecting depexts using vars: arch=x86_64, os=linux, os-distribution=alpine, os-family=alpine
# The following system packages are needed:
autoconf
cairo-dev
m4
pkgconfig
m4
pkgconf
# The following new OS packages need to be installed: autoconf cairo-dev
The following command needs to be run through "sudo":
    apk add autoconf cairo-dev
fetch http://dl-cdn.alpinelinux.org/alpine/v3.7/main/x86_64/APKINDEX.tar.gz
fetch http://dl-cdn.alpinelinux.org/alpine/v3.7/community/x86_64/APKINDEX.tar.gz
(1/51) Installing libbz2 (1.0.6-r6)
(2/51) Installing perl (5.26.2-r1)
(3/51) Installing autoconf (2.69-r0)
(4/51) Installing libpng (1.6.34-r1)
(5/51) Installing freetype (2.8.1-r3)
(6/51) Installing fontconfig (2.12.6-r0)
(7/51) Installing expat-dev (2.2.5-r0)
(8/51) Installing zlib-dev (1.2.11-r1)
(9/51) Installing libpng-dev (1.6.34-r1)
(10/51) Installing freetype-dev (2.8.1-r3)
(11/51) Installing fontconfig-dev (2.12.6-r0)
(12/51) Installing libxrender (0.9.10-r2)
(13/51) Installing renderproto (0.11.1-r3)
(14/51) Installing libxrender-dev (0.9.10-r2)
(15/51) Installing pixman (0.34.0-r3)
(16/51) Installing pixman-dev (0.34.0-r3)
(17/51) Installing util-macros (1.19.1-r1)
(18/51) Installing xcb-util (0.4.0-r1)
(19/51) Installing xcb-util-dev (0.4.0-r1)
(20/51) Installing libxext (1.3.3-r2)
(21/51) Installing libxext-dev (1.3.3-r2)
(22/51) Installing cairo (1.14.10-r0)
(23/51) Installing libffi (3.2.1-r4)
(24/51) Installing libintl (0.19.8.1-r1)
(25/51) Installing libuuid (2.31-r0)
(26/51) Installing libblkid (2.31-r0)
(27/51) Installing libmount (2.31-r0)
(28/51) Installing pcre (8.41-r1)
(29/51) Installing glib (2.54.2-r0)
(30/51) Installing cairo-tools (1.14.10-r0)
(31/51) Installing cairo-gobject (1.14.10-r0)
(32/51) Installing gdbm (1.13-r1)
(33/51) Installing sqlite-libs (3.21.0-r1)
(34/51) Installing python2 (2.7.14-r2)
(35/51) Installing gettext-asprintf (0.19.8.1-r1)
(36/51) Installing libunistring (0.9.7-r0)
(37/51) Installing gettext-libs (0.19.8.1-r1)
(38/51) Installing libxml2 (2.9.7-r0)
(39/51) Installing gettext (0.19.8.1-r1)
(40/51) Installing gettext-dev (0.19.8.1-r1)
(41/51) Installing bzip2-dev (1.0.6-r6)
(42/51) Installing libffi-dev (3.2.1-r4)
(43/51) Installing libfdisk (2.31-r0)
(44/51) Installing libsmartcols (2.31-r0)
(45/51) Installing util-linux-dev (2.31-r0)
(46/51) Installing libpcre16 (8.41-r1)
(47/51) Installing libpcre32 (8.41-r1)
(48/51) Installing libpcrecpp (8.41-r1)
(49/51) Installing pcre-dev (8.41-r1)
(50/51) Installing glib-dev (2.54.2-r0)
(51/51) Installing cairo-dev (1.14.10-r0)
Executing busybox-1.27.2-r11.trigger
Executing glib-2.54.2-r0.trigger
No schema files found: doing nothing.
OK: 309 MiB in 124 packages
# OS packages installation successful
# Now letting OPAM install the packages
The following actions will be performed:
  - install conf-which      1      [required by conf-autoconf]
  - install ocamlbuild      0.12.0 [required by cairo]
  - install conf-pkg-config 1.1    [required by conf-cairo]
  - install conf-autoconf   0.1    [required by cairo]
  - install conf-cairo      1      [required by cairo]
  - install cairo           0.4.2
===== 6 to install =====

<><> Gathering sources ><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
[cairo.0.4.2] found in cache
[ocamlbuild.0.12.0] found in cache

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
-> installed conf-pkg-config.1.1
-> installed conf-cairo.1
-> installed conf-which.1
-> installed conf-autoconf.0.1
-> installed ocamlbuild.0.12.0
[ERROR] The compilation of cairo failed at "/home/opam/.opam/4.06/bin/ocaml setup.ml -configure --prefix /home/opam/.opam/4.06 --disable-lablgtk2".

#=== ERROR while compiling cairo.0.4.2 ========================================#
# context              2.0.0~rc3 | linux/x86_64 | ocaml-base-compiler.4.06.1 | git+file:///home/opam/opam-repository
# path                 ~/.opam/4.06/.opam-switch/build/cairo.0.4.2
# command              ~/.opam/4.06/bin/ocaml setup.ml -configure --prefix /home/opam/.opam/4.06 --disable-lablgtk2
# exit-code            2
# env-file             ~/.opam/log/cairo-13-038aac.env
# output-file          ~/.opam/log/cairo-13-038aac.out
### output ###
# File "./setup.ml", line 211, characters 8-26:
# Warning 3: deprecated: String.set
# Use Bytes.set instead.
# File "./setup.ml", line 211, characters 8-11:
# Error: This expression has type string but an expression was expected of type
#          bytes



<><> Error report <><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
+- The following actions failed
| - build cairo 0.4.2
+- 
+- The following changes have been performed
| - install conf-autoconf   0.1
| - install conf-cairo      1
| - install conf-pkg-config 1.1
| - install conf-which      1
| - install ocamlbuild      0.12.0
+- 
# Run eval $(opam env) to update the current shell environment

The former state can be restored with:
    opam switch import "/home/opam/.opam/4.06/.opam-switch/backup/state-20180804032055.export"
31 1533352851 1533352864