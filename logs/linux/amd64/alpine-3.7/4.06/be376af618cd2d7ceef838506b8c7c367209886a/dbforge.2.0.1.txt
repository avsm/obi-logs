$ opam depext -iy -j 2 dbforge.2.0.1
# Detecting depexts using vars: arch=x86_64, os=linux, os-distribution=alpine, os-family=alpine
# The following system packages are needed:
gtk+2.0-dev
gtksourceview2-dev
m4
pkgconfig
m4
pkgconf
# The following new OS packages need to be installed: gtk+2.0-dev gtksourceview2-dev
The following command needs to be run through "sudo":
    apk add gtk+2.0-dev gtksourceview2-dev
fetch http://dl-cdn.alpinelinux.org/alpine/v3.7/main/x86_64/APKINDEX.tar.gz
fetch http://dl-cdn.alpinelinux.org/alpine/v3.7/community/x86_64/APKINDEX.tar.gz
(1/114) Installing libffi (3.2.1-r4)
(2/114) Installing libintl (0.19.8.1-r1)
(3/114) Installing libuuid (2.31-r0)
(4/114) Installing libblkid (2.31-r0)
(5/114) Installing libmount (2.31-r0)
(6/114) Installing pcre (8.41-r1)
(7/114) Installing glib (2.54.2-r0)
(8/114) Installing atk (2.26.1-r1)
(9/114) Installing libbz2 (1.0.6-r6)
(10/114) Installing perl (5.26.2-r1)
(11/114) Installing gdbm (1.13-r1)
(12/114) Installing sqlite-libs (3.21.0-r1)
(13/114) Installing python2 (2.7.14-r2)
(14/114) Installing gettext-asprintf (0.19.8.1-r1)
(15/114) Installing libunistring (0.9.7-r0)
(16/114) Installing gettext-libs (0.19.8.1-r1)
(17/114) Installing libxml2 (2.9.7-r0)
(18/114) Installing gettext (0.19.8.1-r1)
(19/114) Installing gettext-dev (0.19.8.1-r1)
(20/114) Installing zlib-dev (1.2.11-r1)
(21/114) Installing bzip2-dev (1.0.6-r6)
(22/114) Installing libffi-dev (3.2.1-r4)
(23/114) Installing libfdisk (2.31-r0)
(24/114) Installing libsmartcols (2.31-r0)
(25/114) Installing util-linux-dev (2.31-r0)
(26/114) Installing libpcre16 (8.41-r1)
(27/114) Installing libpcre32 (8.41-r1)
(28/114) Installing libpcrecpp (8.41-r1)
(29/114) Installing pcre-dev (8.41-r1)
(30/114) Installing glib-dev (2.54.2-r0)
(31/114) Installing atk-dev (2.26.1-r1)
(32/114) Installing libpng (1.6.34-r1)
(33/114) Installing freetype (2.8.1-r3)
(34/114) Installing fontconfig (2.12.6-r0)
(35/114) Installing expat-dev (2.2.5-r0)
(36/114) Installing libpng-dev (1.6.34-r1)
(37/114) Installing freetype-dev (2.8.1-r3)
(38/114) Installing fontconfig-dev (2.12.6-r0)
(39/114) Installing libxrender (0.9.10-r2)
(40/114) Installing renderproto (0.11.1-r3)
(41/114) Installing libxrender-dev (0.9.10-r2)
(42/114) Installing pixman (0.34.0-r3)
(43/114) Installing pixman-dev (0.34.0-r3)
(44/114) Installing util-macros (1.19.1-r1)
(45/114) Installing xcb-util (0.4.0-r1)
(46/114) Installing xcb-util-dev (0.4.0-r1)
(47/114) Installing libxext (1.3.3-r2)
(48/114) Installing libxext-dev (1.3.3-r2)
(49/114) Installing cairo (1.14.10-r0)
(50/114) Installing cairo-tools (1.14.10-r0)
(51/114) Installing cairo-gobject (1.14.10-r0)
(52/114) Installing cairo-dev (1.14.10-r0)
(53/114) Installing perl-http-date (6.02-r1)
(54/114) Installing perl-lwp-mediatypes (6.02-r1)
(55/114) Installing perl-encode-locale (1.05-r1)
(56/114) Installing perl-uri (1.71-r1)
(57/114) Installing perl-io-html (1.001-r1)
(58/114) Installing perl-http-message (6.13-r0)
(59/114) Installing perl-http-cookies (6.04-r0)
(60/114) Installing perl-net-http (6.09-r1)
(61/114) Installing perl-http-daemon (6.01-r1)
(62/114) Installing perl-html-tagset (3.20-r1)
(63/114) Installing perl-html-parser (3.72-r2)
(64/114) Installing perl-file-listing (6.04-r1)
(65/114) Installing perl-www-robotrules (6.02-r1)
(66/114) Installing perl-http-negotiate (6.01-r1)
(67/114) Installing perl-capture-tiny (0.46-r0)
(68/114) Installing perl-devel-symdump (2.18-r0)
(69/114) Installing perl-test-pod (1.51-r1)
(70/114) Installing perl-pod-coverage (0.23-r0)
(71/114) Installing perl-try-tiny (0.28-r1)
(72/114) Installing perl-libwww (6.29-r0)
(73/114) Installing perl-xml-parser (2.44-r4)
(74/114) Installing file (5.32-r0)
(75/114) Installing intltool (0.51.0-r4)
(76/114) Installing damageproto (1.2.1-r3)
(77/114) Installing fixesproto (5.0-r2)
(78/114) Installing libxdamage (1.1.4-r1)
(79/114) Installing libxfixes (5.0.3-r1)
(80/114) Installing libxfixes-dev (5.0.3-r1)
(81/114) Installing libxdamage-dev (1.1.4-r1)
(82/114) Installing libxft (2.3.2-r2)
(83/114) Installing graphite2 (1.3.10-r0)
(84/114) Installing harfbuzz (1.6.3-r0)
(85/114) Installing pango (1.40.14-r0)
(86/114) Installing icu-libs (59.1-r1)
(87/114) Installing harfbuzz-icu (1.6.3-r0)
(88/114) Installing graphite2-dev (1.3.10-r0)
(89/114) Installing icu-dev (59.1-r1)
(90/114) Installing harfbuzz-dev (1.6.3-r0)
(91/114) Installing libxft-dev (2.3.2-r2)
(92/114) Installing pango-dev (1.40.14-r0)
(93/114) Installing shared-mime-info (1.9-r0)
(94/114) Installing hicolor-icon-theme (0.17-r0)
(95/114) Installing libjpeg-turbo (1.5.2-r0)
(96/114) Installing gdk-pixbuf (2.36.10-r0)
(97/114) Installing gtk-update-icon-cache (2.24.31-r0)
(98/114) Installing libxcomposite (0.4.4-r1)
(99/114) Installing libxcursor (1.1.15-r0)
(100/114) Installing libxi (1.7.9-r1)
(101/114) Installing libxrandr (1.5.1-r1)
(102/114) Installing dbus-libs (1.10.24-r0)
(103/114) Installing avahi-libs (0.6.32-r4)
(104/114) Installing nettle (3.3-r0)
(105/114) Installing libtasn1 (4.12-r3)
(106/114) Installing p11-kit (0.23.2-r2)
(107/114) Installing gnutls (3.6.1-r0)
(108/114) Installing cups-libs (2.2.5-r0)
(109/114) Installing gtk+2.0 (2.24.31-r0)
Executing gtk+2.0-2.24.31-r0.post-install
(110/114) Installing gdk-pixbuf-dev (2.36.10-r0)
(111/114) Installing gtk+2.0-dev (2.24.31-r0)
(112/114) Installing libxml2-dev (2.9.7-r0)
(113/114) Installing gtksourceview2 (2.10.5-r0)
(114/114) Installing gtksourceview2-dev (2.10.5-r0)
Executing busybox-1.27.2-r11.trigger
Executing glib-2.54.2-r0.trigger
No schema files found: doing nothing.
Executing shared-mime-info-1.9-r0.trigger
Executing gdk-pixbuf-2.36.10-r0.trigger
Executing gtk-update-icon-cache-2.24.31-r0.trigger
OK: 376 MiB in 187 packages
# OS packages installation successful
# Now letting OPAM install the packages
The following actions will be performed:
  - install result             1.3    [required by topkg]
  - install ocamlbuild         0.12.0 [required by camlp4, xmlm]
  - install mysql              1.2.2  [required by dbforge]
  - install conf-pkg-config    1.1    [required by conf-gtksourceview]
  - install conf-glade         2      [required by dbforge]
  - install xml-light          2.4    [required by dbforge]
  - install topkg              0.9.1  [required by xmlm]
  - install camlp4             4.06+1 [required by config-file]
  - install conf-gtksourceview 2      [required by lablgtk, lablgtk-extras]
  - install xmlm               1.3.0  [required by lablgtk-extras]
  - install config-file        1.2    [required by dbforge]
  - install lablgtk            2.18.6 [required by dbforge]
  - install lablgtk-extras     1.6    [required by dbforge]
  - install dbforge            2.0.1
===== 14 to install =====

<><> Gathering sources ><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
[camlp4.4.06+1] found in cache
[config-file.1.2] found in cache
[dbforge.2.0.1] found in cache
[lablgtk.2.18.6] found in cache
[lablgtk-extras.1.6] found in cache
[mysql.1.2.2] found in cache
[ocamlbuild.0.12.0] found in cache
[result.1.3] found in cache
[topkg.0.9.1] found in cache
[xml-light.2.4] found in cache
[xmlm.1.3.0] found in cache

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
[ERROR] The compilation of conf-glade failed at "/usr/bin/pkg-config libglade-2.0".
[ERROR] The compilation of mysql failed at "/home/opam/.opam/4.06/.opam-switch/build/mysql.1.2.2/./configure --prefix /home/opam/.opam/4.06".
-> installed conf-pkg-config.1.1
-> installed conf-gtksourceview.2
-> installed result.1.3
-> installed xml-light.2.4
-> installed ocamlbuild.0.12.0
-> installed topkg.0.9.1
-> installed xmlm.1.3.0
-> installed camlp4.4.06+1
-> installed config-file.1.2

#=== ERROR while compiling mysql.1.2.2 ========================================#
# context              2.0.0~rc3 | linux/x86_64 | ocaml-base-compiler.4.06.1 | git+file:///home/opam/opam-repository
# path                 ~/.opam/4.06/.opam-switch/build/mysql.1.2.2
# command              ~/.opam/4.06/.opam-switch/build/mysql.1.2.2/./configure --prefix /home/opam/.opam/4.06
# exit-code            1
# env-file             ~/.opam/log/mysql-13-543ebd.env
# output-file          ~/.opam/log/mysql-13-543ebd.out
### output ###
# configure: checking for ocaml compiler and tools...
# checking for ocamlc... ocamlc
# checking for ocamlopt... ocamlopt
# checking for ocamlfind... ocamlfind
# checking whether ocamlopt supports natdynlink... yes
# checking for a BSD-compatible install... /usr/bin/install -c
# configure: checking for C compiler...
# checking for gcc... gcc
# checking whether the C compiler works... yes
# checking for C compiler default output file name... a.out
# checking for suffix of executables... 
# checking whether we are cross compiling... no
# checking for suffix of object files... o
# checking whether we are using the GNU C compiler... yes
# checking whether gcc accepts -g... yes
# checking for gcc option to accept ISO C89... none needed
# configure: checking for C header files...
# checking how to run the C preprocessor... gcc -E
# checking for grep that handles long lines and -e... /bin/grep
# checking for egrep... /bin/grep -E
# checking for ANSI C header files... yes
# checking for mysql_config include... /home/opam/.opam/4.06/.opam-switch/build/mysql.1.2.2/./configure: line 3413: mysql_config: command not found
# 
# checking for mysql_config libs... /home/opam/.opam/4.06/.opam-switch/build/mysql.1.2.2/./configure: line 3422: mysql_config: command not found
# 
# configure: checking for mysql.h...
# checking for sys/types.h... yes
# checking for sys/stat.h... yes
# checking for stdlib.h... yes
# checking for string.h... yes
# checking for memory.h... yes
# checking for strings.h... yes
# checking for inttypes.h... yes
# checking for stdint.h... yes
# checking for unistd.h... yes
# checking mysql.h usability... no
# checking mysql.h presence... no
# checking for mysql.h... no
# checking mysql/mysql.h usability... no
# checking mysql/mysql.h presence... no
# checking for mysql/mysql.h... no
# configure: error: mysql.h not found


#=== ERROR while compiling conf-glade.2 =======================================#
# context              2.0.0~rc3 | linux/x86_64 | ocaml-base-compiler.4.06.1 | git+file:///home/opam/opam-repository
# path                 ~/.opam/4.06/.opam-switch/build/conf-glade.2
# command              /usr/bin/pkg-config libglade-2.0
# exit-code            1
# env-file             ~/.opam/log/conf-glade-13-000417.env
# output-file          ~/.opam/log/conf-glade-13-000417.out



<><> Error report <><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
+- The following actions failed
| - build conf-glade 2
| - build mysql      1.2.2
+- 
+- The following changes have been performed (the rest was aborted)
| - install camlp4             4.06+1
| - install conf-gtksourceview 2
| - install conf-pkg-config    1.1
| - install config-file        1.2
| - install ocamlbuild         0.12.0
| - install result             1.3
| - install topkg              0.9.1
| - install xml-light          2.4
| - install xmlm               1.3.0
+- 

<><> mysql.1.2.2 troubleshooting ><><><><><><><><><><><><><><><><><><><><><><><>
=> This package requires mysql client library installed. Due to abundance of mysql forks with different names and
     opam not dealing very well with depext alternatives currently - they are not described as dependencies of this package.

     Please ensure that mysql client library is installed and mysql_config binary is available in PATH.
     Two most popular ways to achieve that are described in conf-mysql and conf-mariadb packages.

     See also discussion in https://github.com/ocaml/opam-repository/pull/10312
# Run eval $(opam env) to update the current shell environment

The former state can be restored with:
    opam switch import "/home/opam/.opam/4.06/.opam-switch/backup/state-20180722130302.export"
31 1532264575 1532264701