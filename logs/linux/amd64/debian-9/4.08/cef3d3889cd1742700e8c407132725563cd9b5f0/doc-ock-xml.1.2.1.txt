$ opam depext -iy -j 2 doc-ock-xml.1.2.1
# Detecting depexts using vars: arch=x86_64, os=linux, os-distribution=debian, os-family=debian
# The following system packages are needed:
m4
# All required OS packages found.
# Now letting OPAM install the packages
The following actions will be performed:
  - install result      1.3      [required by topkg]
  - install base-bytes  base     [required by cppo]
  - install ocamlbuild  0.12.0   [required by menhir, xmlm]
  - install octavius    1.2.0    [required by doc-ock]
  - install cppo        1.6.4    [required by doc-ock]
  - install topkg       0.9.1    [required by xmlm]
  - install menhir      20180703 [required by doc-ock-xml]
  - install doc-ock     1.2.1    [required by doc-ock-xml]
  - install xmlm        1.3.0    [required by doc-ock-xml]
  - install doc-ock-xml 1.2.1
===== 10 to install =====

<><> Gathering sources ><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
[cppo.1.6.4] found in cache
[doc-ock.1.2.1] found in cache
[doc-ock-xml.1.2.1] found in cache
[menhir.20180703] found in cache
[ocamlbuild.0.12.0] found in cache
[octavius.1.2.0] found in cache
[result.1.3] found in cache
[topkg.0.9.1] found in cache
[xmlm.1.3.0] found in cache

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
-> installed base-bytes.base
[ERROR] The compilation of ocamlbuild failed at "/usr/bin/make check-if-preinstalled all opam-install".
-> installed octavius.1.2.0
-> installed result.1.3
-> installed cppo.1.6.4
[ERROR] The compilation of doc-ock failed at "/home/opam/.opam/4.08/bin/jbuilder build -p doc-ock -j 71".

#=== ERROR while compiling ocamlbuild.0.12.0 ==================================#
# context              2.0.0 | linux/x86_64 | ocaml-variants.4.08.0+trunk | git+file:///home/opam/opam-repository
# path                 ~/.opam/4.08/.opam-switch/build/ocamlbuild.0.12.0
# command              /usr/bin/make check-if-preinstalled all opam-install
# exit-code            2
# env-file             ~/.opam/log/ocamlbuild-11-562576.env
# output-file          ~/.opam/log/ocamlbuild-11-562576.out
### output ###
# if test -d /home/opam/.opam/4.08/lib/ocaml/ocamlbuild; then\
#   >&2 echo "ERROR: Preinstalled ocamlbuild detected at"\
#        "/home/opam/.opam/4.08/lib/ocaml/ocamlbuild";\
#   >&2 echo "Installation aborted; if you want to bypass this"\
#         "safety check, pass CHECK_IF_PREINSTALLED=false to make";\
#   exit 2;\
# fi
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/const.ml
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/loc.mli
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/loc.ml
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/discard_printf.mli
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/discard_printf.ml
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/signatures.mli
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/my_std.mli
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/my_std.ml
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/my_unix.mli
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/my_unix.ml
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/tags.mli
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/tags.ml
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/display.mli
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/display.ml
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/log.mli
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/log.ml
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/shell.mli
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/shell.ml
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/bool.mli
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/bool.ml
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/glob_ast.mli
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/glob_ast.ml
# ocamllex.opt src/glob_lexer.mll
# 55 states, 419 transitions, table size 2006 bytes
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/glob_lexer.mli
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/glob_lexer.ml
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/glob.mli
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/glob.ml
# ocamllex.opt src/lexers.mll
# 251 states, 1051 transitions, table size 5710 bytes
# 4334 additional bytes used for bindings
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/lexers.mli
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/lexers.ml
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/param_tags.mli
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/param_tags.ml
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/command.mli
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/command.ml
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/ocamlbuild_config.ml
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/ocamlbuild_where.mli
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/ocamlbuild_where.ml
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/slurp.mli
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/slurp.ml
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/options.mli
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/options.ml
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/pathname.mli
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/pathname.ml
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/configuration.mli
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/configuration.ml
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/flags.mli
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/flags.ml
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/hygiene.mli
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/hygiene.ml
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/digest_cache.mli
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/digest_cache.ml
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/resource.mli
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/resource.ml
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/rule.mli
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/rule.ml
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/solver.mli
# ocamlc.opt -w L -w R -w Z -I src -I +unix -safe-string -bin-annot -c src/solver.ml
# File "src/solver.ml", line 43, characters 31-32:
# Error: This expression has type int but an expression was expected of type
#          ('a -> 'b -> 'c -> 'd -> 'e -> 'f, Format.formatter, unit,
#           Format.formatter -> unit)
#          format4 =
#            ('a -> 'b -> 'c -> 'd -> 'e -> 'f, Format.formatter, unit, 
#             unit, unit, Format.formatter -> unit)
#            CamlinternalFormatBasics.format6
# Makefile:422: recipe for target 'src/solver.cmo' failed
# make: *** [src/solver.cmo] Error 2


#=== ERROR while compiling doc-ock.1.2.1 ======================================#
# context              2.0.0 | linux/x86_64 | ocaml-variants.4.08.0+trunk | git+file:///home/opam/opam-repository
# path                 ~/.opam/4.08/.opam-switch/build/doc-ock.1.2.1
# command              ~/.opam/4.08/bin/jbuilder build -p doc-ock -j 71
# exit-code            1
# env-file             ~/.opam/log/doc-ock-11-266bac.env
# output-file          ~/.opam/log/doc-ock-11-266bac.out
### output ###
#       ocamlc src/.docOck.objs/docOckCmti.{cmo,cmt} (exit 2)
# (cd _build/default && /home/opam/.opam/4.08/bin/ocamlc.opt -w -40 -g -bin-annot -I src/.docOck.objs -I /home/opam/.opam/4.08/lib/ocaml/compiler-libs -I /home/opam/.opam/4.08/lib/octavius -intf-suffix .ml -no-alias-deps -o src/.docOck.objs/docOckCmti.cmo -c -impl src/docOckCmti.pp.ml)
# File "src/docOckCmti.ml", line 551, characters 46-49:
# Error: This expression has type Typedtree.type_exception
#        but an expression was expected of type Typedtree.extension_constructor
#       ocamlc src/.docOck.objs/docOckCmt.{cmo,cmt} (exit 2)
# (cd _build/default && /home/opam/.opam/4.08/bin/ocamlc.opt -w -40 -g -bin-annot -I src/.docOck.objs -I /home/opam/.opam/4.08/lib/ocaml/compiler-libs -I /home/opam/.opam/4.08/lib/octavius -intf-suffix .ml -no-alias-deps -o src/.docOck.objs/docOckCmt.cmo -c -impl src/docOckCmt.pp.ml)
# File "src/docOckCmt.ml", line 46, characters 4-1410:
# Warning 8: this pattern-matching is not exhaustive.
# Here is an example of a case that is not matched:
# Tpat_exception _
# File "src/docOckCmt.ml", line 456, characters 50-56:
# Error: This expression has type Typedtree.type_exception
#        The field ext_id does not belong to type Typedtree.type_exception
#       ocamlc src/.docOck.objs/docOckAttrs.{cmo,cmt} (exit 2)
# (cd _build/default && /home/opam/.opam/4.08/bin/ocamlc.opt -w -40 -g -bin-annot -I src/.docOck.objs -I /home/opam/.opam/4.08/lib/ocaml/compiler-libs -I /home/opam/.opam/4.08/lib/octavius -intf-suffix .ml -no-alias-deps -o src/.docOck.objs/docOckAttrs.cmo -c -impl src/docOckAttrs.pp.ml)
# File "src/docOckAttrs.ml", line 659, characters 4-68:
# Error: This pattern matches values of type 'a * 'b
#        but a pattern was expected which matches values of type
#          Parsetree.attribute
#     ocamlopt src/.docOck.objs/docOckAttrs.{cmx,o} (exit 2)
# (cd _build/default && /home/opam/.opam/4.08/bin/ocamlopt.opt -w -40 -g -I src/.docOck.objs -I /home/opam/.opam/4.08/lib/ocaml/compiler-libs -I /home/opam/.opam/4.08/lib/octavius -intf-suffix .ml -no-alias-deps -o src/.docOck.objs/docOckAttrs.cmx -c -impl src/docOckAttrs.pp.ml)
# File "src/docOckAttrs.ml", line 659, characters 4-68:
# Error: This pattern matches values of type 'a * 'b
#        but a pattern was expected which matches values of type
#          Parsetree.attribute



<><> Error report <><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
+- The following actions failed
| - build doc-ock    1.2.1
| - build ocamlbuild 0.12.0
+- 
+- The following changes have been performed (the rest was aborted)
| - install base-bytes base
| - install cppo       1.6.4
| - install octavius   1.2.0
| - install result     1.3
+- 
# Run eval $(opam env) to update the current shell environment

The former state can be restored with:
    opam switch import "/home/opam/.opam/4.08/.opam-switch/backup/state-20180809202913.export"
31 1533846551 1533846560