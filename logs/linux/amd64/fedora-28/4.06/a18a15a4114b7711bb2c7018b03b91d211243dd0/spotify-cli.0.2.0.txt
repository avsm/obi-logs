$ opam depext -iy -j 2 spotify-cli.0.2.0
# Detecting depexts using vars: arch=x86_64, os=linux, os-distribution=fedora, os-family=fedora
# The following system packages are needed:
m4
openssl-devel
pkgconfig
which
Name        : m4
Version     : 1.4.18
Release     : 6.fc28
Architecture: x86_64
Install Date: Thu Aug  2 23:10:27 2018
Group       : Applications/Text
Size        : 372272
License     : GPLv3+
Signature   : RSA/SHA256, Sun Feb 25 11:01:47 2018, Key ID e08e7e629db62fb1
Source RPM  : m4-1.4.18-6.fc28.src.rpm
Build Date  : Sun Feb 25 10:58:14 2018
Build Host  : buildvm-25.phx2.fedoraproject.org
Relocations : (not relocatable)
Packager    : Fedora Project
Vendor      : Fedora Project
URL         : http://www.gnu.org/software/m4/
Bug URL     : https://bugz.fedoraproject.org/m4
Summary     : The GNU macro processor
Description :
A GNU implementation of the traditional UNIX macro processor.  M4 is
useful for writing text files which can be logically parsed, and is used
by many programs as part of their build process.  M4 has built-in
functions for including files, running shell commands, doing arithmetic,
etc.  The autoconf program needs m4 for generating configure scripts, but
not for running configure scripts.

Install m4 if you need a macro processor.
package openssl-devel is not installed
package pkgconfig is not installed
Name        : which
Version     : 2.21
Release     : 8.fc28
Architecture: x86_64
Install Date: Mon Jul 23 06:11:22 2018
Group       : Unspecified
Size        : 79310
License     : GPLv3
Signature   : RSA/SHA256, Fri Feb 16 17:11:18 2018, Key ID e08e7e629db62fb1
Source RPM  : which-2.21-8.fc28.src.rpm
Build Date  : Fri Feb 16 17:06:50 2018
Build Host  : buildvm-05.phx2.fedoraproject.org
Relocations : (not relocatable)
Packager    : Fedora Project
Vendor      : Fedora Project
URL         : https://savannah.gnu.org/projects/which/
Summary     : Displays where a particular program in your path is located
Description :
The which command shows the full pathname of a specified program, if
the specified program is in your PATH.
# The following new OS packages need to be installed: openssl-devel pkgconfig
The following command needs to be run through "sudo":
    yum install -y openssl-devel pkgconfig
Fedora 28 - x86_64 - Updates                     16 MB/s |  21 MB     00:01    
Last metadata expiration check: 0:00:08 ago on Fri Aug  3 10:59:46 2018.
Package pkgconf-pkg-config-1.4.2-1.fc28.x86_64 is already installed, skipping.
Dependencies resolved.
================================================================================
 Package                  Arch        Version                Repository    Size
================================================================================
Installing:
 openssl-devel            x86_64      1:1.1.0h-3.fc28        fedora       1.9 M
Installing dependencies:
 keyutils-libs-devel      x86_64      1.5.10-6.fc28          fedora        47 k
 krb5-devel               x86_64      1.16.1-13.fc28         updates      545 k
 libcom_err-devel         x86_64      1.44.2-0.fc28          updates       37 k
 libkadm5                 x86_64      1.16.1-13.fc28         updates      182 k
 libselinux-devel         x86_64      2.8-1.fc28             updates      197 k
 libsepol-devel           x86_64      2.8-1.fc28             updates       84 k
 libverto-devel           x86_64      0.3.0-5.fc28           fedora        17 k
 pcre2-devel              x86_64      10.31-7.fc28           updates      589 k
 pcre2-utf16              x86_64      10.31-7.fc28           updates      221 k
 pcre2-utf32              x86_64      10.31-7.fc28           updates      213 k
 zlib-devel               x86_64      1.2.11-8.fc28          updates       55 k

Transaction Summary
================================================================================
Install  12 Packages

Total download size: 4.1 M
Installed size: 7.6 M
Downloading Packages:
(1/12): libkadm5-1.16.1-13.fc28.x86_64.rpm      1.8 MB/s | 182 kB     00:00    
(2/12): zlib-devel-1.2.11-8.fc28.x86_64.rpm     3.0 MB/s |  55 kB     00:00    
(3/12): libcom_err-devel-1.44.2-0.fc28.x86_64.r 3.4 MB/s |  37 kB     00:00    
(4/12): krb5-devel-1.16.1-13.fc28.x86_64.rpm    3.8 MB/s | 545 kB     00:00    
(5/12): libsepol-devel-2.8-1.fc28.x86_64.rpm    4.6 MB/s |  84 kB     00:00    
(6/12): libselinux-devel-2.8-1.fc28.x86_64.rpm  4.4 MB/s | 197 kB     00:00    
(7/12): keyutils-libs-devel-1.5.10-6.fc28.x86_6 9.7 kB/s |  47 kB     00:04    
(8/12): libverto-devel-0.3.0-5.fc28.x86_64.rpm  3.5 kB/s |  17 kB     00:04    
(9/12): pcre2-utf16-10.31-7.fc28.x86_64.rpm     6.0 MB/s | 221 kB     00:00    
(10/12): pcre2-devel-10.31-7.fc28.x86_64.rpm    7.4 MB/s | 589 kB     00:00    
(11/12): pcre2-utf32-10.31-7.fc28.x86_64.rpm    6.5 MB/s | 213 kB     00:00    
(12/12): openssl-devel-1.1.0h-3.fc28.x86_64.rpm 369 kB/s | 1.9 MB     00:05    
--------------------------------------------------------------------------------
Total                                           649 kB/s | 4.1 MB     00:06     
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
  Preparing        :                                                        1/1 
  Installing       : pcre2-utf32-10.31-7.fc28.x86_64                       1/12 
  Installing       : pcre2-utf16-10.31-7.fc28.x86_64                       2/12 
  Installing       : pcre2-devel-10.31-7.fc28.x86_64                       3/12 
  Installing       : libverto-devel-0.3.0-5.fc28.x86_64                    4/12 
  Installing       : keyutils-libs-devel-1.5.10-6.fc28.x86_64              5/12 
  Installing       : libsepol-devel-2.8-1.fc28.x86_64                      6/12 
  Installing       : libselinux-devel-2.8-1.fc28.x86_64                    7/12 
  Installing       : libcom_err-devel-1.44.2-0.fc28.x86_64                 8/12 
  Installing       : zlib-devel-1.2.11-8.fc28.x86_64                       9/12 
  Installing       : libkadm5-1.16.1-13.fc28.x86_64                       10/12 
  Installing       : krb5-devel-1.16.1-13.fc28.x86_64                     11/12 
  Installing       : openssl-devel-1:1.1.0h-3.fc28.x86_64                 12/12 
  Running scriptlet: openssl-devel-1:1.1.0h-3.fc28.x86_64                 12/12 
  Verifying        : openssl-devel-1:1.1.0h-3.fc28.x86_64                  1/12 
  Verifying        : krb5-devel-1.16.1-13.fc28.x86_64                      2/12 
  Verifying        : libkadm5-1.16.1-13.fc28.x86_64                        3/12 
  Verifying        : zlib-devel-1.2.11-8.fc28.x86_64                       4/12 
  Verifying        : libcom_err-devel-1.44.2-0.fc28.x86_64                 5/12 
  Verifying        : libselinux-devel-2.8-1.fc28.x86_64                    6/12 
  Verifying        : libsepol-devel-2.8-1.fc28.x86_64                      7/12 
  Verifying        : keyutils-libs-devel-1.5.10-6.fc28.x86_64              8/12 
  Verifying        : libverto-devel-0.3.0-5.fc28.x86_64                    9/12 
  Verifying        : pcre2-devel-10.31-7.fc28.x86_64                      10/12 
  Verifying        : pcre2-utf16-10.31-7.fc28.x86_64                      11/12 
  Verifying        : pcre2-utf32-10.31-7.fc28.x86_64                      12/12 

Installed:
  openssl-devel.x86_64 1:1.1.0h-3.fc28 keyutils-libs-devel.x86_64 1.5.10-6.fc28
  krb5-devel.x86_64 1.16.1-13.fc28     libcom_err-devel.x86_64 1.44.2-0.fc28   
  libkadm5.x86_64 1.16.1-13.fc28       libselinux-devel.x86_64 2.8-1.fc28      
  libsepol-devel.x86_64 2.8-1.fc28     libverto-devel.x86_64 0.3.0-5.fc28      
  pcre2-devel.x86_64 10.31-7.fc28      pcre2-utf16.x86_64 10.31-7.fc28         
  pcre2-utf32.x86_64 10.31-7.fc28      zlib-devel.x86_64 1.2.11-8.fc28         

Complete!
The following command needs to be run through "sudo":
    rpm -q --whatprovides openssl-devel pkgconfig
openssl-devel-1.1.0h-3.fc28.x86_64
pkgconf-pkg-config-1.4.2-1.fc28.x86_64
# OS packages installation successful
# Now letting OPAM install the packages
The following actions will be performed:
  - install ppx_tools               5.1+4.06.0 [required by ppx_deriving]
  - install re                      1.7.3      [required by cohttp]
  - install ocaml-compiler-libs     v0.9.0     [required by ppx_core]
  - install num                     1.1        [required by sexplib]
  - install result                  1.3        [required by cmdliner]
  - install ocamlbuild              0.12.0     [required by spotify-cli]
  - install magic-mime              1.1.0      [required by cohttp]
  - install base-bytes              base       [required by cohttp, ounit]
  - install conf-pkg-config         1.1        [required by conf-openssl]
  - install easy-format             1.3.1      [required by atd]
  - install ppx_derivers            1.0        [required by ppx_deriving]
  - install conf-which              1          [required by biniou, ssl]
  - install ppx_traverse_builtins   v0.9.0     [required by ppx_core, ppx_metaquot]
  - install sexplib                 v0.9.3     [required by cohttp]
  - install ocaml-migrate-parsetree 1.0.11     [required by fieldslib, lwt, ppx_fields_conv]
  - install uchar                   0.0.2      [required by fmt]
  - install topkg                   0.9.1      [required by cmdliner]
  - install ocamlmod                0.0.9      [required by oasis]
  - install ocamlify                0.0.1      [required by oasis]
  - install menhir                  20180703   [required by atd]
  - install camlp4                  4.06+1     [required by lwt_camlp4, lwt, type_conv]
  - install stringext               1.5.0      [required by cohttp]
  - install ounit                   2.0.8      [required by spotify-web-api]
  - install cppo                    1.6.4      [required by lwt]
  - install base64                  2.2.0      [required by cohttp]
  - install conf-openssl            1          [required by ssl]
  - install biniou                  1.2.0      [required by spotify-web-api]
  - install base                    v0.9.4     [required by fieldslib]
  - install ppx_tools_versioned     5.2        [required by lwt]
  - install ppx_ast                 v0.9.2     [required by ppx_core]
  - install xmlm                    1.3.0      [required by obus]
  - install react                   1.2.1      [required by obus]
  - install cmdliner                1.0.2      [required by spotify-cli]
  - install oasis                   0.4.11     [required by mpris]
  - install atd                     2.0.0      [required by atdgen]
  - install type_conv               113.00.02  [required by obus]
  - install cppo_ocamlbuild         1.6.0      [required by ppx_deriving]
  - install ssl                     0.5.5      [required by spotify-web-api]
  - install yojson                  1.4.1      [required by spotify-web-api]
  - install stdio                   v0.9.1     [required by ppx_core]
  - install lwt                     3.3.0      [required by spotify-web-api]                     For the PPX, please install package lwt_ppx
  - install fmt                     0.8.5      [required by cohttp]
  - install ppx_deriving            4.2.1      [required by cohttp]
  - install atdgen-runtime          2.0.0      [required by atdgen]
  - install ppx_core                v0.9.3     [required by ppx_fields_conv]
  - install lwt_react               1.1.1      [required by obus]
  - install lwt_log                 1.0.0      [required by obus]
  - install lwt_camlp4              1.0.0      [required by obus]
  - install logs                    0.6.2      [required by cohttp]
  - install atdgen                  2.0.0      [required by spotify-web-api]
  - install ppx_optcomp             v0.9.0     [required by conduit]
  - install obus                    1.1.8      [required by spotify-cli]
  - install ppx_driver              v0.9.2     [required by fieldslib, conduit, ppx_fields_conv]
  - install mpris                   0.1.1      [required by spotify-cli]
  - install ppx_metaquot            v0.9.0     [required by ppx_fields_conv]
  - install fieldslib               v0.9.0     [required by cohttp]
  - install ppx_type_conv           v0.9.1     [required by ppx_fields_conv]
  - install ppx_sexp_conv           v0.9.0     [required by cohttp]
  - install ppx_fields_conv         v0.9.0     [required by cohttp]
  - install uri                     1.9.7      [required by spotify-web-api]
  - install ipaddr                  2.8.0      [required by conduit]
  - install conduit                 0.15.4     [required by cohttp]
  - install cohttp                  0.22.0     [required by spotify-web-api]
  - install spotify-web-api         0.2.0      [required by spotify-cli]
  - install spotify-cli             0.2.0
===== 65 to install =====

<><> Gathering sources ><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
[atd.2.0.0] found in cache
[atdgen.2.0.0] found in cache
[atdgen-runtime.2.0.0] found in cache
[base.v0.9.4] found in cache
[base64.2.2.0] found in cache
[biniou.1.2.0] found in cache
[camlp4.4.06+1] found in cache
[cmdliner.1.0.2] found in cache
[cohttp.0.22.0] found in cache
[conduit.0.15.4] found in cache
[cppo.1.6.4] found in cache
[cppo_ocamlbuild.1.6.0] found in cache
[easy-format.1.3.1] found in cache
[fieldslib.v0.9.0] found in cache
[fmt.0.8.5] found in cache
[ipaddr.2.8.0] found in cache
[logs.0.6.2] found in cache
[lwt.3.3.0] found in cache
[lwt_camlp4.1.0.0] found in cache
[lwt_log.1.0.0] found in cache
[lwt_react.1.1.1] found in cache
[magic-mime.1.1.0] found in cache
[menhir.20180703] found in cache
[mpris.0.1.1] found in cache
[num.1.1] found in cache
[oasis.0.4.11] found in cache
[obus.1.1.8] found in cache
[ocaml-compiler-libs.v0.9.0] found in cache
[ocaml-migrate-parsetree.1.0.11] found in cache
[ocamlbuild.0.12.0] found in cache
[ocamlify.0.0.1] found in cache
[ocamlmod.0.0.9] found in cache
[ounit.2.0.8] found in cache
[ppx_ast.v0.9.2] found in cache
[ppx_core.v0.9.3] found in cache
[ppx_derivers.1.0] found in cache
[ppx_deriving.4.2.1] found in cache
[ppx_driver.v0.9.2] found in cache
[ppx_fields_conv.v0.9.0] found in cache
[ppx_metaquot.v0.9.0] found in cache
[ppx_optcomp.v0.9.0] found in cache
[ppx_sexp_conv.v0.9.0] found in cache
[ppx_tools.5.1+4.06.0] found in cache
[ppx_tools_versioned.5.2] found in cache
[ppx_traverse_builtins.v0.9.0] found in cache
[ppx_type_conv.v0.9.1] found in cache
[re.1.7.3] found in cache
[react.1.2.1] found in cache
[result.1.3] found in cache
[sexplib.v0.9.3] found in cache
[spotify-cli.0.2.0] found in cache
[spotify-web-api.0.2.0] found in cache
[ssl.0.5.5] found in cache
[stdio.v0.9.1] found in cache
[stringext.1.5.0] found in cache
[topkg.0.9.1] found in cache
[type_conv.113.00.02] found in cache
[uchar.0.0.2] found in cache
[uri.1.9.7] found in cache
[xmlm.1.3.0] found in cache
[yojson.1.4.1] found in cache

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
-> installed base-bytes.base
-> installed base64.2.2.0
-> installed conf-pkg-config.1.1
-> installed conf-openssl.1
-> installed conf-which.1
-> installed cppo.1.6.4
-> installed easy-format.1.3.1
-> installed biniou.1.2.0
-> installed magic-mime.1.1.0
-> installed num.1.1
-> installed ocaml-compiler-libs.v0.9.0
-> installed ocamlbuild.0.12.0
-> installed cppo_ocamlbuild.1.6.0
-> installed menhir.20180703
-> installed atd.2.0.0
-> installed ocamlify.0.0.1
-> installed ocamlmod.0.0.9
-> installed oasis.0.4.11
-> installed ounit.2.0.8
-> installed ppx_derivers.1.0
-> installed ppx_tools.5.1+4.06.0
-> installed ppx_traverse_builtins.v0.9.0
-> installed re.1.7.3
-> installed result.1.3
-> installed camlp4.4.06+1
-> installed ocaml-migrate-parsetree.1.0.11
-> installed ppx_ast.v0.9.2
-> installed ppx_tools_versioned.5.2
-> installed ppx_deriving.4.2.1
-> installed sexplib.v0.9.3
-> installed lwt.3.3.0
-> installed base.v0.9.4
-> installed lwt_camlp4.1.0.0
-> installed lwt_log.1.0.0
-> installed ssl.0.5.5
-> installed stdio.v0.9.1
-> installed stringext.1.5.0
-> installed topkg.0.9.1
-> installed cmdliner.1.0.2
-> installed ppx_core.v0.9.3
-> installed react.1.2.1
-> installed lwt_react.1.1.1
-> installed type_conv.113.00.02
-> installed ppx_optcomp.v0.9.0
-> installed uchar.0.0.2
-> installed fmt.0.8.5
-> installed ppx_driver.v0.9.2
-> installed fieldslib.v0.9.0
-> installed logs.0.6.2
-> installed xmlm.1.3.0
-> installed ppx_metaquot.v0.9.0
-> installed ppx_type_conv.v0.9.1
-> installed ppx_fields_conv.v0.9.0
-> installed ppx_sexp_conv.v0.9.0
-> installed ipaddr.2.8.0
-> installed uri.1.9.7
-> installed conduit.0.15.4
-> installed cohttp.0.22.0
-> installed yojson.1.4.1
-> installed atdgen-runtime.2.0.0
-> installed atdgen.2.0.0
-> installed spotify-web-api.0.2.0
-> installed obus.1.1.8
-> installed mpris.0.1.1
[ERROR] The compilation of spotify-cli failed at "/usr/bin/make".

#=== ERROR while compiling spotify-cli.0.2.0 ==================================#
# context              2.0.0~rc3 | linux/x86_64 | ocaml-base-compiler.4.06.1 | git+file:///home/opam/opam-repository
# path                 ~/.opam/4.06/.opam-switch/build/spotify-cli.0.2.0
# command              /usr/bin/make
# exit-code            2
# env-file             ~/.opam/log/spotify-cli-10-1bcea4.env
# output-file          ~/.opam/log/spotify-cli-10-1bcea4.out
### output ###
# ocaml setup.ml -configure
# File "./setup.ml", line 247, characters 8-26:
# Warning 3: deprecated: String.set
# Use Bytes.set instead.
# File "./setup.ml", line 247, characters 8-11:
# Error: This expression has type string but an expression was expected of type
#          bytes
# make: *** [Makefile:13: setup.data] Error 2



<><> Error report <><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
+- The following actions failed
| - build spotify-cli 0.2.0
+- 
+- The following changes have been performed
| - install atd                     2.0.0
| - install atdgen                  2.0.0
| - install atdgen-runtime          2.0.0
| - install base                    v0.9.4
| - install base-bytes              base
| - install base64                  2.2.0
| - install biniou                  1.2.0
| - install camlp4                  4.06+1
| - install cmdliner                1.0.2
| - install cohttp                  0.22.0
| - install conduit                 0.15.4
| - install conf-openssl            1
| - install conf-pkg-config         1.1
| - install conf-which              1
| - install cppo                    1.6.4
| - install cppo_ocamlbuild         1.6.0
| - install easy-format             1.3.1
| - install fieldslib               v0.9.0
| - install fmt                     0.8.5
| - install ipaddr                  2.8.0
| - install logs                    0.6.2
| - install lwt                     3.3.0
| - install lwt_camlp4              1.0.0
| - install lwt_log                 1.0.0
| - install lwt_react               1.1.1
| - install magic-mime              1.1.0
| - install menhir                  20180703
| - install mpris                   0.1.1
| - install num                     1.1
| - install oasis                   0.4.11
| - install obus                    1.1.8
| - install ocaml-compiler-libs     v0.9.0
| - install ocaml-migrate-parsetree 1.0.11
| - install ocamlbuild              0.12.0
| - install ocamlify                0.0.1
| - install ocamlmod                0.0.9
| - install ounit                   2.0.8
| - install ppx_ast                 v0.9.2
| - install ppx_core                v0.9.3
| - install ppx_derivers            1.0
| - install ppx_deriving            4.2.1
| - install ppx_driver              v0.9.2
| - install ppx_fields_conv         v0.9.0
| - install ppx_metaquot            v0.9.0
| - install ppx_optcomp             v0.9.0
| - install ppx_sexp_conv           v0.9.0
| - install ppx_tools               5.1+4.06.0
| - install ppx_tools_versioned     5.2
| - install ppx_traverse_builtins   v0.9.0
| - install ppx_type_conv           v0.9.1
| - install re                      1.7.3
| - install react                   1.2.1
| - install result                  1.3
| - install sexplib                 v0.9.3
| - install spotify-web-api         0.2.0
| - install ssl                     0.5.5
| - install stdio                   v0.9.1
| - install stringext               1.5.0
| - install topkg                   0.9.1
| - install type_conv               113.00.02
| - install uchar                   0.0.2
| - install uri                     1.9.7
| - install xmlm                    1.3.0
| - install yojson                  1.4.1
+- 
# Run eval $(opam env) to update the current shell environment

The former state can be restored with:
    opam switch import "/home/opam/.opam/4.06/.opam-switch/backup/state-20180803110005.export"
31 1533293979 1533294275