$ opam depext -iy -j 2 yajl-extra.0.7.1
# Detecting depexts using vars: arch=x86_64, os=linux, os-distribution=opensuse, os-family=suse
# The following system packages are needed:
m4
# All required OS packages found.
# Now letting OPAM install the packages
The following actions will be performed:
  - install ocamlbuild 0.12.0 [required by yajl-extra]
  - install num        1.1    [required by batteries]
  - install yajl       0.7.3  [required by yajl-extra]
  - install batteries  2.8.0  [required by yajl-extra]
  - install yajl-extra 0.7.1
===== 5 to install =====

<><> Gathering sources ><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
[batteries.2.8.0] found in cache
[num.1.1] found in cache
[ocamlbuild.0.12.0] found in cache
[yajl.0.7.3] found in cache
[yajl-extra.0.7.1] found in cache

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
-> installed num.1.1
-> installed ocamlbuild.0.12.0
[ERROR] The installation of yajl failed at "make install".
-> installed batteries.2.8.0

#=== ERROR while installing yajl.0.7.3 ========================================#
# context              2.0.0 | linux/x86_64 | ocaml-base-compiler.4.06.1 | git+file:///home/opam/opam-repository
# path                 ~/.opam/4.06/.opam-switch/build/yajl.0.7.3
# command              /usr/bin/make install
# exit-code            2
# env-file             ~/.opam/log/yajl-12-876af6.env
# output-file          ~/.opam/log/yajl-12-876af6.out
### output ###
# # --
# # work around yajl's ruby configure script; the following is all it does:
# mkdir -p upstream/build
# cd upstream/build && cmake -DCMAKE_INSTALL_PREFIX=/home/opam/.opam/4.06/.opam-switch/build/yajl.0.7.3/upstream/local ..
# /bin/sh: cmake: command not found
# Makefile:36: recipe for target '/home/opam/.opam/4.06/.opam-switch/build/yajl.0.7.3/upstream/local/lib/libyajl_s.a' failed
# make: *** [/home/opam/.opam/4.06/.opam-switch/build/yajl.0.7.3/upstream/local/lib/libyajl_s.a] Error 127



<><> Error report <><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
+- The following actions failed
| - install yajl 0.7.3
+- 
+- The following changes have been performed (the rest was aborted)
| - install batteries  2.8.0
| - install num        1.1
| - install ocamlbuild 0.12.0
+- 
# Run eval $(opam env) to update the current shell environment

The former state can be restored with:
    opam switch import "/home/opam/.opam/4.06/.opam-switch/backup/state-20180817032815.export"
31 1534476258 1534476527