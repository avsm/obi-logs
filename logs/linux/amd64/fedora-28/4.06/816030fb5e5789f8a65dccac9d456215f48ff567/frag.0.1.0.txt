$ opam depext -iy -j 2 frag.0.1.0
# Detecting depexts using vars: arch=x86_64, os=linux, os-distribution=fedora, os-family=fedora
# The following system packages are needed:
m4
Name        : m4
Version     : 1.4.18
Release     : 6.fc28
Architecture: x86_64
Install Date: Sun Aug 19 20:03:44 2018
Group       : Applications/Text
Size        : 372272
License     : GPLv3+
Signature   : RSA/SHA256, Sun Feb 25 11:01:47 2018, Key ID e08e7e629db62fb1
Source RPM  : m4-1.4.18-6.fc28.src.rpm
Build Date  : Sun Feb 25 10:58:14 2018
Build Host  : buildvm-25.phx2.fedoraproject.org
Relocations : (not relocatable)
Packager    : Fedora Project
Vendor      : Fedora Project
URL         : http://www.gnu.org/software/m4/
Bug URL     : https://bugz.fedoraproject.org/m4
Summary     : The GNU macro processor
Description :
A GNU implementation of the traditional UNIX macro processor.  M4 is
useful for writing text files which can be logically parsed, and is used
by many programs as part of their build process.  M4 has built-in
functions for including files, running shell commands, doing arithmetic,
etc.  The autoconf program needs m4 for generating configure scripts, but
not for running configure scripts.

Install m4 if you need a macro processor.
# All required OS packages found.
# Now letting OPAM install the packages
The following actions will be performed:
  - install jane-street-headers     v0.9.0 [required by core_kernel]
  - install spawn                   v0.9.0 [required by core]
  - install re                      1.7.3  [required by frag]
  - install ocaml-compiler-libs     v0.9.0 [required by ppx_core]
  - install num                     1.1    [required by sexplib]
  - install octavius                1.2.0  [required by ppx_js_style]
  - install ppx_derivers            1.0    [required by ppx_type_conv]
  - install result                  1.3    [required by ocaml-migrate-parsetree]
  - install ocamlbuild              0.12.0 [required by frag]
  - install ppx_traverse_builtins   v0.9.0 [required by ppx_core, ppx_metaquot]
  - install sexplib                 v0.9.3 [required by core]
  - install ocaml-migrate-parsetree 1.0.11 [required by core]
  - install ocamlmod                0.0.9  [required by oasis]
  - install ocamlify                0.0.1  [required by oasis]
  - install base                    v0.9.4 [required by core]
  - install ppx_ast                 v0.9.2 [required by ppx_core]
  - install oasis                   0.4.11 [required by mpp]
  - install typerep                 v0.9.0 [required by core_kernel]
  - install stdio                   v0.9.1 [required by core]
  - install mpp                     0.3.2  [required by frag]
  - install ppx_core                v0.9.3 [required by ppx_assert, ppx_inline_test]
  - install ppx_optcomp             v0.9.0 [required by ppx_driver]
  - install ppx_driver              v0.9.2 [required by core]
  - install variantslib             v0.9.0 [required by core_kernel]
  - install ppx_metaquot            v0.9.0 [required by ppx_assert, ppx_inline_test]
  - install ppx_let                 v0.9.0 [required by ppx_jane]
  - install ppx_here                v0.9.1 [required by ppx_assert, ppx_jane]
  - install fieldslib               v0.9.0 [required by core_kernel]
  - install ppx_type_conv           v0.9.1 [required by ppx_base, ppx_assert]
  - install ppx_pipebang            v0.9.0 [required by ppx_jane]
  - install ppx_optional            v0.9.0 [required by ppx_jane]
  - install ppx_js_style            v0.9.0 [required by ppx_base]
  - install ppx_inline_test         v0.9.2 [required by core_kernel]
  - install ppx_fail                v0.9.0 [required by ppx_jane]
  - install ppx_variants_conv       v0.9.0 [required by bin_prot, ppx_jane]
  - install ppx_typerep_conv        v0.9.0 [required by ppx_jane]
  - install ppx_traverse            v0.9.0 [required by ppx_custom_printf, ppx_expect]
  - install ppx_sexp_conv           v0.9.0 [required by core_kernel]
  - install ppx_fields_conv         v0.9.0 [required by bin_prot, ppx_jane]
  - install ppx_enumerate           v0.9.0 [required by ppx_base]
  - install ppx_compare             v0.9.0 [required by bin_prot, ppx_base, ppx_assert]
  - install ppx_bench               v0.9.1 [required by ppx_jane]
  - install ppx_sexp_value          v0.9.0 [required by ppx_jane]
  - install ppx_sexp_message        v0.9.0 [required by core_kernel]
  - install ppx_custom_printf       v0.9.0 [required by bin_prot, ppx_jane]
  - install ppx_hash                v0.9.0 [required by core_kernel]
  - install ppx_assert              v0.9.0 [required by core]
  - install bin_prot                v0.9.2 [required by core_kernel]
  - install ppx_base                v0.9.0 [required by configurator, core_kernel]
  - install ppx_expect              v0.9.0 [required by ppx_jane]
  - install ppx_bin_prot            v0.9.0 [required by ppx_jane]
  - install configurator            v0.9.1 [required by core]
  - install ppx_jane                v0.9.0 [required by core]
  - install core_kernel             v0.9.1 [required by core]
  - install core                    v0.9.2 [required by frag]
  - install frag                    0.1.0
===== 56 to install =====

<><> Gathering sources ><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
[base.v0.9.4] found in cache
[bin_prot.v0.9.2] found in cache
[configurator.v0.9.1] found in cache
[core.v0.9.2] found in cache
[core_kernel.v0.9.1] found in cache
[fieldslib.v0.9.0] found in cache
[frag.0.1.0] found in cache
[jane-street-headers.v0.9.0] found in cache
[mpp.0.3.2] found in cache
[num.1.1] found in cache
[oasis.0.4.11] found in cache
[ocaml-compiler-libs.v0.9.0] found in cache
[ocaml-migrate-parsetree.1.0.11] found in cache
[ocamlbuild.0.12.0] found in cache
[ocamlify.0.0.1] found in cache
[ocamlmod.0.0.9] found in cache
[octavius.1.2.0] found in cache
[ppx_assert.v0.9.0] found in cache
[ppx_ast.v0.9.2] found in cache
[ppx_base.v0.9.0] found in cache
[ppx_bench.v0.9.1] found in cache
[ppx_bin_prot.v0.9.0] found in cache
[ppx_compare.v0.9.0] found in cache
[ppx_core.v0.9.3] found in cache
[ppx_custom_printf.v0.9.0] found in cache
[ppx_derivers.1.0] found in cache
[ppx_driver.v0.9.2] found in cache
[ppx_enumerate.v0.9.0] found in cache
[ppx_expect.v0.9.0] found in cache
[ppx_fail.v0.9.0] found in cache
[ppx_fields_conv.v0.9.0] found in cache
[ppx_hash.v0.9.0] found in cache
[ppx_here.v0.9.1] found in cache
[ppx_inline_test.v0.9.2] found in cache
[ppx_jane.v0.9.0] found in cache
[ppx_js_style.v0.9.0] found in cache
[ppx_let.v0.9.0] found in cache
[ppx_metaquot.v0.9.0] found in cache
[ppx_optcomp.v0.9.0] found in cache
[ppx_optional.v0.9.0] found in cache
[ppx_pipebang.v0.9.0] found in cache
[ppx_sexp_conv.v0.9.0] found in cache
[ppx_sexp_message.v0.9.0] found in cache
[ppx_sexp_value.v0.9.0] found in cache
[ppx_traverse.v0.9.0] found in cache
[ppx_traverse_builtins.v0.9.0] found in cache
[ppx_type_conv.v0.9.1] found in cache
[ppx_typerep_conv.v0.9.0] found in cache
[ppx_variants_conv.v0.9.0] found in cache
[re.1.7.3] found in cache
[result.1.3] found in cache
[sexplib.v0.9.3] found in cache
[spawn.v0.9.0] found in cache
[stdio.v0.9.1] found in cache
[typerep.v0.9.0] found in cache
[variantslib.v0.9.0] found in cache

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
-> installed jane-street-headers.v0.9.0
-> installed num.1.1
-> installed ocaml-compiler-libs.v0.9.0
-> installed ocamlbuild.0.12.0
-> installed ocamlify.0.0.1
-> installed octavius.1.2.0
-> installed ppx_derivers.1.0
-> installed ppx_traverse_builtins.v0.9.0
-> installed re.1.7.3
-> installed result.1.3
-> installed ocamlmod.0.0.9
-> installed ocaml-migrate-parsetree.1.0.11
-> installed ppx_ast.v0.9.2
-> installed sexplib.v0.9.3
-> installed base.v0.9.4
-> installed oasis.0.4.11
-> installed spawn.v0.9.0
-> installed stdio.v0.9.1
-> installed ppx_core.v0.9.3
-> installed mpp.0.3.2
-> installed ppx_optcomp.v0.9.0
-> installed typerep.v0.9.0
-> installed ppx_driver.v0.9.2
-> installed fieldslib.v0.9.0
-> installed ppx_here.v0.9.1
-> installed ppx_let.v0.9.0
-> installed ppx_metaquot.v0.9.0
-> installed ppx_fail.v0.9.0
-> installed ppx_inline_test.v0.9.2
-> installed ppx_js_style.v0.9.0
-> installed ppx_optional.v0.9.0
-> installed ppx_pipebang.v0.9.0
-> installed ppx_type_conv.v0.9.1
-> installed ppx_bench.v0.9.1
-> installed ppx_compare.v0.9.0
-> installed ppx_enumerate.v0.9.0
-> installed ppx_fields_conv.v0.9.0
-> installed ppx_sexp_conv.v0.9.0
-> installed ppx_assert.v0.9.0
-> installed ppx_hash.v0.9.0
-> installed ppx_sexp_message.v0.9.0
-> installed ppx_sexp_value.v0.9.0
-> installed ppx_traverse.v0.9.0
-> installed ppx_base.v0.9.0
-> installed configurator.v0.9.1
-> installed ppx_typerep_conv.v0.9.0
-> installed variantslib.v0.9.0
-> installed ppx_custom_printf.v0.9.0
-> installed ppx_variants_conv.v0.9.0
-> installed bin_prot.v0.9.2
-> installed ppx_expect.v0.9.0
-> installed ppx_bin_prot.v0.9.0
-> installed ppx_jane.v0.9.0
-> installed core_kernel.v0.9.1
-> installed core.v0.9.2
[ERROR] The compilation of frag failed at "/home/opam/.opam/4.06/bin/ocaml setup.ml -configure --prefix /home/opam/.opam/4.06".

#=== ERROR while compiling frag.0.1.0 =========================================#
# context              2.0.0 | linux/x86_64 | ocaml-base-compiler.4.06.1 | git+file:///home/opam/opam-repository
# path                 ~/.opam/4.06/.opam-switch/build/frag.0.1.0
# command              ~/.opam/4.06/bin/ocaml setup.ml -configure --prefix /home/opam/.opam/4.06
# exit-code            2
# env-file             ~/.opam/log/frag-9-bfce53.env
# output-file          ~/.opam/log/frag-9-bfce53.out
### output ###
# File "./setup.ml", line 213, characters 8-26:
# Warning 3: deprecated: String.set
# Use Bytes.set instead.
# File "./setup.ml", line 213, characters 8-11:
# Error: This expression has type string but an expression was expected of type
#          bytes



<><> Error report <><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
+- The following actions failed
| - build frag 0.1.0
+- 
+- The following changes have been performed
| - install base                    v0.9.4
| - install bin_prot                v0.9.2
| - install configurator            v0.9.1
| - install core                    v0.9.2
| - install core_kernel             v0.9.1
| - install fieldslib               v0.9.0
| - install jane-street-headers     v0.9.0
| - install mpp                     0.3.2
| - install num                     1.1
| - install oasis                   0.4.11
| - install ocaml-compiler-libs     v0.9.0
| - install ocaml-migrate-parsetree 1.0.11
| - install ocamlbuild              0.12.0
| - install ocamlify                0.0.1
| - install ocamlmod                0.0.9
| - install octavius                1.2.0
| - install ppx_assert              v0.9.0
| - install ppx_ast                 v0.9.2
| - install ppx_base                v0.9.0
| - install ppx_bench               v0.9.1
| - install ppx_bin_prot            v0.9.0
| - install ppx_compare             v0.9.0
| - install ppx_core                v0.9.3
| - install ppx_custom_printf       v0.9.0
| - install ppx_derivers            1.0
| - install ppx_driver              v0.9.2
| - install ppx_enumerate           v0.9.0
| - install ppx_expect              v0.9.0
| - install ppx_fail                v0.9.0
| - install ppx_fields_conv         v0.9.0
| - install ppx_hash                v0.9.0
| - install ppx_here                v0.9.1
| - install ppx_inline_test         v0.9.2
| - install ppx_jane                v0.9.0
| - install ppx_js_style            v0.9.0
| - install ppx_let                 v0.9.0
| - install ppx_metaquot            v0.9.0
| - install ppx_optcomp             v0.9.0
| - install ppx_optional            v0.9.0
| - install ppx_pipebang            v0.9.0
| - install ppx_sexp_conv           v0.9.0
| - install ppx_sexp_message        v0.9.0
| - install ppx_sexp_value          v0.9.0
| - install ppx_traverse            v0.9.0
| - install ppx_traverse_builtins   v0.9.0
| - install ppx_type_conv           v0.9.1
| - install ppx_typerep_conv        v0.9.0
| - install ppx_variants_conv       v0.9.0
| - install re                      1.7.3
| - install result                  1.3
| - install sexplib                 v0.9.3
| - install spawn                   v0.9.0
| - install stdio                   v0.9.1
| - install typerep                 v0.9.0
| - install variantslib             v0.9.0
+- 
# Run eval $(opam env) to update the current shell environment

The former state can be restored with:
    opam switch import "/home/opam/.opam/4.06/.opam-switch/backup/state-20180820054818.export"
31 1534744095 1534744350